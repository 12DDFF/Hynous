# Hynous Configuration
# Edit this file to change behavior. Restart app after changes.

# Application metadata
app:
  name: "Hynous"
  version: "0.1.0"

# Execution settings
execution:
  mode: "paper"              # paper | testnet | live_confirm | live_auto
  paper_balance: 1000        # Starting balance for paper trading (USD)
  symbols:                   # Symbols to track
    - "BTC"
    - "ETH"
    - "SOL"

# Hyperliquid exchange settings
hyperliquid:
  default_leverage: 10         # Minimum 10x, always set per-trade
  max_position_usd: 10000     # Safety cap per position on testnet
  default_slippage: 0.05       # 5% slippage tolerance for market orders

# Agent settings
agent:
  model: "openrouter/anthropic/claude-sonnet-4-5-20250929"  # OpenRouter: 1 key, all models
  max_tokens: 4096           # Max response tokens
  temperature: 0.7           # Creativity (0-1)

# Coinglass settings (cross-exchange derivatives data)
coinglass:
  plan: "hobbyist"             # hobbyist | analyst | professional

# Daemon settings (background autonomous agent)
daemon:
  enabled: false                   # Master switch â€” enable autonomous mode
  price_poll_interval: 60          # Price polling from Hyperliquid (seconds)
  deriv_poll_interval: 300         # Derivatives/sentiment polling (seconds)
  periodic_interval: 3600          # Periodic market review wake (seconds, 60 min)
  curiosity_threshold: 1           # Pending curiosity items before learning session
  curiosity_check_interval: 900    # Curiosity queue check interval (seconds, 15 min)
  decay_interval: 21600              # FSRS batch decay cycle interval (seconds, 6 hours)
  conflict_check_interval: 1800      # Contradiction queue polling interval (seconds, 30 min)
  health_check_interval: 3600        # Nous health check interval (seconds, 1 hour)
  embedding_backfill_interval: 43200 # Embedding backfill interval (seconds, 12 hours)
  max_daily_loss_usd: 100            # Circuit breaker: pause trading after this daily loss
  max_open_positions: 3              # Max simultaneous open positions
  max_wakes_per_hour: 6              # Rate limit on agent wakes per hour
  wake_cooldown_seconds: 120         # Min seconds between non-priority wakes

# Market scanner (anomaly detection across ALL Hyperliquid pairs)
scanner:
  enabled: true
  wake_threshold: 0.6              # Min severity to wake agent (0.0-1.0)
  max_anomalies_per_wake: 5
  dedup_ttl_minutes: 30
  price_spike_5min_pct: 3.0        # % move in 5min to flag
  price_spike_15min_pct: 5.0       # % move in 15min to flag
  funding_extreme_percentile: 95   # Percentile cutoff for funding extremes
  oi_surge_pct: 10.0               # % OI change in 5min to flag
  liq_cascade_min_usd: 5000000     # Per-coin 1h liquidation threshold
  liq_wave_min_usd: 50000000       # Market-wide 1h liquidation threshold
  min_oi_usd: 1000000              # Skip pairs with OI below this
  # Micro trading detectors (L2 + 5m candles)
  book_poll_enabled: true            # Fetch L2 orderbooks + 5m candles for tracked symbols
  book_imbalance_flip_pct: 15.0      # Imbalance swing % to trigger book_flip detector
  momentum_5m_pct: 1.5               # 5m candle body % to trigger momentum_burst
  momentum_volume_mult: 2.0          # Volume multiplier vs rolling avg for momentum
  position_adverse_threshold: 0.40   # Imbalance threshold for adverse book signal
  # News integration (CryptoCompare)
  news_poll_enabled: true              # Poll CryptoCompare for news (every deriv cycle)
  news_wake_max_age_minutes: 30        # Only alert on news < 30min old

# Discord bot (chat relay + daemon notifications)
discord:
  enabled: true                                # Master switch
  channel_id: 1469952346028245097              # Discord channel ID for notifications + chat
  stats_channel_id: 1469946713471975476        # Separate channel for stats panel
  allowed_user_ids:                            # Only respond to these users
    - 1415781451474927657                      # David
    - 614868895643205639                       # Kevin

# Memory (Nous) settings
nous:
  url: "http://localhost:3100"        # Nous server URL
  server_dir: "nous-server/server"  # Path to Nous server (relative to project root)
  db_path: "storage/nous.db"          # Server-side DB path
  auto_retrieve_limit: 5              # Recent memories to auto-load

# Tiered memory settings (working window + Nous-backed compression)
memory:
  window_size: 6                 # Complete exchanges to keep in working window
  max_context_tokens: 4000       # Token budget for recalled context injected per call (~1000 words)
  retrieve_limit: 5              # Max memories to retrieve per query
  compression_model: "openrouter/anthropic/claude-haiku-4-5-20251001"  # OpenRouter
  compress_enabled: true         # Enable/disable automatic compression

# Event detection thresholds
events:
  funding:
    extreme_positive: 0.001  # 0.10%
    extreme_negative: -0.0005  # -0.05%
  price:
    spike_percent: 0.05      # 5% move triggers event
  cooldown_minutes: 30       # Min time between same event type

# Logging
logging:
  level: "INFO"              # DEBUG | INFO | WARNING | ERROR
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
