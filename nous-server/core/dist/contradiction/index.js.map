{"version":3,"sources":["../../src/contradiction/constants.ts","../../src/contradiction/types.ts","../../src/contradiction/index.ts"],"names":["z"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * @module @nous/core/contradiction\n * @description Constants for Contradiction Resolution System (CRS)\n * @version 1.0.0\n * @spec Specs/Phase-5-Quality-Control/storm-009\n * @storm Brainstorms/Infrastructure/storm-009-contradiction-handling\n *\n * All numeric thresholds, limits, and configuration defaults.\n * These values are from storm-009 v2 revision and should not be changed\n * without updating the brainstorm.\n */\n\nimport { z } from 'zod';\n\n// ============================================================\n// DETECTION TIER CONSTANTS\n// ============================================================\n\n/**\n * Detection tier names.\n * Pipeline flows: STRUCTURAL → NORMALIZED → PATTERN → CLASSIFIER → LLM → VERIFICATION\n */\nexport const DETECTION_TIERS = [\n  'STRUCTURAL',\n  'NORMALIZED',\n  'PATTERN',\n  'CLASSIFIER',\n  'LLM',\n  'VERIFICATION',\n] as const;\n\nexport type DetectionTier = (typeof DETECTION_TIERS)[number];\n\nexport const DetectionTierSchema = z.enum(DETECTION_TIERS);\n\n/**\n * Type guard for DetectionTier.\n */\nexport function isDetectionTier(value: unknown): value is DetectionTier {\n  return DETECTION_TIERS.includes(value as DetectionTier);\n}\n\n/**\n * Metadata for each detection tier.\n * Speed, cost, and accuracy targets from v2 revision.\n */\nexport const DETECTION_TIER_METADATA: Record<\n  DetectionTier,\n  { speed_ms: number; cost: number; accuracy: number }\n> = {\n  STRUCTURAL: { speed_ms: 1, cost: 0, accuracy: 0.95 },\n  NORMALIZED: { speed_ms: 3, cost: 0, accuracy: 0.90 },\n  PATTERN: { speed_ms: 10, cost: 0, accuracy: 0.75 },\n  CLASSIFIER: { speed_ms: 20, cost: 0.0001, accuracy: 0.85 },\n  LLM: { speed_ms: 500, cost: 0.002, accuracy: 0.92 },\n  VERIFICATION: { speed_ms: 1000, cost: 0.004, accuracy: 0.97 },\n} as const;\n\n/**\n * Confidence thresholds for detection tiers.\n * Determines when to proceed to next tier or stop.\n */\nexport const TIER_THRESHOLDS = {\n  /** Tier 1: Structural match confidence */\n  structural_confidence: 0.95,\n\n  /** Tier 1.5: Normalized match confidence */\n  normalized_confidence: 0.90,\n\n  /** Tier 2: Pattern high confidence - proceed to resolution */\n  pattern_high_threshold: 0.70,\n\n  /** Tier 2: Pattern continue threshold - proceed to Tier 2.5 */\n  pattern_continue_threshold: 0.40,\n\n  /** Tier 2.5: Classifier threshold to proceed */\n  classifier_threshold: 0.70,\n\n  /** Tier 3: LLM confidence for auto-supersession (requires Tier 4) */\n  llm_auto_threshold: 0.80,\n\n  /** Tier 4: Verification confidence for auto-supersession */\n  verification_threshold: 0.70,\n} as const;\n\n// ============================================================\n// CONFLICT TYPE CONSTANTS\n// ============================================================\n\n/**\n * The 6 contradiction types.\n */\nexport const CONFLICT_TYPES = [\n  'FACT_UPDATE',\n  'CORRECTION',\n  'BELIEF_CONTRADICTION',\n  'BELIEF_EVOLUTION',\n  'SOURCE_CONFLICT',\n  'AMBIGUOUS',\n] as const;\n\nexport type ConflictType = (typeof CONFLICT_TYPES)[number];\n\nexport const ConflictTypeSchema = z.enum(CONFLICT_TYPES);\n\n/**\n * Type guard for ConflictType.\n */\nexport function isConflictType(value: unknown): value is ConflictType {\n  return CONFLICT_TYPES.includes(value as ConflictType);\n}\n\n/**\n * Resolution strategies.\n */\nexport const RESOLUTION_STRATEGIES = [\n  'supersede_old',\n  'keep_both_linked',\n  'keep_both_unlinked',\n  'queue_for_user',\n  'source_ranking',\n] as const;\n\nexport type ResolutionStrategy = (typeof RESOLUTION_STRATEGIES)[number];\n\nexport const ResolutionStrategySchema = z.enum(RESOLUTION_STRATEGIES);\n\n/**\n * Resolution details for each conflict type.\n */\nexport const CONFLICT_TYPE_RESOLUTION: Record<\n  ConflictType,\n  {\n    auto_supersede: boolean;\n    resolution: ResolutionStrategy;\n    description: string;\n  }\n> = {\n  FACT_UPDATE: {\n    auto_supersede: true,\n    resolution: 'supersede_old',\n    description: 'Same entity+attribute, different value. New replaces old.',\n  },\n  CORRECTION: {\n    auto_supersede: true,\n    resolution: 'supersede_old',\n    description: 'Explicit correction marker detected. New replaces old.',\n  },\n  BELIEF_CONTRADICTION: {\n    auto_supersede: true,\n    resolution: 'supersede_old',\n    description: 'Same topic, sentiment flip (+ to - or - to +). New replaces old.',\n  },\n  BELIEF_EVOLUTION: {\n    auto_supersede: false,\n    resolution: 'keep_both_linked',\n    description: 'Same topic, similar sentiment, scope expanded. Keep both with evolves_from edge.',\n  },\n  SOURCE_CONFLICT: {\n    auto_supersede: true,\n    resolution: 'source_ranking',\n    description: 'Same fact from different sources. Higher trust source wins.',\n  },\n  AMBIGUOUS: {\n    auto_supersede: false,\n    resolution: 'queue_for_user',\n    description: 'LLM confidence < 0.7. Queue for user resolution.',\n  },\n} as const;\n\n// ============================================================\n// SUPERSEDED LIFECYCLE CONSTANTS\n// ============================================================\n\n/**\n * Superseded node lifecycle states.\n */\nexport const SUPERSEDED_STATES = [\n  'SUPERSEDED_ACTIVE',\n  'SUPERSEDED_FADING',\n  'SUPERSEDED_DORMANT',\n  'SUPERSEDED_ARCHIVED',\n  'SUPERSEDED_DELETED',\n] as const;\n\nexport type SupersededState = (typeof SUPERSEDED_STATES)[number];\n\nexport const SupersededStateSchema = z.enum(SUPERSEDED_STATES);\n\n/**\n * Type guard for SupersededState.\n */\nexport function isSupersededState(value: unknown): value is SupersededState {\n  return SUPERSEDED_STATES.includes(value as SupersededState);\n}\n\n/**\n * Decay rate multipliers per superseded state.\n * Applied to normal decay rate (λ_superseded = multiplier × λ_normal).\n */\nexport const SUPERSEDED_DECAY_MULTIPLIERS: Record<SupersededState, number> = {\n  SUPERSEDED_ACTIVE: 3,\n  SUPERSEDED_FADING: 4,\n  SUPERSEDED_DORMANT: 5,\n  SUPERSEDED_ARCHIVED: 5,\n  SUPERSEDED_DELETED: 0,\n} as const;\n\n/**\n * If user accesses superseded node, reduce decay multiplier to this.\n */\nexport const SUPERSEDED_ACCESS_DECAY_MULTIPLIER = 2;\n\n/**\n * Retrievability thresholds for superseded state transitions.\n */\nexport const SUPERSEDED_R_THRESHOLDS = {\n  /** Above this: SUPERSEDED_ACTIVE */\n  active_min: 0.3,\n  /** Between fading_min and active_min: SUPERSEDED_FADING */\n  fading_min: 0.1,\n  /** Below fading_min: SUPERSEDED_DORMANT */\n  dormant_max: 0.1,\n} as const;\n\n/**\n * Days in dormant state before archival.\n */\nexport const SUPERSEDED_DORMANT_DAYS = 90;\n\n// ============================================================\n// DELETION CRITERIA CONSTANTS\n// ============================================================\n\n/**\n * All 5 conditions must be true for deletion.\n */\nexport const DELETION_CRITERIA = {\n  /** 1. Must be archived for this many days */\n  min_archived_days: 180,\n  /** 2. Must have zero accesses since archival */\n  required_access_count: 0,\n  /** 3. No incoming edges with strength above this */\n  max_edge_strength: 0.5,\n  /** 4. Superseding node must still be active */\n  superseding_must_be_active: true,\n  /** 5. Raw source must exist in Archive Layer */\n  raw_must_exist: true,\n} as const;\n\n/**\n * Storage pressure threshold that triggers deletion audit.\n */\nexport const STORAGE_PRESSURE_THRESHOLD = 0.80;\n\n// ============================================================\n// CONFLICT QUEUE CONSTANTS\n// ============================================================\n\n/**\n * Conflict resolution queue configuration.\n */\nexport const CONFLICT_QUEUE_CONFIG = {\n  /** Maximum items in queue - oldest auto-resolves on overflow */\n  max_items: 20,\n  /** Days before auto-resolve to \"keep both\" */\n  auto_resolve_days: 14,\n  /** Auto-resolve strategy */\n  auto_resolve_strategy: 'keep_both' as const,\n  /** Weekly prompt day (0=Sunday, 1=Monday) */\n  weekly_prompt_day: 1,\n} as const;\n\n/**\n * Conflict statuses.\n */\nexport const CONFLICT_STATUSES = ['pending', 'resolved', 'auto_resolved'] as const;\n\nexport type ConflictStatus = (typeof CONFLICT_STATUSES)[number];\n\nexport const ConflictStatusSchema = z.enum(CONFLICT_STATUSES);\n\n/**\n * User resolution options.\n */\nexport const USER_RESOLUTIONS = [\n  'old_is_current',\n  'new_is_current',\n  'keep_both',\n  'merge',\n] as const;\n\nexport type UserResolution = (typeof USER_RESOLUTIONS)[number];\n\nexport const UserResolutionSchema = z.enum(USER_RESOLUTIONS);\n\n/**\n * Description of each resolution option.\n */\nexport const USER_RESOLUTION_DESCRIPTIONS: Record<UserResolution, string> = {\n  old_is_current: 'Keep the old information as current. Discard the new.',\n  new_is_current: 'The new information supersedes the old.',\n  keep_both: 'Both are valid. Keep both without supersession.',\n  merge: 'Create a merged version combining both.',\n} as const;\n\n// ============================================================\n// ACCURACY MODE CONSTANTS\n// ============================================================\n\n/**\n * User-selectable accuracy modes.\n */\nexport const ACCURACY_MODES = ['FAST', 'BALANCED', 'THOROUGH', 'MANUAL'] as const;\n\nexport type AccuracyMode = (typeof ACCURACY_MODES)[number];\n\nexport const AccuracyModeSchema = z.enum(ACCURACY_MODES);\n\n/**\n * Type guard for AccuracyMode.\n */\nexport function isAccuracyMode(value: unknown): value is AccuracyMode {\n  return ACCURACY_MODES.includes(value as AccuracyMode);\n}\n\n/**\n * Accuracy targets per tier for monitoring.\n */\nexport const ACCURACY_TARGETS: Record<DetectionTier, number> = {\n  STRUCTURAL: 0.95,\n  NORMALIZED: 0.90,\n  PATTERN: 0.75,\n  CLASSIFIER: 0.85,\n  LLM: 0.92,\n  VERIFICATION: 0.97,\n} as const;\n\n/**\n * Overall auto-supersede accuracy target.\n */\nexport const AUTO_SUPERSEDE_ACCURACY_TARGET = 0.97;\n\n// ============================================================\n// CLASSIFIER TRAINING CONSTANTS\n// ============================================================\n\n/**\n * Thresholds for classifier training (self-improvement).\n */\nexport const CLASSIFIER_TRAINING = {\n  /** Train initial model at this many examples */\n  initial_train_examples: 500,\n  /** Retrain with full dataset at this many examples */\n  retrain_examples: 2000,\n  /** Minimum accuracy before alerting */\n  accuracy_alert_threshold: 0.85,\n  /** Auto-supersede accuracy below this triggers conservative mode */\n  auto_mode_switch_threshold: 0.95,\n} as const;\n\n// ============================================================\n// PATTERN MATCHING CONSTANTS\n// ============================================================\n\n/**\n * Attribute synonym mappings for Tier 1.5 normalization.\n */\nexport const ATTRIBUTE_SYNONYMS: Record<string, string[]> = {\n  'contact.phone': ['phone', 'cell', 'mobile', 'number', 'telephone'],\n  'contact.email': ['email', 'mail', 'e-mail'],\n  'belief.stance': ['thinks', 'believes', 'opinion', 'stance', 'position', 'view'],\n  'location.residence': ['lives', 'resides', 'located', 'staying', 'address'],\n  'meeting.date': ['meeting', 'appointment', 'scheduled'],\n  'project.status': ['project', 'deadline', 'due'],\n} as const;\n\n/**\n * Correction marker patterns for Tier 2.\n */\nexport const PATTERN_TRIGGERS = [\n  'actually',\n  'I was wrong',\n  'correction:',\n  'update:',\n  'no longer',\n  'changed to',\n  \"now it's\",\n  'turns out',\n  'not anymore',\n  'used to be',\n] as const;\n\n/**\n * Disqualifier patterns for Tier 2.\n */\nexport const PATTERN_DISQUALIFIERS = [\n  \"wasn't actually\",\n  'not really',\n  'wrong to doubt',\n  'wrong of me',\n  'was I wrong?',\n  'is it actually?',\n  'good point',\n  'actually, yes',\n  'actually enjoyed',\n  'actually quite',\n  'actually like',\n  'actually think',\n] as const;\n\n/**\n * Confidence scoring weights for Tier 2 pattern detection.\n */\nexport const PATTERN_CONFIDENCE_WEIGHTS = {\n  /** Base confidence when trigger found */\n  base: 0.50,\n  /** Add if entity reference within 10 words */\n  entity_nearby: 0.15,\n  /** Add if factual value present */\n  has_value: 0.10,\n  /** Add if temporal signal present */\n  temporal_signal: 0.10,\n  /** Subtract if any disqualifier found */\n  disqualifier_penalty: -0.30,\n} as const;\n\n/**\n * Maximum distance (in words) for entity to be considered \"nearby\".\n */\nexport const ENTITY_NEARBY_DISTANCE = 10;\n\n// ============================================================\n// RETRIEVAL INTEGRATION CONSTANTS\n// ============================================================\n\n/**\n * Patterns that trigger history mode in QCS.\n */\nexport const HISTORY_MODE_PATTERNS = [\n  'used to',\n  'before',\n  'previously',\n  'originally',\n  'changed',\n  'updated',\n  'evolved',\n  'history of',\n  'what did I think',\n  'how has .* changed',\n] as const;\n\n/**\n * Penalty applied to superseded nodes in history mode.\n */\nexport const HISTORY_MODE_SUPERSEDED_PENALTY = 0.5;\n\n/**\n * SSA activation cap for superseded nodes.\n */\nexport const SSA_SUPERSEDED_ACTIVATION_CAP = 0.3;\n\n/**\n * Spread decay factor for superseded nodes.\n */\nexport const SSA_SUPERSEDED_SPREAD_DECAY = 0.5;\n\n// ============================================================\n// QUERY MODE CONSTANTS\n// ============================================================\n\n/**\n * Query modes for retrieval.\n */\nexport const QUERY_MODES = ['current', 'as_of', 'history', 'full_audit'] as const;\n\nexport type QueryMode = (typeof QUERY_MODES)[number];\n\nexport const QueryModeSchema = z.enum(QUERY_MODES);\n\n/**\n * Type guard for QueryMode.\n */\nexport function isQueryMode(value: unknown): value is QueryMode {\n  return QUERY_MODES.includes(value as QueryMode);\n}\n\n// ============================================================\n// SENTIMENT CONSTANTS\n// ============================================================\n\n/**\n * Sentiment categories for belief analysis.\n */\nexport const SENTIMENTS = ['positive', 'negative', 'neutral'] as const;\n\nexport type Sentiment = (typeof SENTIMENTS)[number];\n\nexport const SentimentSchema = z.enum(SENTIMENTS);\n","/**\n * @module @nous/core/contradiction\n * @description Types and schemas for Contradiction Resolution System\n * @version 1.0.0\n * @spec Specs/Phase-5-Quality-Control/storm-009\n * @storm Brainstorms/Infrastructure/storm-009-contradiction-handling\n */\n\nimport { z } from 'zod';\nimport {\n  type DetectionTier,\n  type ConflictType,\n  type ResolutionStrategy,\n  type SupersededState,\n  type ConflictStatus,\n  type UserResolution,\n  type AccuracyMode,\n  type QueryMode,\n  DetectionTierSchema,\n  ConflictTypeSchema,\n  ResolutionStrategySchema,\n  SupersededStateSchema,\n  ConflictStatusSchema,\n  UserResolutionSchema,\n  AccuracyModeSchema,\n  QueryModeSchema,\n} from './constants';\n\n// ============================================================\n// DETECTION CONTEXT\n// ============================================================\n\n/**\n * Context provided for type classification.\n */\nexport interface DetectionContext {\n  old_value: string;\n  new_value: string;\n  old_timestamp: string;\n  new_timestamp: string;\n  old_source_confidence: number;\n  new_source_confidence: number;\n  has_sentiment_flip: boolean;\n  has_scope_expansion: boolean;\n  entity_id?: string;\n  attribute_type?: string;\n  has_correction_pattern: boolean;\n}\n\nexport const DetectionContextSchema = z.object({\n  old_value: z.string(),\n  new_value: z.string(),\n  old_timestamp: z.string().datetime(),\n  new_timestamp: z.string().datetime(),\n  old_source_confidence: z.number().min(0).max(1),\n  new_source_confidence: z.number().min(0).max(1),\n  has_sentiment_flip: z.boolean(),\n  has_scope_expansion: z.boolean(),\n  entity_id: z.string().optional(),\n  attribute_type: z.string().optional(),\n  has_correction_pattern: z.boolean(),\n});\n\n// ============================================================\n// TYPE CLASSIFICATION\n// ============================================================\n\n/**\n * Result of classifying a potential contradiction.\n */\nexport interface TypeClassification {\n  type: ConflictType;\n  confidence: number;\n  auto_supersede: boolean;\n  resolution: ResolutionStrategy;\n  reasoning: string;\n}\n\nexport const TypeClassificationSchema = z.object({\n  type: ConflictTypeSchema,\n  confidence: z.number().min(0).max(1),\n  auto_supersede: z.boolean(),\n  resolution: ResolutionStrategySchema,\n  reasoning: z.string(),\n});\n\n// ============================================================\n// TIER RESULTS\n// ============================================================\n\n/**\n * Result from any detection tier.\n */\nexport interface TierResult {\n  tier: DetectionTier;\n  detected: boolean;\n  confidence: number;\n  conflict_type?: ConflictType;\n  should_continue: boolean;\n  reasoning?: string;\n  time_ms: number;\n  cost: number;\n}\n\nexport const TierResultSchema = z.object({\n  tier: DetectionTierSchema,\n  detected: z.boolean(),\n  confidence: z.number().min(0).max(1),\n  conflict_type: ConflictTypeSchema.optional(),\n  should_continue: z.boolean(),\n  reasoning: z.string().optional(),\n  time_ms: z.number().min(0),\n  cost: z.number().min(0),\n});\n\n/**\n * Tier 1: Structural detection result.\n */\nexport interface StructuralDetection {\n  entity_id?: string;\n  attribute_type?: string;\n  old_value?: string;\n  new_value?: string;\n  match_found: boolean;\n  values_differ: boolean;\n}\n\nexport const StructuralDetectionSchema = z.object({\n  entity_id: z.string().optional(),\n  attribute_type: z.string().optional(),\n  old_value: z.string().optional(),\n  new_value: z.string().optional(),\n  match_found: z.boolean(),\n  values_differ: z.boolean(),\n});\n\n/**\n * Tier 1.5: Normalization result.\n */\nexport interface NormalizationResult {\n  original_attribute: string;\n  normalized_attribute: string;\n  synonyms_matched: string[];\n  implicit_extraction?: {\n    pattern: string;\n    extracted_attribute: string;\n    extracted_value: string;\n  };\n}\n\nexport const NormalizationResultSchema = z.object({\n  original_attribute: z.string(),\n  normalized_attribute: z.string(),\n  synonyms_matched: z.array(z.string()),\n  implicit_extraction: z\n    .object({\n      pattern: z.string(),\n      extracted_attribute: z.string(),\n      extracted_value: z.string(),\n    })\n    .optional(),\n});\n\n/**\n * Tier 2: Pattern detection result.\n */\nexport interface PatternDetection {\n  triggers_found: string[];\n  entity_nearby: boolean;\n  has_value: boolean;\n  temporal_signal: boolean;\n  disqualifiers_found: string[];\n  confidence_score: number;\n}\n\nexport const PatternDetectionSchema = z.object({\n  triggers_found: z.array(z.string()),\n  entity_nearby: z.boolean(),\n  has_value: z.boolean(),\n  temporal_signal: z.boolean(),\n  disqualifiers_found: z.array(z.string()),\n  confidence_score: z.number().min(0).max(1),\n});\n\n/**\n * Tier 2.5: Classifier result.\n */\nexport interface ClassifierResult {\n  is_correction: boolean;\n  confidence: number;\n  model_used: 'few_shot' | 'fine_tuned';\n}\n\nexport const ClassifierResultSchema = z.object({\n  is_correction: z.boolean(),\n  confidence: z.number().min(0).max(1),\n  model_used: z.enum(['few_shot', 'fine_tuned']),\n});\n\n/**\n * Tier 3: LLM detection output.\n */\nexport interface LLMDetectionOutput {\n  relationship: 'contradicts' | 'updates' | 'evolves' | 'coexists' | 'unrelated';\n  confidence: number;\n  reasoning: string;\n  which_is_current: 'old' | 'new' | 'both' | 'unclear';\n  both_could_be_true: boolean;\n  is_time_dependent: boolean;\n  needs_user_input: boolean;\n}\n\nexport const LLMDetectionOutputSchema = z.object({\n  relationship: z.enum(['contradicts', 'updates', 'evolves', 'coexists', 'unrelated']),\n  confidence: z.number().min(0).max(1),\n  reasoning: z.string(),\n  which_is_current: z.enum(['old', 'new', 'both', 'unclear']),\n  both_could_be_true: z.boolean(),\n  is_time_dependent: z.boolean(),\n  needs_user_input: z.boolean(),\n});\n\n/**\n * Tier 4: Verification output.\n */\nexport interface VerificationOutput {\n  should_supersede: boolean;\n  confidence: number;\n  concerns: string[];\n  recommendation: 'auto_supersede' | 'queue_for_user' | 'keep_both';\n}\n\nexport const VerificationOutputSchema = z.object({\n  should_supersede: z.boolean(),\n  confidence: z.number().min(0).max(1),\n  concerns: z.array(z.string()),\n  recommendation: z.enum(['auto_supersede', 'queue_for_user', 'keep_both']),\n});\n\n/**\n * Full pipeline result.\n */\nexport interface DetectionPipelineResult {\n  final_tier: DetectionTier;\n  conflict_detected: boolean;\n  conflict_type?: ConflictType;\n  overall_confidence: number;\n  auto_supersede: boolean;\n  needs_user_resolution: boolean;\n  tier_results: TierResult[];\n  total_time_ms: number;\n  total_cost: number;\n}\n\nexport const DetectionPipelineResultSchema = z.object({\n  final_tier: DetectionTierSchema,\n  conflict_detected: z.boolean(),\n  conflict_type: ConflictTypeSchema.optional(),\n  overall_confidence: z.number().min(0).max(1),\n  auto_supersede: z.boolean(),\n  needs_user_resolution: z.boolean(),\n  tier_results: z.array(TierResultSchema),\n  total_time_ms: z.number().min(0),\n  total_cost: z.number().min(0),\n});\n\n// ============================================================\n// SUPERSEDED LIFECYCLE\n// ============================================================\n\n/**\n * Configuration for each superseded state.\n */\nexport interface SupersededStateConfig {\n  state: SupersededState;\n  r_threshold_min?: number;\n  r_threshold_max?: number;\n  decay_multiplier: number;\n  retrieval_mode: 'normal_excluded' | 'history_only' | 'audit_only' | 'none';\n  content_state: 'full' | 'summarized' | 'reference_only' | 'deleted';\n  duration_days?: number;\n}\n\nexport const SupersededStateConfigSchema = z.object({\n  state: SupersededStateSchema,\n  r_threshold_min: z.number().min(0).max(1).optional(),\n  r_threshold_max: z.number().min(0).max(1).optional(),\n  decay_multiplier: z.number().min(0),\n  retrieval_mode: z.enum(['normal_excluded', 'history_only', 'audit_only', 'none']),\n  content_state: z.enum(['full', 'summarized', 'reference_only', 'deleted']),\n  duration_days: z.number().int().positive().optional(),\n});\n\n/**\n * Fields added to a node when superseded.\n */\nexport interface SupersessionFields {\n  superseded_by?: string;\n  superseded_at?: string;\n  superseded_state?: SupersededState;\n  decay_rate_multiplier?: number;\n  access_count_since_superseded?: number;\n  dormant_since?: string;\n  archived_at?: string;\n}\n\nexport const SupersessionFieldsSchema = z.object({\n  superseded_by: z.string().optional(),\n  superseded_at: z.string().datetime().optional(),\n  superseded_state: SupersededStateSchema.optional(),\n  decay_rate_multiplier: z.number().min(0).optional(),\n  access_count_since_superseded: z.number().int().min(0).optional(),\n  dormant_since: z.string().datetime().optional(),\n  archived_at: z.string().datetime().optional(),\n});\n\n/**\n * Deletion criteria result.\n */\nexport interface DeletionCriteriaResult {\n  eligible: boolean;\n  criteria: {\n    archived_long_enough: boolean;\n    days_archived: number;\n    no_accesses: boolean;\n    access_count: number;\n    no_important_edges: boolean;\n    max_edge_strength: number;\n    superseding_active: boolean;\n    superseding_node_state?: string;\n    raw_in_archive: boolean;\n  };\n}\n\nexport const DeletionCriteriaResultSchema = z.object({\n  eligible: z.boolean(),\n  criteria: z.object({\n    archived_long_enough: z.boolean(),\n    days_archived: z.number().int().min(0),\n    no_accesses: z.boolean(),\n    access_count: z.number().int().min(0),\n    no_important_edges: z.boolean(),\n    max_edge_strength: z.number().min(0).max(1),\n    superseding_active: z.boolean(),\n    superseding_node_state: z.string().optional(),\n    raw_in_archive: z.boolean(),\n  }),\n});\n\n/**\n * State transition event.\n */\nexport interface SupersededStateTransition {\n  node_id: string;\n  from_state: SupersededState;\n  to_state: SupersededState;\n  triggered_by: 'decay' | 'time' | 'storage_pressure' | 'user_access';\n  timestamp: string;\n  context?: {\n    retrievability?: number;\n    days_in_previous_state?: number;\n    user_accessed?: boolean;\n  };\n}\n\nexport const SupersededStateTransitionSchema = z.object({\n  node_id: z.string(),\n  from_state: SupersededStateSchema,\n  to_state: SupersededStateSchema,\n  triggered_by: z.enum(['decay', 'time', 'storage_pressure', 'user_access']),\n  timestamp: z.string().datetime(),\n  context: z\n    .object({\n      retrievability: z.number().min(0).max(1).optional(),\n      days_in_previous_state: z.number().int().min(0).optional(),\n      user_accessed: z.boolean().optional(),\n    })\n    .optional(),\n});\n\n// ============================================================\n// CONFLICT QUEUE\n// ============================================================\n\n/**\n * An item in the conflict resolution queue.\n */\nexport interface ConflictQueueItem {\n  id: string;\n  old_node_id: string;\n  new_content: string;\n  new_node_id?: string;\n  conflict_type: ConflictType;\n  detection_tier: DetectionTier;\n  detection_confidence: number;\n  context: string;\n  created_at: string;\n  expires_at: string;\n  status: ConflictStatus;\n  entity_name?: string;\n  topic?: string;\n}\n\nexport const ConflictQueueItemSchema = z.object({\n  id: z.string(),\n  old_node_id: z.string(),\n  new_content: z.string(),\n  new_node_id: z.string().optional(),\n  conflict_type: ConflictTypeSchema,\n  detection_tier: DetectionTierSchema,\n  detection_confidence: z.number().min(0).max(1),\n  context: z.string(),\n  created_at: z.string().datetime(),\n  expires_at: z.string().datetime(),\n  status: ConflictStatusSchema,\n  entity_name: z.string().optional(),\n  topic: z.string().optional(),\n});\n\n/**\n * Contradiction resolution event.\n * Note: Named ContradictionResolution to avoid collision with sync module's ConflictResolution.\n */\nexport interface ContradictionResolution {\n  conflict_id: string;\n  resolved_by: 'user' | 'auto' | 'timeout';\n  resolution: UserResolution;\n  resolved_at: string;\n  user_merged_content?: string;\n  was_override?: boolean;\n}\n\nexport const ContradictionResolutionSchema = z.object({\n  conflict_id: z.string(),\n  resolved_by: z.enum(['user', 'auto', 'timeout']),\n  resolution: UserResolutionSchema,\n  resolved_at: z.string().datetime(),\n  user_merged_content: z.string().optional(),\n  was_override: z.boolean().optional(),\n});\n\n/**\n * Queue status.\n */\nexport interface ConflictQueueStatus {\n  pending_count: number;\n  oldest_pending_date?: string;\n  next_auto_resolve_date?: string;\n  items_resolved_this_week: number;\n  at_capacity: boolean;\n}\n\nexport const ConflictQueueStatusSchema = z.object({\n  pending_count: z.number().int().min(0),\n  oldest_pending_date: z.string().datetime().optional(),\n  next_auto_resolve_date: z.string().datetime().optional(),\n  items_resolved_this_week: z.number().int().min(0),\n  at_capacity: z.boolean(),\n});\n\n/**\n * Conflict presentation for UI.\n */\nexport interface ConflictPresentation {\n  conflict_id: string;\n  entity_name?: string;\n  topic: string;\n  version_a: {\n    content: string;\n    date: string;\n    source?: string;\n  };\n  version_b: {\n    content: string;\n    date: string;\n    source?: string;\n  };\n  suggested_action?: UserResolution;\n  confidence_in_suggestion: number;\n  days_until_auto_resolve: number;\n}\n\nexport const ConflictPresentationSchema = z.object({\n  conflict_id: z.string(),\n  entity_name: z.string().optional(),\n  topic: z.string(),\n  version_a: z.object({\n    content: z.string(),\n    date: z.string(),\n    source: z.string().optional(),\n  }),\n  version_b: z.object({\n    content: z.string(),\n    date: z.string(),\n    source: z.string().optional(),\n  }),\n  suggested_action: UserResolutionSchema.optional(),\n  confidence_in_suggestion: z.number().min(0).max(1),\n  days_until_auto_resolve: z.number().int().min(0),\n});\n\n/**\n * Queue configuration.\n */\nexport interface ConflictQueueConfig {\n  max_items: number;\n  auto_resolve_days: number;\n  auto_resolve_strategy: UserResolution;\n  weekly_prompt_enabled: boolean;\n  weekly_prompt_day: number;\n}\n\nexport const ConflictQueueConfigSchema = z.object({\n  max_items: z.number().int().positive(),\n  auto_resolve_days: z.number().int().positive(),\n  auto_resolve_strategy: UserResolutionSchema,\n  weekly_prompt_enabled: z.boolean(),\n  weekly_prompt_day: z.number().int().min(0).max(6),\n});\n\n// ============================================================\n// ACCURACY MODES\n// ============================================================\n\n/**\n * Accuracy mode configuration.\n */\nexport interface AccuracyModeConfig {\n  mode: AccuracyMode;\n  description: string;\n  tiers_used: DetectionTier[];\n  auto_supersede_tiers: DetectionTier[];\n  user_involvement: 'high' | 'medium' | 'low' | 'very_high';\n  typical_speed_ms: number;\n  typical_cost: number;\n  expected_accuracy: number;\n}\n\nexport const AccuracyModeConfigSchema = z.object({\n  mode: AccuracyModeSchema,\n  description: z.string(),\n  tiers_used: z.array(DetectionTierSchema),\n  auto_supersede_tiers: z.array(DetectionTierSchema),\n  user_involvement: z.enum(['high', 'medium', 'low', 'very_high']),\n  typical_speed_ms: z.number().min(0),\n  typical_cost: z.number().min(0),\n  expected_accuracy: z.number().min(0).max(1),\n});\n\n/**\n * Detection event log.\n */\nexport interface DetectionEventLog {\n  id: string;\n  detection_id: string;\n  tier_reached: DetectionTier;\n  tier_confidence: number;\n  auto_resolved: boolean;\n  resolution: 'supersede' | 'keep_both' | 'unrelated';\n  user_override?: 'agreed' | 'disagreed';\n  user_resolution?: UserResolution;\n  timestamp: string;\n  accuracy_mode: AccuracyMode;\n  old_content?: string;\n  new_content?: string;\n}\n\nexport const DetectionEventLogSchema = z.object({\n  id: z.string(),\n  detection_id: z.string(),\n  tier_reached: DetectionTierSchema,\n  tier_confidence: z.number().min(0).max(1),\n  auto_resolved: z.boolean(),\n  resolution: z.enum(['supersede', 'keep_both', 'unrelated']),\n  user_override: z.enum(['agreed', 'disagreed']).optional(),\n  user_resolution: UserResolutionSchema.optional(),\n  timestamp: z.string().datetime(),\n  accuracy_mode: AccuracyModeSchema,\n  old_content: z.string().optional(),\n  new_content: z.string().optional(),\n});\n\n/**\n * Accuracy metrics.\n */\nexport interface AccuracyMetrics {\n  period_start: string;\n  period_end: string;\n  per_tier_accuracy: Record<DetectionTier, number | null>;\n  false_positive_rate: number;\n  false_negative_rate: number;\n  auto_supersede_accuracy: number;\n  total_detections: number;\n  user_resolutions: number;\n  by_mode: Record<AccuracyMode, { detections: number; accuracy: number | null }>;\n}\n\nexport const AccuracyMetricsSchema = z.object({\n  period_start: z.string().datetime(),\n  period_end: z.string().datetime(),\n  per_tier_accuracy: z.record(z.number().nullable()),\n  false_positive_rate: z.number().min(0).max(1),\n  false_negative_rate: z.number().min(0).max(1),\n  auto_supersede_accuracy: z.number().min(0).max(1),\n  total_detections: z.number().int().min(0),\n  user_resolutions: z.number().int().min(0),\n  by_mode: z.record(\n    z.object({\n      detections: z.number().int().min(0),\n      accuracy: z.number().nullable(),\n    })\n  ),\n});\n\n/**\n * Self-improvement configuration.\n */\nexport interface SelfImprovementConfig {\n  classifier_initial_train_examples: number;\n  classifier_retrain_examples: number;\n  accuracy_alert_threshold: number;\n  auto_mode_switch_threshold: number;\n}\n\nexport const SelfImprovementConfigSchema = z.object({\n  classifier_initial_train_examples: z.number().int().positive(),\n  classifier_retrain_examples: z.number().int().positive(),\n  accuracy_alert_threshold: z.number().min(0).max(1),\n  auto_mode_switch_threshold: z.number().min(0).max(1),\n});\n\n// ============================================================\n// RETRIEVAL INTEGRATION\n// ============================================================\n\n/**\n * QCS history mode configuration.\n */\nexport interface QCSHistoryModeConfig {\n  history_patterns: readonly string[];\n  superseded_penalty: number;\n}\n\nexport const QCSHistoryModeConfigSchema = z.object({\n  history_patterns: z.array(z.string()),\n  superseded_penalty: z.number().min(0).max(1),\n});\n\n/**\n * History mode detection result.\n */\nexport interface HistoryModeDetection {\n  is_history_mode: boolean;\n  matched_patterns: string[];\n  suggested_mode: QueryMode;\n}\n\nexport const HistoryModeDetectionSchema = z.object({\n  is_history_mode: z.boolean(),\n  matched_patterns: z.array(z.string()),\n  suggested_mode: QueryModeSchema,\n});\n\n/**\n * RCS supersession flag.\n */\nexport interface RCSSupersessionFlag {\n  flag: 'has_superseded_history';\n  trigger: 'top_result_has_superseded_by_chain';\n  explanation_text: string;\n}\n\nexport const RCSSupersessionFlagSchema = z.object({\n  flag: z.literal('has_superseded_history'),\n  trigger: z.literal('top_result_has_superseded_by_chain'),\n  explanation_text: z.string(),\n});\n\n/**\n * SSA superseded configuration.\n */\nexport interface SSASupersededConfig {\n  activation_cap: number;\n  spread_decay: number;\n  spread_to_superseding: boolean;\n}\n\nexport const SSASupersededConfigSchema = z.object({\n  activation_cap: z.number().min(0).max(1),\n  spread_decay: z.number().min(0).max(1),\n  spread_to_superseding: z.boolean(),\n});\n\n/**\n * Phase 2 context injection configuration.\n */\nexport interface Phase2ContextInjection {\n  superseded_context_template: string;\n  follow_supersedes_for: readonly string[];\n}\n\nexport const Phase2ContextInjectionSchema = z.object({\n  superseded_context_template: z.string(),\n  follow_supersedes_for: z.array(z.string()),\n});\n\n/**\n * Query mode configuration.\n */\nexport interface QueryModeConfig {\n  mode: QueryMode;\n  include_superseded: boolean;\n  superseded_penalty: number;\n  description: string;\n}\n\nexport const QueryModeConfigSchema = z.object({\n  mode: QueryModeSchema,\n  include_superseded: z.boolean(),\n  superseded_penalty: z.number().min(0).max(1),\n  description: z.string(),\n});\n\n/**\n * Combined retrieval integration configuration.\n */\nexport interface RetrievalIntegrationConfig {\n  qcs: QCSHistoryModeConfig;\n  rcs: RCSSupersessionFlag;\n  ssa: SSASupersededConfig;\n  phase2: Phase2ContextInjection;\n}\n\nexport const RetrievalIntegrationConfigSchema = z.object({\n  qcs: QCSHistoryModeConfigSchema,\n  rcs: RCSSupersessionFlagSchema,\n  ssa: SSASupersededConfigSchema,\n  phase2: Phase2ContextInjectionSchema,\n});\n\n// ============================================================\n// INPUT TYPES FOR TIER FUNCTIONS\n// ============================================================\n\n/**\n * Input for Tier 3 LLM detection.\n */\nexport interface Tier3Input {\n  entity_name: string;\n  entity_type: string;\n  attribute: string;\n  old_value: string;\n  old_date: string;\n  old_source: string;\n  new_statement: string;\n  context: string;\n  new_date: string;\n  new_source: string;\n}\n\nexport const Tier3InputSchema = z.object({\n  entity_name: z.string(),\n  entity_type: z.string(),\n  attribute: z.string(),\n  old_value: z.string(),\n  old_date: z.string(),\n  old_source: z.string(),\n  new_statement: z.string(),\n  context: z.string(),\n  new_date: z.string(),\n  new_source: z.string(),\n});\n\n/**\n * Input for Tier 4 verification.\n */\nexport interface Tier4Input {\n  old_value: string;\n  entity: string;\n  old_date: string;\n  new_statement: string;\n  new_date: string;\n  tier3_result: LLMDetectionOutput;\n}\n\nexport const Tier4InputSchema = z.object({\n  old_value: z.string(),\n  entity: z.string(),\n  old_date: z.string(),\n  new_statement: z.string(),\n  new_date: z.string(),\n  tier3_result: LLMDetectionOutputSchema,\n});\n","/**\n * @module @nous/core/contradiction\n * @description Contradiction Resolution System (CRS) for storm-009\n * @version 1.0.0\n * @spec Specs/Phase-5-Quality-Control/storm-009\n * @storm Brainstorms/Infrastructure/storm-009-contradiction-handling\n *\n * 6-tier detection pipeline, supersession lifecycle, and user conflict resolution.\n */\n\nimport type { NousNode } from '../nodes';\n\n// Re-export all constants\nexport * from './constants';\n\n// Re-export all types\nexport * from './types';\n\n// Import for internal use\nimport {\n  type DetectionTier,\n  type ConflictType,\n  type SupersededState,\n  type AccuracyMode,\n  type QueryMode,\n  type Sentiment,\n  type UserResolution,\n  CONFLICT_TYPE_RESOLUTION,\n  SUPERSEDED_DECAY_MULTIPLIERS,\n  SUPERSEDED_ACCESS_DECAY_MULTIPLIER,\n  SUPERSEDED_R_THRESHOLDS,\n  SUPERSEDED_DORMANT_DAYS,\n  DELETION_CRITERIA,\n  STORAGE_PRESSURE_THRESHOLD,\n  CONFLICT_QUEUE_CONFIG,\n  PATTERN_TRIGGERS,\n  PATTERN_DISQUALIFIERS,\n  PATTERN_CONFIDENCE_WEIGHTS,\n  ATTRIBUTE_SYNONYMS,\n  TIER_THRESHOLDS,\n  HISTORY_MODE_PATTERNS,\n  HISTORY_MODE_SUPERSEDED_PENALTY,\n  SSA_SUPERSEDED_ACTIVATION_CAP,\n  SSA_SUPERSEDED_SPREAD_DECAY,\n  CLASSIFIER_TRAINING,\n  ACCURACY_TARGETS,\n} from './constants';\n\nimport {\n  type DetectionContext,\n  type TypeClassification,\n  type TierResult,\n  type NormalizationResult,\n  type PatternDetection,\n  type LLMDetectionOutput,\n  type VerificationOutput,\n  type SupersededStateConfig,\n  type SupersessionFields,\n  type DeletionCriteriaResult,\n  type SupersededStateTransition,\n  type ConflictQueueItem,\n  type ContradictionResolution,\n  type ConflictQueueStatus,\n  type ConflictPresentation,\n  type ConflictQueueConfig,\n  type AccuracyModeConfig,\n  type DetectionEventLog,\n  type AccuracyMetrics,\n  type SelfImprovementConfig,\n  type QCSHistoryModeConfig,\n  type HistoryModeDetection,\n  type RCSSupersessionFlag,\n  type SSASupersededConfig,\n  type Phase2ContextInjection,\n  type QueryModeConfig,\n  type RetrievalIntegrationConfig,\n} from './types';\n\n// ============================================================\n// PROMPT TEMPLATES\n// ============================================================\n\n/**\n * Few-shot classification prompt for Tier 2.5.\n */\nexport const CLASSIFIER_FEW_SHOT_PROMPT = `Classify if this text is correcting previous information.\n\nExamples of CORRECTIONS:\n- \"Actually, Sarah's phone is 555-5678\" → CORRECTION\n- \"I was wrong about the meeting date, it's Thursday\" → CORRECTION\n- \"Update: The deadline moved to next week\" → CORRECTION\n\nExamples of NOT corrections:\n- \"Actually, that's a great idea\" → NOT (agreement)\n- \"I was wrong to doubt you\" → NOT (apology)\n- \"I actually enjoyed the movie\" → NOT (emphasis)\n- \"Was I wrong about this?\" → NOT (question)\n\nText to classify: \"{input_text}\"\nContext: \"{surrounding_sentences}\"\n\nIs this a CORRECTION or NOT? Answer with confidence (0-1).`;\n\n/**\n * Structured LLM detection prompt for Tier 3.\n */\nexport const LLM_DETECTION_PROMPT = `You are analyzing whether new information contradicts existing information in a personal knowledge base.\n\nEXISTING INFORMATION:\n- Entity: {entity_name}\n- Type: {entity_type}\n- Attribute: {attribute}\n- Current value: \"{old_value}\"\n- Recorded on: {old_date}\n- Source: {old_source}\n\nNEW INFORMATION:\n- Statement: \"{new_statement}\"\n- Context (surrounding text): \"{context}\"\n- Date: {new_date}\n- Source: {new_source}\n\nIMPORTANT: Consider these possibilities:\n1. TRUE CONTRADICTION: The facts cannot both be true\n2. UPDATE: The fact changed over time (both were true at time)\n3. EVOLUTION: The belief/opinion developed (not contradiction)\n4. DIFFERENT CONTEXT: Both could be true in different contexts\n5. UNRELATED: The new info is about something else entirely\n\nRespond with ONLY this JSON (no other text):\n{\n  \"relationship\": \"contradicts|updates|evolves|coexists|unrelated\",\n  \"confidence\": <0.0-1.0>,\n  \"reasoning\": \"<brief explanation in 1-2 sentences>\",\n  \"which_is_current\": \"old|new|both|unclear\",\n  \"both_could_be_true\": <true|false>,\n  \"is_time_dependent\": <true|false>,\n  \"needs_user_input\": <true|false>\n}`;\n\n/**\n * Adversarial verification prompt for Tier 4.\n */\nexport const VERIFICATION_PROMPT = `A detection system believes these two pieces of information CONTRADICT each other:\n\nEXISTING: \"{old_value}\" (about {entity}, recorded {old_date})\nNEW: \"{new_statement}\" (from {new_date})\n\nThe system wants to AUTOMATICALLY mark the old information as superseded by the new information.\n\nYOUR JOB: Find reasons this might be WRONG. Consider:\n- Could they be about different things? (different Sarah?)\n- Could both be true? (different contexts, times, aspects?)\n- Is the \"new\" information actually a correction?\n- Could this be a misunderstanding or ambiguity?\n\nRespond with ONLY this JSON:\n{\n  \"should_supersede\": <true|false>,\n  \"confidence\": <0.0-1.0>,\n  \"concerns\": [\"<concern1>\", \"<concern2>\"] or [],\n  \"recommendation\": \"auto_supersede|queue_for_user|keep_both\"\n}`;\n\n// ============================================================\n// CONFIGURATION OBJECTS\n// ============================================================\n\n/**\n * Superseded state configurations.\n */\nexport const SUPERSEDED_STATE_CONFIGS: Record<SupersededState, SupersededStateConfig> = {\n  SUPERSEDED_ACTIVE: {\n    state: 'SUPERSEDED_ACTIVE',\n    r_threshold_min: SUPERSEDED_R_THRESHOLDS.active_min,\n    r_threshold_max: 1.0,\n    decay_multiplier: SUPERSEDED_DECAY_MULTIPLIERS.SUPERSEDED_ACTIVE,\n    retrieval_mode: 'normal_excluded',\n    content_state: 'full',\n    duration_days: undefined,\n  },\n  SUPERSEDED_FADING: {\n    state: 'SUPERSEDED_FADING',\n    r_threshold_min: SUPERSEDED_R_THRESHOLDS.fading_min,\n    r_threshold_max: SUPERSEDED_R_THRESHOLDS.active_min,\n    decay_multiplier: SUPERSEDED_DECAY_MULTIPLIERS.SUPERSEDED_FADING,\n    retrieval_mode: 'history_only',\n    content_state: 'full',\n    duration_days: undefined,\n  },\n  SUPERSEDED_DORMANT: {\n    state: 'SUPERSEDED_DORMANT',\n    r_threshold_min: 0,\n    r_threshold_max: SUPERSEDED_R_THRESHOLDS.dormant_max,\n    decay_multiplier: SUPERSEDED_DECAY_MULTIPLIERS.SUPERSEDED_DORMANT,\n    retrieval_mode: 'audit_only',\n    content_state: 'summarized',\n    duration_days: SUPERSEDED_DORMANT_DAYS,\n  },\n  SUPERSEDED_ARCHIVED: {\n    state: 'SUPERSEDED_ARCHIVED',\n    r_threshold_min: undefined,\n    r_threshold_max: undefined,\n    decay_multiplier: SUPERSEDED_DECAY_MULTIPLIERS.SUPERSEDED_ARCHIVED,\n    retrieval_mode: 'audit_only',\n    content_state: 'reference_only',\n    duration_days: undefined,\n  },\n  SUPERSEDED_DELETED: {\n    state: 'SUPERSEDED_DELETED',\n    r_threshold_min: undefined,\n    r_threshold_max: undefined,\n    decay_multiplier: 0,\n    retrieval_mode: 'none',\n    content_state: 'deleted',\n    duration_days: undefined,\n  },\n};\n\n/**\n * Accuracy mode configurations.\n */\nexport const ACCURACY_MODE_CONFIGS: Record<AccuracyMode, AccuracyModeConfig> = {\n  FAST: {\n    mode: 'FAST',\n    description: \"I want quick responses, I'll fix mistakes manually\",\n    tiers_used: ['STRUCTURAL', 'NORMALIZED', 'PATTERN'],\n    auto_supersede_tiers: ['STRUCTURAL'],\n    user_involvement: 'high',\n    typical_speed_ms: 15,\n    typical_cost: 0,\n    expected_accuracy: 0.75,\n  },\n  BALANCED: {\n    mode: 'BALANCED',\n    description: 'Good accuracy without too much cost/delay',\n    tiers_used: ['STRUCTURAL', 'NORMALIZED', 'PATTERN', 'CLASSIFIER', 'LLM'],\n    auto_supersede_tiers: ['STRUCTURAL', 'NORMALIZED', 'PATTERN'],\n    user_involvement: 'medium',\n    typical_speed_ms: 50,\n    typical_cost: 0.003,\n    expected_accuracy: 0.90,\n  },\n  THOROUGH: {\n    mode: 'THOROUGH',\n    description: \"I want maximum accuracy, cost/speed doesn't matter\",\n    tiers_used: ['STRUCTURAL', 'NORMALIZED', 'PATTERN', 'CLASSIFIER', 'LLM', 'VERIFICATION'],\n    auto_supersede_tiers: ['STRUCTURAL', 'NORMALIZED', 'PATTERN', 'LLM'],\n    user_involvement: 'low',\n    typical_speed_ms: 1500,\n    typical_cost: 0.006,\n    expected_accuracy: 0.97,\n  },\n  MANUAL: {\n    mode: 'MANUAL',\n    description: 'I want to approve every change',\n    tiers_used: ['STRUCTURAL', 'NORMALIZED', 'PATTERN'],\n    auto_supersede_tiers: [],\n    user_involvement: 'very_high',\n    typical_speed_ms: 15,\n    typical_cost: 0,\n    expected_accuracy: 1.0,\n  },\n};\n\n/**\n * Query mode configurations.\n */\nexport const QUERY_MODE_CONFIGS: Record<QueryMode, QueryModeConfig> = {\n  current: {\n    mode: 'current',\n    include_superseded: false,\n    superseded_penalty: 1.0,\n    description: 'Only active nodes (default)',\n  },\n  as_of: {\n    mode: 'as_of',\n    include_superseded: true,\n    superseded_penalty: 0.0,\n    description: 'What we knew at that date',\n  },\n  history: {\n    mode: 'history',\n    include_superseded: true,\n    superseded_penalty: HISTORY_MODE_SUPERSEDED_PENALTY,\n    description: 'Include superseded nodes with penalty',\n  },\n  full_audit: {\n    mode: 'full_audit',\n    include_superseded: true,\n    superseded_penalty: 0.0,\n    description: 'Everything including archived',\n  },\n};\n\n/**\n * Default conflict queue configuration.\n */\nexport const DEFAULT_QUEUE_CONFIG: ConflictQueueConfig = {\n  max_items: CONFLICT_QUEUE_CONFIG.max_items,\n  auto_resolve_days: CONFLICT_QUEUE_CONFIG.auto_resolve_days,\n  auto_resolve_strategy: CONFLICT_QUEUE_CONFIG.auto_resolve_strategy,\n  weekly_prompt_enabled: true,\n  weekly_prompt_day: CONFLICT_QUEUE_CONFIG.weekly_prompt_day,\n};\n\n/**\n * Default self-improvement configuration.\n */\nexport const DEFAULT_SELF_IMPROVEMENT_CONFIG: SelfImprovementConfig = {\n  classifier_initial_train_examples: CLASSIFIER_TRAINING.initial_train_examples,\n  classifier_retrain_examples: CLASSIFIER_TRAINING.retrain_examples,\n  accuracy_alert_threshold: CLASSIFIER_TRAINING.accuracy_alert_threshold,\n  auto_mode_switch_threshold: CLASSIFIER_TRAINING.auto_mode_switch_threshold,\n};\n\n/**\n * QCS history mode configuration.\n */\nexport const QCS_HISTORY_MODE_CONFIG: QCSHistoryModeConfig = {\n  history_patterns: HISTORY_MODE_PATTERNS,\n  superseded_penalty: HISTORY_MODE_SUPERSEDED_PENALTY,\n};\n\n/**\n * RCS supersession flag configuration.\n */\nexport const RCS_SUPERSESSION_FLAG: RCSSupersessionFlag = {\n  flag: 'has_superseded_history',\n  trigger: 'top_result_has_superseded_by_chain',\n  explanation_text: 'Note: This topic has historical versions',\n};\n\n/**\n * SSA superseded configuration.\n */\nexport const SSA_SUPERSEDED_CONFIG: SSASupersededConfig = {\n  activation_cap: SSA_SUPERSEDED_ACTIVATION_CAP,\n  spread_decay: SSA_SUPERSEDED_SPREAD_DECAY,\n  spread_to_superseding: true,\n};\n\n/**\n * Phase 2 context injection configuration.\n */\nexport const PHASE2_CONTEXT_INJECTION: Phase2ContextInjection = {\n  superseded_context_template: 'Note: \"{old_content}\" was later updated to \"{new_content}\"',\n  follow_supersedes_for: ['change', 'evolution', 'history', 'before', 'used to'],\n};\n\n/**\n * Default retrieval integration configuration.\n */\nexport const DEFAULT_RETRIEVAL_INTEGRATION_CONFIG: RetrievalIntegrationConfig = {\n  qcs: QCS_HISTORY_MODE_CONFIG,\n  rcs: RCS_SUPERSESSION_FLAG,\n  ssa: SSA_SUPERSEDED_CONFIG,\n  phase2: PHASE2_CONTEXT_INJECTION,\n};\n\n// ============================================================\n// TYPE DETECTION CRITERIA\n// ============================================================\n\n/**\n * Detection criteria for each conflict type.\n */\nexport interface TypeDetectionCriteria {\n  type: ConflictType;\n  priority: number;\n  matches: (context: DetectionContext) => boolean;\n  confidence: number;\n  auto_supersede: boolean;\n  resolution: 'supersede_old' | 'keep_both_linked' | 'keep_both_unlinked' | 'queue_for_user' | 'source_ranking';\n}\n\nexport const TYPE_DETECTION_CRITERIA: TypeDetectionCriteria[] = [\n  {\n    type: 'FACT_UPDATE',\n    priority: 1,\n    matches: (ctx) =>\n      ctx.entity_id !== undefined &&\n      ctx.attribute_type !== undefined &&\n      ctx.old_value !== ctx.new_value &&\n      !ctx.has_correction_pattern,\n    confidence: 0.95,\n    auto_supersede: true,\n    resolution: 'supersede_old',\n  },\n  {\n    type: 'CORRECTION',\n    priority: 2,\n    matches: (ctx) => ctx.has_correction_pattern,\n    confidence: 0.90,\n    auto_supersede: true,\n    resolution: 'supersede_old',\n  },\n  {\n    type: 'BELIEF_CONTRADICTION',\n    priority: 3,\n    matches: (ctx) => ctx.has_sentiment_flip && !ctx.has_scope_expansion,\n    confidence: 0.85,\n    auto_supersede: true,\n    resolution: 'supersede_old',\n  },\n  {\n    type: 'BELIEF_EVOLUTION',\n    priority: 4,\n    matches: (ctx) => !ctx.has_sentiment_flip && ctx.has_scope_expansion,\n    confidence: 0.80,\n    auto_supersede: false,\n    resolution: 'keep_both_linked',\n  },\n  {\n    type: 'SOURCE_CONFLICT',\n    priority: 5,\n    matches: (ctx) =>\n      ctx.old_source_confidence !== ctx.new_source_confidence &&\n      Math.abs(ctx.old_source_confidence - ctx.new_source_confidence) > 0.2,\n    confidence: 0.75,\n    auto_supersede: true,\n    resolution: 'source_ranking',\n  },\n  {\n    type: 'AMBIGUOUS',\n    priority: 6,\n    matches: () => true,\n    confidence: 0.50,\n    auto_supersede: false,\n    resolution: 'queue_for_user',\n  },\n];\n\n// ============================================================\n// UTILITY FUNCTIONS\n// ============================================================\n\n/**\n * Calculates days since a given ISO timestamp.\n */\nexport function daysSince(isoTimestamp: string): number {\n  const then = new Date(isoTimestamp).getTime();\n  const now = Date.now();\n  return Math.floor((now - then) / (1000 * 60 * 60 * 24));\n}\n\n/**\n * Generates a unique conflict ID.\n */\nexport function generateConflictId(): string {\n  return `conflict_${Date.now()}_${Math.random().toString(36).substring(2, 8)}`;\n}\n\n/**\n * Generates a unique event ID.\n */\nexport function generateEventId(): string {\n  return `event_${Date.now()}_${Math.random().toString(36).substring(2, 8)}`;\n}\n\n/**\n * Formats a date for timeline display.\n */\nexport function formatDate(isoTimestamp: string): string {\n  const date = new Date(isoTimestamp);\n  return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n}\n\n// ============================================================\n// CONTRADICTION TYPE FUNCTIONS\n// ============================================================\n\n/**\n * Classifies a potential contradiction into one of 6 types.\n */\nexport function classifyConflictType(\n  _old_node: NousNode,\n  _new_content: string,\n  context: DetectionContext\n): TypeClassification {\n  for (const criteria of TYPE_DETECTION_CRITERIA) {\n    if (criteria.matches(context)) {\n      return {\n        type: criteria.type,\n        confidence: criteria.confidence,\n        auto_supersede: criteria.auto_supersede,\n        resolution: criteria.resolution,\n        reasoning: CONFLICT_TYPE_RESOLUTION[criteria.type].description,\n      };\n    }\n  }\n\n  return {\n    type: 'AMBIGUOUS',\n    confidence: 0.50,\n    auto_supersede: false,\n    resolution: 'queue_for_user',\n    reasoning: 'Could not determine conflict type.',\n  };\n}\n\n/**\n * Checks if a conflict type auto-supersedes.\n */\nexport function isAutoSupersede(type: ConflictType): boolean {\n  return CONFLICT_TYPE_RESOLUTION[type].auto_supersede;\n}\n\n/**\n * Gets the resolution strategy for a conflict type.\n */\nexport function getResolutionStrategy(type: ConflictType): string {\n  return CONFLICT_TYPE_RESOLUTION[type].resolution;\n}\n\n/**\n * Determines the winning node in a source conflict.\n */\nexport function resolveSourceConflict(old_confidence: number, new_confidence: number): 'old' | 'new' {\n  return new_confidence >= old_confidence ? 'new' : 'old';\n}\n\n/**\n * Detects if two statements have opposite sentiments.\n */\nexport function hasSentimentFlip(old_sentiment: Sentiment, new_sentiment: Sentiment): boolean {\n  if (old_sentiment === 'neutral' || new_sentiment === 'neutral') {\n    return false;\n  }\n  return old_sentiment !== new_sentiment;\n}\n\n// ============================================================\n// DETECTION PIPELINE FUNCTIONS\n// ============================================================\n\n/**\n * Runs Tier 2: Contextual pattern detection.\n */\nexport function runTier2Pattern(content: string): PatternDetection {\n  const lowerContent = content.toLowerCase();\n  const triggers_found: string[] = [];\n  const disqualifiers_found: string[] = [];\n\n  for (const trigger of PATTERN_TRIGGERS) {\n    if (lowerContent.includes(trigger.toLowerCase())) {\n      triggers_found.push(trigger);\n    }\n  }\n\n  for (const disqualifier of PATTERN_DISQUALIFIERS) {\n    if (lowerContent.includes(disqualifier.toLowerCase())) {\n      disqualifiers_found.push(disqualifier);\n    }\n  }\n\n  const confidence_score = calculatePatternConfidence({\n    triggers_found,\n    entity_nearby: false, // Would need entity detection\n    has_value: triggers_found.length > 0,\n    temporal_signal: lowerContent.includes('now') || lowerContent.includes('used to'),\n    disqualifiers_found,\n    confidence_score: 0,\n  });\n\n  return {\n    triggers_found,\n    entity_nearby: false,\n    has_value: triggers_found.length > 0,\n    temporal_signal: lowerContent.includes('now') || lowerContent.includes('used to'),\n    disqualifiers_found,\n    confidence_score,\n  };\n}\n\n/**\n * Calculates pattern confidence score.\n */\nexport function calculatePatternConfidence(detection: PatternDetection): number {\n  let confidence = PATTERN_CONFIDENCE_WEIGHTS.base;\n\n  if (detection.entity_nearby) {\n    confidence += PATTERN_CONFIDENCE_WEIGHTS.entity_nearby;\n  }\n  if (detection.has_value) {\n    confidence += PATTERN_CONFIDENCE_WEIGHTS.has_value;\n  }\n  if (detection.temporal_signal) {\n    confidence += PATTERN_CONFIDENCE_WEIGHTS.temporal_signal;\n  }\n  if (detection.disqualifiers_found.length > 0) {\n    confidence += PATTERN_CONFIDENCE_WEIGHTS.disqualifier_penalty;\n  }\n\n  return Math.max(0, Math.min(1, confidence));\n}\n\n/**\n * Runs Tier 1.5: Attribute normalization.\n */\nexport function runTier1_5Normalization(attribute: string, _content: string): NormalizationResult {\n  const lowerAttribute = attribute.toLowerCase();\n  let normalized_attribute = attribute;\n  const synonyms_matched: string[] = [];\n\n  for (const [normalized, synonyms] of Object.entries(ATTRIBUTE_SYNONYMS)) {\n    for (const synonym of synonyms) {\n      if (lowerAttribute.includes(synonym.toLowerCase())) {\n        normalized_attribute = normalized;\n        synonyms_matched.push(synonym);\n        break;\n      }\n    }\n    if (synonyms_matched.length > 0) break;\n  }\n\n  return {\n    original_attribute: attribute,\n    normalized_attribute,\n    synonyms_matched,\n  };\n}\n\n/**\n * Determines if pipeline should continue to next tier.\n */\nexport function shouldContinueToNextTier(result: TierResult, mode: AccuracyMode): boolean {\n  if (mode === 'FAST' && result.tier === 'PATTERN') {\n    return false;\n  }\n  if (mode === 'MANUAL' && result.tier === 'PATTERN') {\n    return false;\n  }\n  if (result.detected && result.confidence >= TIER_THRESHOLDS.structural_confidence) {\n    return false;\n  }\n  return result.should_continue;\n}\n\n/**\n * Determines if auto-supersession is allowed.\n */\nexport function canAutoSupersede(\n  tier3_result: LLMDetectionOutput | undefined,\n  tier4_result: VerificationOutput | undefined,\n  mode: AccuracyMode\n): boolean {\n  if (mode === 'MANUAL') {\n    return false;\n  }\n  if (mode === 'FAST') {\n    return false;\n  }\n  if (!tier3_result || !tier4_result) {\n    return false;\n  }\n\n  const pass1_ok = tier3_result.confidence >= TIER_THRESHOLDS.llm_auto_threshold;\n  const pass2_ok =\n    tier4_result.should_supersede &&\n    tier4_result.confidence >= TIER_THRESHOLDS.verification_threshold &&\n    tier4_result.concerns.length === 0;\n\n  return pass1_ok && pass2_ok;\n}\n\n// ============================================================\n// SUPERSEDED LIFECYCLE FUNCTIONS\n// ============================================================\n\n/**\n * Determines the current superseded state based on node properties.\n */\nexport function determineSupersededState(node: NousNode & Partial<SupersessionFields>): SupersededState {\n  if (node.superseded_state === 'SUPERSEDED_DELETED') {\n    return 'SUPERSEDED_DELETED';\n  }\n  if (node.superseded_state === 'SUPERSEDED_ARCHIVED') {\n    return 'SUPERSEDED_ARCHIVED';\n  }\n\n  const R = node.neural.retrievability;\n\n  if (R > SUPERSEDED_R_THRESHOLDS.active_min) {\n    return 'SUPERSEDED_ACTIVE';\n  } else if (R > SUPERSEDED_R_THRESHOLDS.fading_min) {\n    return 'SUPERSEDED_FADING';\n  } else {\n    if (node.dormant_since) {\n      const dormantDays = daysSince(node.dormant_since);\n      if (dormantDays >= SUPERSEDED_DORMANT_DAYS) {\n        return 'SUPERSEDED_ARCHIVED';\n      }\n    }\n    return 'SUPERSEDED_DORMANT';\n  }\n}\n\n/**\n * Gets the decay multiplier for a superseded state.\n */\nexport function getDecayMultiplier(state: SupersededState): number {\n  return SUPERSEDED_DECAY_MULTIPLIERS[state];\n}\n\n/**\n * Gets the decay multiplier accounting for user access.\n */\nexport function getEffectiveDecayMultiplier(state: SupersededState, userAccessed: boolean): number {\n  if (userAccessed) {\n    return SUPERSEDED_ACCESS_DECAY_MULTIPLIER;\n  }\n  return SUPERSEDED_DECAY_MULTIPLIERS[state];\n}\n\n/**\n * Checks if a node should transition to a new superseded state.\n */\nexport function checkStateTransition(node: NousNode & Partial<SupersessionFields>): SupersededStateTransition | null {\n  const currentState = node.superseded_state;\n  if (!currentState || currentState === 'SUPERSEDED_DELETED') {\n    return null;\n  }\n\n  const newState = determineSupersededState(node);\n\n  if (newState !== currentState) {\n    let trigger: SupersededStateTransition['triggered_by'] = 'decay';\n    if (newState === 'SUPERSEDED_ARCHIVED' && currentState === 'SUPERSEDED_DORMANT') {\n      trigger = 'time';\n    }\n\n    return {\n      node_id: node.id,\n      from_state: currentState,\n      to_state: newState,\n      triggered_by: trigger,\n      timestamp: new Date().toISOString(),\n      context: { retrievability: node.neural.retrievability },\n    };\n  }\n\n  return null;\n}\n\n/**\n * Checks if a superseded node meets all 5 deletion criteria.\n */\nexport function checkDeletionCriteria(\n  node: NousNode & Partial<SupersessionFields>,\n  supersedingNode: NousNode | null,\n  maxIncomingEdgeStrength: number,\n  rawInArchive: boolean\n): DeletionCriteriaResult {\n  const daysArchived = node.archived_at ? daysSince(node.archived_at) : 0;\n  const accessCount = node.access_count_since_superseded ?? 0;\n  const supersedingActive = supersedingNode !== null && supersedingNode.state.lifecycle === 'active';\n\n  const criteria = {\n    archived_long_enough: daysArchived >= DELETION_CRITERIA.min_archived_days,\n    days_archived: daysArchived,\n    no_accesses: accessCount === DELETION_CRITERIA.required_access_count,\n    access_count: accessCount,\n    no_important_edges: maxIncomingEdgeStrength <= DELETION_CRITERIA.max_edge_strength,\n    max_edge_strength: maxIncomingEdgeStrength,\n    superseding_active: supersedingActive,\n    superseding_node_state: supersedingNode?.state.lifecycle,\n    raw_in_archive: rawInArchive,\n  };\n\n  const eligible =\n    criteria.archived_long_enough &&\n    criteria.no_accesses &&\n    criteria.no_important_edges &&\n    criteria.superseding_active &&\n    criteria.raw_in_archive;\n\n  return { eligible, criteria };\n}\n\n/**\n * Checks if system is under storage pressure.\n */\nexport function isStoragePressure(currentCapacity: number): boolean {\n  return currentCapacity >= STORAGE_PRESSURE_THRESHOLD;\n}\n\n/**\n * Gets the retrieval mode for a superseded state.\n */\nexport function getRetrievalMode(state: SupersededState): SupersededStateConfig['retrieval_mode'] {\n  return SUPERSEDED_STATE_CONFIGS[state].retrieval_mode;\n}\n\n/**\n * Gets the content state for a superseded state.\n */\nexport function getContentState(state: SupersededState): SupersededStateConfig['content_state'] {\n  return SUPERSEDED_STATE_CONFIGS[state].content_state;\n}\n\n// ============================================================\n// CONFLICT QUEUE FUNCTIONS\n// ============================================================\n\n/**\n * Creates a new conflict queue item.\n */\nexport function createConflictQueueItem(\n  data: Omit<ConflictQueueItem, 'id' | 'created_at' | 'expires_at' | 'status'>\n): ConflictQueueItem {\n  const now = new Date();\n  const expiresAt = new Date(now);\n  expiresAt.setDate(expiresAt.getDate() + CONFLICT_QUEUE_CONFIG.auto_resolve_days);\n\n  return {\n    ...data,\n    id: generateConflictId(),\n    created_at: now.toISOString(),\n    expires_at: expiresAt.toISOString(),\n    status: 'pending',\n  };\n}\n\n/**\n * Adds an item to the conflict queue.\n */\nexport function addToConflictQueue(\n  queue: ConflictQueueItem[],\n  item: ConflictQueueItem\n): { queue: ConflictQueueItem[]; auto_resolved: ContradictionResolution[] } {\n  const auto_resolved: ContradictionResolution[] = [];\n  let pendingItems = queue.filter((q) => q.status === 'pending');\n\n  while (pendingItems.length >= CONFLICT_QUEUE_CONFIG.max_items) {\n    const oldest = pendingItems.reduce((a, b) =>\n      new Date(a.created_at) < new Date(b.created_at) ? a : b\n    );\n    oldest.status = 'auto_resolved';\n    auto_resolved.push({\n      conflict_id: oldest.id,\n      resolved_by: 'auto',\n      resolution: CONFLICT_QUEUE_CONFIG.auto_resolve_strategy,\n      resolved_at: new Date().toISOString(),\n    });\n    pendingItems = queue.filter((q) => q.status === 'pending');\n  }\n\n  queue.push(item);\n  return { queue, auto_resolved };\n}\n\n/**\n * Gets all pending conflicts from the queue.\n */\nexport function getPendingConflicts(queue: ConflictQueueItem[]): ConflictQueueItem[] {\n  return queue\n    .filter((item) => item.status === 'pending')\n    .sort((a, b) => new Date(a.created_at).getTime() - new Date(b.created_at).getTime());\n}\n\n/**\n * Resolves a conflict with user's choice.\n */\nexport function resolveConflict(\n  queue: ConflictQueueItem[],\n  conflict_id: string,\n  resolution: UserResolution,\n  merged_content?: string\n): ContradictionResolution {\n  const item = queue.find((q) => q.id === conflict_id);\n  if (!item) {\n    throw new Error(`Conflict not found: ${conflict_id}`);\n  }\n  if (item.status !== 'pending') {\n    throw new Error(`Conflict already resolved: ${conflict_id}`);\n  }\n\n  item.status = 'resolved';\n  return {\n    conflict_id,\n    resolved_by: 'user',\n    resolution,\n    resolved_at: new Date().toISOString(),\n    user_merged_content: merged_content,\n  };\n}\n\n/**\n * Processes all expired conflicts.\n */\nexport function processExpiredConflicts(queue: ConflictQueueItem[]): ContradictionResolution[] {\n  const now = new Date();\n  const resolutions: ContradictionResolution[] = [];\n\n  for (const item of queue) {\n    if (item.status === 'pending' && new Date(item.expires_at) <= now) {\n      item.status = 'auto_resolved';\n      resolutions.push({\n        conflict_id: item.id,\n        resolved_by: 'timeout',\n        resolution: CONFLICT_QUEUE_CONFIG.auto_resolve_strategy,\n        resolved_at: now.toISOString(),\n      });\n    }\n  }\n\n  return resolutions;\n}\n\n/**\n * Gets current queue status.\n */\nexport function getQueueStatus(queue: ConflictQueueItem[]): ConflictQueueStatus {\n  const pending = getPendingConflicts(queue);\n  const now = new Date();\n  const weekStart = new Date(now);\n  weekStart.setDate(weekStart.getDate() - weekStart.getDay());\n  weekStart.setHours(0, 0, 0, 0);\n\n  const resolvedThisWeek = queue.filter(\n    (item) => item.status !== 'pending' && new Date(item.created_at) >= weekStart\n  ).length;\n\n  return {\n    pending_count: pending.length,\n    oldest_pending_date: pending[0]?.created_at,\n    next_auto_resolve_date: pending[0]?.expires_at,\n    items_resolved_this_week: resolvedThisWeek,\n    at_capacity: pending.length >= CONFLICT_QUEUE_CONFIG.max_items,\n  };\n}\n\n/**\n * Formats a conflict for presentation to user.\n */\nexport function formatForPresentation(\n  item: ConflictQueueItem,\n  old_node_content: string,\n  old_node_date: string\n): ConflictPresentation {\n  const now = new Date();\n  const expires = new Date(item.expires_at);\n  const daysRemaining = Math.max(\n    0,\n    Math.ceil((expires.getTime() - now.getTime()) / (1000 * 60 * 60 * 24))\n  );\n\n  let suggested_action: UserResolution | undefined;\n  if (item.detection_confidence >= 0.7) {\n    suggested_action = 'new_is_current';\n  } else if (item.detection_confidence < 0.4) {\n    suggested_action = 'keep_both';\n  }\n\n  return {\n    conflict_id: item.id,\n    entity_name: item.entity_name,\n    topic: item.topic ?? 'Unknown topic',\n    version_a: { content: old_node_content, date: old_node_date },\n    version_b: { content: item.new_content, date: item.created_at },\n    suggested_action,\n    confidence_in_suggestion: item.detection_confidence,\n    days_until_auto_resolve: daysRemaining,\n  };\n}\n\n/**\n * Checks if weekly prompt should be shown.\n */\nexport function shouldShowWeeklyPrompt(\n  queue: ConflictQueueItem[],\n  config: ConflictQueueConfig = DEFAULT_QUEUE_CONFIG\n): boolean {\n  if (!config.weekly_prompt_enabled) {\n    return false;\n  }\n  const pending = getPendingConflicts(queue);\n  if (pending.length === 0) {\n    return false;\n  }\n  const today = new Date().getDay();\n  return today === config.weekly_prompt_day;\n}\n\n// ============================================================\n// ACCURACY MODE FUNCTIONS\n// ============================================================\n\n/**\n * Gets the configuration for an accuracy mode.\n */\nexport function getAccuracyModeConfig(mode: AccuracyMode): AccuracyModeConfig {\n  return ACCURACY_MODE_CONFIGS[mode];\n}\n\n/**\n * Checks if a tier should be used in a given mode.\n */\nexport function shouldUseTier(tier: DetectionTier, mode: AccuracyMode): boolean {\n  return ACCURACY_MODE_CONFIGS[mode].tiers_used.includes(tier);\n}\n\n/**\n * Checks if a tier can trigger auto-supersession in a given mode.\n */\nexport function canAutoSupersedeTier(tier: DetectionTier, mode: AccuracyMode): boolean {\n  return ACCURACY_MODE_CONFIGS[mode].auto_supersede_tiers.includes(tier);\n}\n\n/**\n * Logs a detection event.\n */\nexport function logDetectionEvent(\n  event: Omit<DetectionEventLog, 'id' | 'timestamp'>\n): DetectionEventLog {\n  return {\n    ...event,\n    id: generateEventId(),\n    timestamp: new Date().toISOString(),\n  };\n}\n\n/**\n * Computes weekly accuracy metrics.\n */\nexport function computeWeeklyMetrics(\n  events: DetectionEventLog[],\n  periodStart: string,\n  periodEnd: string\n): AccuracyMetrics {\n  const periodEvents = events.filter(\n    (e) => e.timestamp >= periodStart && e.timestamp <= periodEnd\n  );\n\n  const perTierAccuracy: Record<DetectionTier, number | null> = {\n    STRUCTURAL: null,\n    NORMALIZED: null,\n    PATTERN: null,\n    CLASSIFIER: null,\n    LLM: null,\n    VERIFICATION: null,\n  };\n\n  for (const tier of Object.keys(perTierAccuracy) as DetectionTier[]) {\n    const tierEvents = periodEvents.filter(\n      (e) => e.tier_reached === tier && e.user_override !== undefined\n    );\n    if (tierEvents.length > 0) {\n      const agreed = tierEvents.filter((e) => e.user_override === 'agreed').length;\n      perTierAccuracy[tier] = agreed / tierEvents.length;\n    }\n  }\n\n  const detectedConflicts = periodEvents.filter((e) => e.resolution !== 'unrelated');\n  const falsePositives = detectedConflicts.filter(\n    (e) =>\n      e.user_override === 'disagreed' &&\n      (e.user_resolution === 'keep_both' || e.resolution === 'unrelated')\n  ).length;\n  const fpRate = detectedConflicts.length > 0 ? falsePositives / detectedConflicts.length : 0;\n\n  const autoSuperseded = periodEvents.filter((e) => e.auto_resolved);\n  const autoAgreed = autoSuperseded.filter(\n    (e) => e.user_override === undefined || e.user_override === 'agreed'\n  ).length;\n  const autoAccuracy = autoSuperseded.length > 0 ? autoAgreed / autoSuperseded.length : 1;\n\n  const byMode: AccuracyMetrics['by_mode'] = {\n    FAST: { detections: 0, accuracy: null },\n    BALANCED: { detections: 0, accuracy: null },\n    THOROUGH: { detections: 0, accuracy: null },\n    MANUAL: { detections: 0, accuracy: null },\n  };\n\n  for (const mode of Object.keys(byMode) as AccuracyMode[]) {\n    const modeEvents = periodEvents.filter((e) => e.accuracy_mode === mode);\n    byMode[mode].detections = modeEvents.length;\n    const withFeedback = modeEvents.filter((e) => e.user_override !== undefined);\n    if (withFeedback.length > 0) {\n      const agreed = withFeedback.filter((e) => e.user_override === 'agreed').length;\n      byMode[mode].accuracy = agreed / withFeedback.length;\n    }\n  }\n\n  return {\n    period_start: periodStart,\n    period_end: periodEnd,\n    per_tier_accuracy: perTierAccuracy,\n    false_positive_rate: fpRate,\n    false_negative_rate: 0,\n    auto_supersede_accuracy: autoAccuracy,\n    total_detections: periodEvents.length,\n    user_resolutions: periodEvents.filter((e) => e.user_override !== undefined).length,\n    by_mode: byMode,\n  };\n}\n\n/**\n * Checks for accuracy alerts.\n */\nexport function checkAccuracyAlerts(\n  metrics: AccuracyMetrics,\n  config: SelfImprovementConfig = DEFAULT_SELF_IMPROVEMENT_CONFIG\n): string[] {\n  const alerts: string[] = [];\n\n  for (const [tier, accuracy] of Object.entries(metrics.per_tier_accuracy)) {\n    if (accuracy !== null && accuracy < config.accuracy_alert_threshold) {\n      alerts.push(\n        `Tier ${tier} accuracy (${(accuracy * 100).toFixed(1)}%) below threshold (${config.accuracy_alert_threshold * 100}%)`\n      );\n    }\n  }\n\n  if (metrics.auto_supersede_accuracy < config.auto_mode_switch_threshold) {\n    alerts.push(\n      `Auto-supersede accuracy (${(metrics.auto_supersede_accuracy * 100).toFixed(1)}%) below threshold - consider more conservative mode`\n    );\n  }\n\n  if (metrics.false_positive_rate > 0.15) {\n    alerts.push(`High false positive rate (${(metrics.false_positive_rate * 100).toFixed(1)}%)`);\n  }\n\n  return alerts;\n}\n\n/**\n * Checks if classifier should be trained/retrained.\n */\nexport function shouldTrainClassifier(\n  trainingExamples: number,\n  hasExistingModel: boolean,\n  config: SelfImprovementConfig = DEFAULT_SELF_IMPROVEMENT_CONFIG\n): { train: boolean; retrain: boolean } {\n  const train = !hasExistingModel && trainingExamples >= config.classifier_initial_train_examples;\n  const retrain = hasExistingModel && trainingExamples >= config.classifier_retrain_examples;\n  return { train, retrain };\n}\n\n/**\n * Gets training data from detection events.\n */\nexport function getTrainingData(events: DetectionEventLog[]): DetectionEventLog[] {\n  return events.filter(\n    (e) => e.user_override !== undefined && e.old_content !== undefined && e.new_content !== undefined\n  );\n}\n\n/**\n * Gets the accuracy target for a tier.\n */\nexport function getAccuracyTarget(tier: DetectionTier): number {\n  return ACCURACY_TARGETS[tier];\n}\n\n// ============================================================\n// RETRIEVAL INTEGRATION FUNCTIONS\n// ============================================================\n\n/**\n * Checks if a query should enable history mode.\n */\nexport function detectHistoryMode(query: string): HistoryModeDetection {\n  const lowerQuery = query.toLowerCase();\n  const matched: string[] = [];\n\n  for (const pattern of HISTORY_MODE_PATTERNS) {\n    if (pattern.includes('.*')) {\n      const regex = new RegExp(pattern.replace('.*', '.*'), 'i');\n      if (regex.test(lowerQuery)) {\n        matched.push(pattern);\n      }\n    } else if (lowerQuery.includes(pattern.toLowerCase())) {\n      matched.push(pattern);\n    }\n  }\n\n  const isHistoryMode = matched.length > 0;\n  return {\n    is_history_mode: isHistoryMode,\n    matched_patterns: matched,\n    suggested_mode: isHistoryMode ? 'history' : 'current',\n  };\n}\n\n/**\n * Applies activation cap to a superseded node.\n */\nexport function applySupersededCap(activation: number, node: NousNode & Partial<SupersessionFields>): number {\n  const isSuperseded = node.state.lifecycle === 'superseded' || node.superseded_by !== undefined;\n  if (!isSuperseded) {\n    return activation;\n  }\n  return Math.min(activation, SSA_SUPERSEDED_ACTIVATION_CAP);\n}\n\n/**\n * Calculates spread activation from a superseded node.\n */\nexport function calculateSupersededSpread(activation: number, isSuperseded: boolean): number {\n  if (!isSuperseded) {\n    return activation;\n  }\n  return activation * SSA_SUPERSEDED_SPREAD_DECAY;\n}\n\n/**\n * Injects supersession context for Phase 2 LLM traversal.\n */\nexport function injectSupersessionContext(node: NousNode, supersedingContent: string): string {\n  const oldContent = node.content.body ?? node.content.title;\n  return PHASE2_CONTEXT_INJECTION.superseded_context_template\n    .replace('{old_content}', oldContent)\n    .replace('{new_content}', supersedingContent);\n}\n\n/**\n * Checks if supersedes edges should be followed for a query.\n */\nexport function shouldFollowSupersedesEdges(query: string): boolean {\n  const lowerQuery = query.toLowerCase();\n  for (const pattern of PHASE2_CONTEXT_INJECTION.follow_supersedes_for) {\n    if (lowerQuery.includes(pattern.toLowerCase())) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Builds a history timeline from a supersession chain.\n */\nexport function buildHistoryTimeline(chain: NousNode[]): string {\n  if (chain.length === 0) {\n    return 'No history available.';\n  }\n\n  const lines = ['Timeline:'];\n  for (let i = 0; i < chain.length; i++) {\n    const node = chain[i];\n    if (!node) continue;\n    const date = formatDate(node.temporal.ingestion.timestamp);\n    const content = node.content.body ?? node.content.title;\n    const isCurrent = i === chain.length - 1;\n    lines.push(`- ${date}: ${content}${isCurrent ? ' (current)' : ''}`);\n  }\n\n  return lines.join('\\n');\n}\n\n/**\n * Gets the query mode configuration.\n */\nexport function getQueryModeConfig(mode: QueryMode): QueryModeConfig {\n  return QUERY_MODE_CONFIGS[mode];\n}\n\n/**\n * Checks if superseded nodes should be included for a query mode.\n */\nexport function shouldIncludeSuperseded(mode: QueryMode): boolean {\n  return QUERY_MODE_CONFIGS[mode].include_superseded;\n}\n\n/**\n * Gets the superseded penalty for a query mode.\n */\nexport function getSupersededPenalty(mode: QueryMode): number {\n  return QUERY_MODE_CONFIGS[mode].superseded_penalty;\n}\n\n/**\n * Checks if RCS should flag supersession history.\n */\nexport function shouldFlagSupersessionHistory(topResults: (NousNode & Partial<SupersessionFields>)[]): boolean {\n  for (const node of topResults) {\n    if (node.superseded_by !== undefined) {\n      return true;\n    }\n  }\n  return false;\n}\n"]}