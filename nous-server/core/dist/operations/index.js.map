{"version":3,"sources":["../../src/operations/constants.ts","../../src/operations/types.ts","../../src/operations/jobs.ts","../../src/operations/errors.ts","../../src/operations/cache.ts","../../src/operations/network.ts","../../src/operations/degradation.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["/**\n * @module @nous/core/operations\n * @description Constants for Nous Backend Operations System (NBOS) - storm-034\n * @version 1.0.0\n *\n * Three integrated subsystems:\n * 1. Job Scheduling (14 jobs: J-001 to J-014)\n * 2. Error Handling (30 codes: E1xx-E6xx)\n * 3. Caching Architecture (6 types, multi-tier L1/L2/L3)\n *\n * IMPORTANT: OPS_ERROR_CODES are OPERATIONAL codes (E1xx-E6xx).\n * API error codes live in storm-026 (ERROR_CODES) and storm-023 (API_ERROR_CODES).\n */\n\n// ============================================================\n// JOB SYSTEM CONSTANTS\n// ============================================================\n\nexport const NBOS_JOB_IDS = [\n  'J-001', 'J-002', 'J-003', 'J-004', 'J-005',\n  'J-006', 'J-007', 'J-008', 'J-009', 'J-010',\n  'J-011', 'J-012', 'J-013', 'J-014',\n] as const;\n\nexport type NBOSJobId = typeof NBOS_JOB_IDS[number];\n\nexport const NBOS_JOB_NAMES: Record<NBOSJobId, string> = {\n  'J-001': 'decay-cycle',\n  'J-002': 'compression-run',\n  'J-003': 'cleanup-dormant',\n  'J-004': 'similarity-batch',\n  'J-005': 'accessibility-audit',\n  'J-006': 'embed-single',\n  'J-007': 'embed-batch',\n  'J-008': 'infer-edges',\n  'J-009': 'deduplicate',\n  'J-010': 'sync-retry',\n  'J-011': 'cache-warm',\n  'J-012': 'metrics-collect',\n  'J-013': 'embedding-backfill',\n  'J-014': 'dlq-process',\n};\n\nexport const NBOS_JOB_NAME_VALUES = [\n  'decay-cycle', 'compression-run', 'cleanup-dormant', 'similarity-batch',\n  'accessibility-audit', 'embed-single', 'embed-batch', 'infer-edges',\n  'deduplicate', 'sync-retry', 'cache-warm', 'metrics-collect',\n  'embedding-backfill', 'dlq-process',\n] as const;\n\nexport type NBOSJobName = typeof NBOS_JOB_NAME_VALUES[number];\n\nexport const NBOS_CRON_SCHEDULES: Partial<Record<NBOSJobId, string>> = {\n  'J-001': '0 3 * * *',\n  'J-002': '0 5 * * 0',\n  'J-003': '0 6 1 * *',\n  'J-004': '0 1 * * *',\n  'J-005': '0 7 1 * *',\n  'J-011': '*/30 * * * *',\n  'J-012': '*/5 * * * *',\n  'J-013': '0 0 * * *',\n  'J-014': '0 * * * *',\n};\n\nexport const JOB_TRIGGER_TYPES = ['cron', 'event', 'manual', 'retry'] as const;\nexport type JobTriggerType = typeof JOB_TRIGGER_TYPES[number];\n\nexport const NBOS_CRON_JOBS: readonly NBOSJobId[] = [\n  'J-001', 'J-002', 'J-003', 'J-004', 'J-005',\n  'J-011', 'J-012', 'J-013', 'J-014',\n] as const;\n\nexport const NBOS_EVENT_JOBS: readonly NBOSJobId[] = [\n  'J-006', 'J-007', 'J-008', 'J-009', 'J-010',\n] as const;\n\nexport const NBOS_BATCH_SIZES: Record<NBOSJobId, number | null> = {\n  'J-001': 1000,\n  'J-002': 500,\n  'J-003': 100,\n  'J-004': 500,\n  'J-005': null,\n  'J-006': 1,\n  'J-007': 50,\n  'J-008': 10,\n  'J-009': 1,\n  'J-010': 1,\n  'J-011': 100,\n  'J-012': null,\n  'J-013': 100,\n  'J-014': 50,\n};\n\nexport const NBOS_TIMEOUTS: Record<NBOSJobId, number> = {\n  'J-001': 10 * 60 * 1000,\n  'J-002': 30 * 60 * 1000,\n  'J-003': 15 * 60 * 1000,\n  'J-004': 20 * 60 * 1000,\n  'J-005': 30 * 60 * 1000,\n  'J-006': 30 * 1000,\n  'J-007': 2 * 60 * 1000,\n  'J-008': 60 * 1000,\n  'J-009': 30 * 1000,\n  'J-010': 60 * 1000,\n  'J-011': 5 * 60 * 1000,\n  'J-012': 60 * 1000,\n  'J-013': 15 * 60 * 1000,\n  'J-014': 5 * 60 * 1000,\n};\n\nexport const NBOS_CONCURRENCY: Record<NBOSJobId, number> = {\n  'J-001': 1, 'J-002': 1, 'J-003': 1, 'J-004': 1, 'J-005': 1,\n  'J-006': 10, 'J-007': 3, 'J-008': 5, 'J-009': 5, 'J-010': 5,\n  'J-011': 1, 'J-012': 1, 'J-013': 1, 'J-014': 1,\n};\n\nexport const NBOS_JOB_PRIORITIES: Record<NBOSJobId, 'high' | 'normal' | 'low'> = {\n  'J-001': 'low', 'J-002': 'low', 'J-003': 'low', 'J-004': 'low', 'J-005': 'low',\n  'J-006': 'high', 'J-007': 'normal', 'J-008': 'normal', 'J-009': 'normal', 'J-010': 'high',\n  'J-011': 'low', 'J-012': 'low', 'J-013': 'low', 'J-014': 'low',\n};\n\nexport const NBOS_JOB_DEPENDENCIES: Partial<Record<NBOSJobId, readonly NBOSJobId[]>> = {\n  'J-001': ['J-004'],\n  'J-002': ['J-001'],\n  'J-004': ['J-013'],\n  'J-008': ['J-006'],\n  'J-009': ['J-006'],\n};\n\nexport const DAILY_CHAIN_ORDER: readonly NBOSJobId[] = ['J-013', 'J-004', 'J-001'] as const;\n\n// ============================================================\n// JOB FAILURE CONFIGURATION\n// ============================================================\n\nexport const BACKOFF_STRATEGIES = ['exponential', 'linear', 'fixed'] as const;\nexport type BackoffStrategy = typeof BACKOFF_STRATEGIES[number];\n\nexport const JOB_FAILURE_CONFIGS: Record<string, {\n  readonly retries: number;\n  readonly backoff: BackoffStrategy;\n  readonly baseDelayMs: number;\n  readonly maxDelayMs: number;\n  readonly deadLetterAfter: number;\n  readonly alertAfter: number;\n  readonly userNotify: boolean;\n  readonly notifyChannel: 'toast' | 'banner' | 'push' | 'none';\n}> = {\n  'decay-cycle': { retries: 3, backoff: 'fixed', baseDelayMs: 60_000, maxDelayMs: 300_000, deadLetterAfter: 3, alertAfter: 2, userNotify: false, notifyChannel: 'none' },\n  'compression-run': { retries: 2, backoff: 'fixed', baseDelayMs: 300_000, maxDelayMs: 600_000, deadLetterAfter: 2, alertAfter: 1, userNotify: false, notifyChannel: 'none' },\n  'cleanup-dormant': { retries: 2, backoff: 'fixed', baseDelayMs: 300_000, maxDelayMs: 600_000, deadLetterAfter: 2, alertAfter: 1, userNotify: false, notifyChannel: 'none' },\n  'similarity-batch': { retries: 2, backoff: 'fixed', baseDelayMs: 300_000, maxDelayMs: 600_000, deadLetterAfter: 2, alertAfter: 1, userNotify: false, notifyChannel: 'none' },\n  'accessibility-audit': { retries: 2, backoff: 'fixed', baseDelayMs: 300_000, maxDelayMs: 600_000, deadLetterAfter: 2, alertAfter: 1, userNotify: false, notifyChannel: 'none' },\n  'embedding-backfill': { retries: 2, backoff: 'fixed', baseDelayMs: 300_000, maxDelayMs: 600_000, deadLetterAfter: 2, alertAfter: 1, userNotify: false, notifyChannel: 'none' },\n  'cache-warm': { retries: 1, backoff: 'fixed', baseDelayMs: 60_000, maxDelayMs: 60_000, deadLetterAfter: 1, alertAfter: 1, userNotify: false, notifyChannel: 'none' },\n  'metrics-collect': { retries: 1, backoff: 'fixed', baseDelayMs: 30_000, maxDelayMs: 30_000, deadLetterAfter: 1, alertAfter: 3, userNotify: false, notifyChannel: 'none' },\n  'dlq-process': { retries: 1, backoff: 'fixed', baseDelayMs: 60_000, maxDelayMs: 60_000, deadLetterAfter: 1, alertAfter: 1, userNotify: false, notifyChannel: 'none' },\n  'embed-single': { retries: 4, backoff: 'exponential', baseDelayMs: 1_000, maxDelayMs: 60_000, deadLetterAfter: 4, alertAfter: 3, userNotify: true, notifyChannel: 'toast' },\n  'embed-batch': { retries: 3, backoff: 'exponential', baseDelayMs: 2_000, maxDelayMs: 60_000, deadLetterAfter: 3, alertAfter: 2, userNotify: false, notifyChannel: 'none' },\n  'infer-edges': { retries: 3, backoff: 'exponential', baseDelayMs: 2_000, maxDelayMs: 30_000, deadLetterAfter: 3, alertAfter: 2, userNotify: false, notifyChannel: 'none' },\n  'deduplicate': { retries: 3, backoff: 'exponential', baseDelayMs: 2_000, maxDelayMs: 30_000, deadLetterAfter: 3, alertAfter: 2, userNotify: false, notifyChannel: 'none' },\n  'sync-retry': { retries: 5, backoff: 'exponential', baseDelayMs: 1_000, maxDelayMs: 30_000, deadLetterAfter: 5, alertAfter: 3, userNotify: true, notifyChannel: 'banner' },\n};\n\n// ============================================================\n// OPERATIONAL ERROR CODES (E1xx - E6xx)\n// ============================================================\n\nexport const OPS_ERROR_CATEGORIES = ['transient', 'rate_limited', 'permanent', 'user_error', 'system_error'] as const;\nexport type OpsErrorCategory = typeof OPS_ERROR_CATEGORIES[number];\n\nexport const NOTIFY_CHANNELS = ['toast', 'banner', 'push', 'none'] as const;\nexport type NotifyChannel = typeof NOTIFY_CHANNELS[number];\n\nexport const NOTIFY_PRIORITIES = ['immediate', 'next_session', 'digest'] as const;\nexport type NotifyPriority = typeof NOTIFY_PRIORITIES[number];\n\nexport const OPS_ERROR_CODES = {\n  E100: { code: 'E100' as const, category: 'transient' as const, message: 'LLM request timeout', userMessage: 'AI is thinking... please wait', retryable: true, notifyChannel: 'toast' as const },\n  E101: { code: 'E101' as const, category: 'rate_limited' as const, message: 'LLM rate limit exceeded', userMessage: 'High demand, retrying shortly', retryable: true, retryAfter: 60_000, notifyChannel: 'toast' as const },\n  E102: { code: 'E102' as const, category: 'permanent' as const, message: 'LLM content policy violation', userMessage: 'Content cannot be processed', retryable: false, notifyChannel: 'banner' as const },\n  E103: { code: 'E103' as const, category: 'transient' as const, message: 'LLM service unavailable', userMessage: 'AI temporarily unavailable', retryable: true, notifyChannel: 'toast' as const },\n  E104: { code: 'E104' as const, category: 'permanent' as const, message: 'LLM context too long', userMessage: 'Content too large, try splitting', retryable: false, notifyChannel: 'banner' as const },\n  E200: { code: 'E200' as const, category: 'transient' as const, message: 'Embedding request timeout', userMessage: 'Processing delayed', retryable: true, notifyChannel: 'toast' as const },\n  E201: { code: 'E201' as const, category: 'rate_limited' as const, message: 'Embedding rate limit', userMessage: 'Queued for processing', retryable: true, retryAfter: 30_000, notifyChannel: 'none' as const },\n  E202: { code: 'E202' as const, category: 'permanent' as const, message: 'Content cannot be embedded', userMessage: 'Content format not supported', retryable: false, notifyChannel: 'banner' as const },\n  E203: { code: 'E203' as const, category: 'transient' as const, message: 'Embedding service unavailable', userMessage: 'Search temporarily limited', retryable: true, notifyChannel: 'toast' as const },\n  E300: { code: 'E300' as const, category: 'transient' as const, message: 'Database connection timeout', userMessage: 'Saving...', retryable: true, notifyChannel: 'none' as const },\n  E301: { code: 'E301' as const, category: 'transient' as const, message: 'Database write conflict', userMessage: 'Syncing changes...', retryable: true, notifyChannel: 'toast' as const },\n  E302: { code: 'E302' as const, category: 'permanent' as const, message: 'Database constraint violation', userMessage: 'Could not save, check for duplicates', retryable: false, notifyChannel: 'banner' as const },\n  E303: { code: 'E303' as const, category: 'system_error' as const, message: 'Database connection failed', userMessage: 'Connection issue, saved locally', retryable: true, notifyChannel: 'banner' as const },\n  E304: { code: 'E304' as const, category: 'permanent' as const, message: 'Storage quota exceeded', userMessage: 'Storage full, upgrade or delete content', retryable: false, notifyChannel: 'push' as const },\n  E400: { code: 'E400' as const, category: 'transient' as const, message: 'Sync connection failed', userMessage: 'Offline mode, will sync later', retryable: true, notifyChannel: 'banner' as const },\n  E401: { code: 'E401' as const, category: 'transient' as const, message: 'Sync conflict detected', userMessage: 'Resolving changes...', retryable: true, notifyChannel: 'toast' as const },\n  E402: { code: 'E402' as const, category: 'user_error' as const, message: 'Sync conflict requires resolution', userMessage: 'Please choose which version to keep', retryable: false, notifyChannel: 'banner' as const },\n  E403: { code: 'E403' as const, category: 'permanent' as const, message: 'Sync version mismatch', userMessage: 'Please refresh the app', retryable: false, notifyChannel: 'banner' as const },\n  E404: { code: 'E404' as const, category: 'transient' as const, message: 'Sync server unavailable', userMessage: 'Sync paused, will resume', retryable: true, notifyChannel: 'banner' as const },\n  E500: { code: 'E500' as const, category: 'transient' as const, message: 'Auth token expired', userMessage: '', retryable: true, notifyChannel: 'none' as const },\n  E501: { code: 'E501' as const, category: 'permanent' as const, message: 'Auth token invalid', userMessage: 'Please sign in again', retryable: false, notifyChannel: 'banner' as const },\n  E502: { code: 'E502' as const, category: 'permanent' as const, message: 'Account suspended', userMessage: 'Account issue, contact support', retryable: false, notifyChannel: 'push' as const },\n  E503: { code: 'E503' as const, category: 'user_error' as const, message: 'Subscription expired', userMessage: 'Subscription ended, renew to continue', retryable: false, notifyChannel: 'push' as const },\n  E600: { code: 'E600' as const, category: 'transient' as const, message: 'Network request timeout', userMessage: 'Slow connection, retrying...', retryable: true, notifyChannel: 'toast' as const },\n  E601: { code: 'E601' as const, category: 'transient' as const, message: 'Network offline', userMessage: 'Offline mode active', retryable: true, notifyChannel: 'banner' as const },\n  E602: { code: 'E602' as const, category: 'transient' as const, message: 'DNS resolution failed', userMessage: 'Connection issue', retryable: true, notifyChannel: 'toast' as const },\n  E603: { code: 'E603' as const, category: 'transient' as const, message: 'SSL/TLS error', userMessage: 'Secure connection failed', retryable: true, notifyChannel: 'banner' as const },\n} as const;\n\nexport type OpsErrorCode = keyof typeof OPS_ERROR_CODES;\n\nexport const OPS_ERROR_CODE_KEYS: readonly OpsErrorCode[] = [\n  'E100', 'E101', 'E102', 'E103', 'E104',\n  'E200', 'E201', 'E202', 'E203',\n  'E300', 'E301', 'E302', 'E303', 'E304',\n  'E400', 'E401', 'E402', 'E403', 'E404',\n  'E500', 'E501', 'E502', 'E503',\n  'E600', 'E601', 'E602', 'E603',\n] as const;\n\nexport const OPS_ERROR_GROUPS = ['llm', 'embedding', 'database', 'sync', 'auth', 'network'] as const;\nexport type OpsErrorGroup = typeof OPS_ERROR_GROUPS[number];\n\nexport const ERROR_GROUP_PREFIXES: Record<string, OpsErrorGroup> = {\n  'E1': 'llm', 'E2': 'embedding', 'E3': 'database', 'E4': 'sync', 'E5': 'auth', 'E6': 'network',\n};\n\n// ============================================================\n// NOTIFICATION STRATEGY\n// ============================================================\n\nexport const NOTIFICATION_STRATEGY_TYPES = [\n  'transient_error', 'sync_failed', 'storage_full', 'offline',\n  'online', 'conflict', 'auth_expired',\n] as const;\nexport type NotificationStrategyType = typeof NOTIFICATION_STRATEGY_TYPES[number];\n\nexport const NOTIFICATION_STRATEGY: Record<NotificationStrategyType, {\n  readonly channel: NotifyChannel;\n  readonly priority: NotifyPriority;\n  readonly autoDismissMs?: number;\n  readonly action?: { readonly label: string; readonly handler: string };\n}> = {\n  transient_error: { channel: 'toast', priority: 'immediate', autoDismissMs: 5_000 },\n  sync_failed: { channel: 'banner', priority: 'immediate', action: { label: 'Retry now', handler: 'retrySync' } },\n  storage_full: { channel: 'push', priority: 'immediate', action: { label: 'Manage storage', handler: 'openStorage' } },\n  offline: { channel: 'banner', priority: 'immediate', action: { label: 'Check connection', handler: 'checkNetwork' } },\n  online: { channel: 'toast', priority: 'immediate', autoDismissMs: 3_000 },\n  conflict: { channel: 'banner', priority: 'immediate', action: { label: 'Resolve', handler: 'openConflicts' } },\n  auth_expired: { channel: 'banner', priority: 'immediate', action: { label: 'Sign in', handler: 'openLogin' } },\n};\n\n// ============================================================\n// CACHE CONSTANTS\n// ============================================================\n\nexport const CACHE_TYPES = ['embedding', 'llm_response', 'node', 'search_result', 'edge', 'session'] as const;\nexport type CacheType = typeof CACHE_TYPES[number];\n\nexport const CACHE_STORAGE_TIERS = ['memory', 'redis', 'sqlite'] as const;\nexport type CacheStorageTier = typeof CACHE_STORAGE_TIERS[number];\n\nexport const EVICTION_POLICIES = ['lru', 'lfu', 'ttl'] as const;\nexport type EvictionPolicy = typeof EVICTION_POLICIES[number];\n\nexport const CACHE_WARM_STRATEGIES = ['recent', 'frequent', 'connected', 'none'] as const;\nexport type CacheWarmStrategy = typeof CACHE_WARM_STRATEGIES[number];\n\nexport const CACHE_CONFIGS: Record<CacheType, {\n  readonly primaryStorage: CacheStorageTier;\n  readonly fallbackStorage?: CacheStorageTier;\n  readonly ttlSeconds: number;\n  readonly maxItems: number;\n  readonly maxBytes?: number;\n  readonly evictionPolicy: EvictionPolicy;\n  readonly warmStrategy: CacheWarmStrategy;\n}> = {\n  embedding: { primaryStorage: 'redis', fallbackStorage: 'sqlite', ttlSeconds: 86_400 * 30, maxItems: 100_000, maxBytes: 600 * 1024 * 1024, evictionPolicy: 'lru', warmStrategy: 'none' },\n  llm_response: { primaryStorage: 'redis', ttlSeconds: 3_600, maxItems: 10_000, maxBytes: 50 * 1024 * 1024, evictionPolicy: 'lru', warmStrategy: 'none' },\n  node: { primaryStorage: 'memory', fallbackStorage: 'sqlite', ttlSeconds: 300, maxItems: 1_000, maxBytes: 10 * 1024 * 1024, evictionPolicy: 'lru', warmStrategy: 'recent' },\n  search_result: { primaryStorage: 'memory', ttlSeconds: 60, maxItems: 500, evictionPolicy: 'lru', warmStrategy: 'none' },\n  edge: { primaryStorage: 'memory', fallbackStorage: 'sqlite', ttlSeconds: 300, maxItems: 5_000, evictionPolicy: 'lru', warmStrategy: 'connected' },\n  session: { primaryStorage: 'redis', ttlSeconds: 86_400, maxItems: 100_000, evictionPolicy: 'ttl', warmStrategy: 'none' },\n};\n\n// ============================================================\n// NETWORK & OFFLINE QUEUE CONSTANTS\n// ============================================================\n\nexport const NETWORK_STATUSES = ['online', 'offline', 'unknown'] as const;\nexport type NetworkStatus = typeof NETWORK_STATUSES[number];\n\nexport const NETWORK_MONITOR_CONFIG = {\n  checkIntervalMs: 30_000,\n  offlineThreshold: 3,\n  onlineThreshold: 1,\n  endpoints: ['https://api.nous.app/v1/health', 'https://1.1.1.1/cdn-cgi/trace'] as readonly string[],\n  timeoutMs: 5_000,\n} as const;\n\nexport const OFFLINE_QUEUE_OP_TYPES = ['sync', 'embed', 'edge', 'other'] as const;\nexport type OfflineQueueOpType = typeof OFFLINE_QUEUE_OP_TYPES[number];\n\nexport const OFFLINE_QUEUE_CONFIG = {\n  storage: 'sqlite' as const,\n  tableName: 'offline_queue' as const,\n  maxItemsPerTenant: 1_000,\n  maxAgeHours: 168,\n  priorityOrder: ['sync', 'embed', 'edge', 'other'] as readonly OfflineQueueOpType[],\n  onFull: 'drop_oldest' as const,\n} as const;\n\nexport const OFFLINE_QUEUE_OVERFLOW = ['drop_oldest', 'reject_new'] as const;\nexport type OfflineQueueOverflow = typeof OFFLINE_QUEUE_OVERFLOW[number];\n\n// ============================================================\n// GRACEFUL DEGRADATION\n// ============================================================\n\nexport const DEGRADABLE_SERVICES = ['redis', 'openai_embedding', 'openai_llm', 'turso_cloud', 'inngest', 'network'] as const;\nexport type DegradableService = typeof DEGRADABLE_SERVICES[number];\n\nexport const DEGRADATION_MATRIX: Record<DegradableService, { readonly impact: string; readonly fallback: string }> = {\n  redis: { impact: 'Cache misses, slower reads', fallback: 'SQLite cache tier + memory-only for hot data' },\n  openai_embedding: { impact: 'No new embeddings', fallback: 'Voyage AI fallback, then local model, then queue for later' },\n  openai_llm: { impact: 'No AI chat/synthesis', fallback: 'Anthropic fallback, then local model, then \"AI unavailable\"' },\n  turso_cloud: { impact: 'No sync', fallback: 'Local SQLite continues, offline queue grows' },\n  inngest: { impact: 'No background jobs', fallback: 'Sync processing inline, alert ops' },\n  network: { impact: 'No external services', fallback: 'Full offline mode: local search, no AI, queue all operations' },\n};\n\n// ============================================================\n// METRIC TYPES\n// ============================================================\n\nexport const METRIC_TYPES = ['queue-depth', 'cache-hit-rate', 'error-rate', 'sync-latency'] as const;\nexport type MetricType = typeof METRIC_TYPES[number];\n\n// ============================================================\n// TYPE GUARDS\n// ============================================================\n\nexport function isNBOSJobId(value: string): value is NBOSJobId {\n  return (NBOS_JOB_IDS as readonly string[]).includes(value);\n}\nexport function isNBOSJobName(value: string): value is NBOSJobName {\n  return (NBOS_JOB_NAME_VALUES as readonly string[]).includes(value);\n}\nexport function isJobTriggerType(value: string): value is JobTriggerType {\n  return (JOB_TRIGGER_TYPES as readonly string[]).includes(value);\n}\nexport function isOpsErrorCategory(value: string): value is OpsErrorCategory {\n  return (OPS_ERROR_CATEGORIES as readonly string[]).includes(value);\n}\nexport function isOpsErrorCode(value: string): value is OpsErrorCode {\n  return (OPS_ERROR_CODE_KEYS as readonly string[]).includes(value);\n}\nexport function isNotifyChannel(value: string): value is NotifyChannel {\n  return (NOTIFY_CHANNELS as readonly string[]).includes(value);\n}\nexport function isNotifyPriority(value: string): value is NotifyPriority {\n  return (NOTIFY_PRIORITIES as readonly string[]).includes(value);\n}\nexport function isCacheType(value: string): value is CacheType {\n  return (CACHE_TYPES as readonly string[]).includes(value);\n}\nexport function isCacheStorageTier(value: string): value is CacheStorageTier {\n  return (CACHE_STORAGE_TIERS as readonly string[]).includes(value);\n}\nexport function isEvictionPolicy(value: string): value is EvictionPolicy {\n  return (EVICTION_POLICIES as readonly string[]).includes(value);\n}\nexport function isCacheWarmStrategy(value: string): value is CacheWarmStrategy {\n  return (CACHE_WARM_STRATEGIES as readonly string[]).includes(value);\n}\nexport function isNetworkStatus(value: string): value is NetworkStatus {\n  return (NETWORK_STATUSES as readonly string[]).includes(value);\n}\nexport function isOfflineQueueOpType(value: string): value is OfflineQueueOpType {\n  return (OFFLINE_QUEUE_OP_TYPES as readonly string[]).includes(value);\n}\nexport function isDegradableService(value: string): value is DegradableService {\n  return (DEGRADABLE_SERVICES as readonly string[]).includes(value);\n}\nexport function isMetricType(value: string): value is MetricType {\n  return (METRIC_TYPES as readonly string[]).includes(value);\n}\nexport function isBackoffStrategy(value: string): value is BackoffStrategy {\n  return (BACKOFF_STRATEGIES as readonly string[]).includes(value);\n}\nexport function isNotificationStrategyType(value: string): value is NotificationStrategyType {\n  return (NOTIFICATION_STRATEGY_TYPES as readonly string[]).includes(value);\n}\nexport function isOpsErrorGroup(value: string): value is OpsErrorGroup {\n  return (OPS_ERROR_GROUPS as readonly string[]).includes(value);\n}\n","/**\n * @module @nous/core/operations\n * @description Types and Zod schemas for NBOS - storm-034\n * @version 1.0.0\n * @spec Specs/Phase-7-Backend-API/storm-034\n * @storm Brainstorms/Infrastructure/storm-034-backend-operations\n *\n * All interfaces have corresponding Zod schemas for runtime validation.\n * Discriminated unions use the `type` field for job payload discrimination.\n */\n\nimport { z } from 'zod';\n\nimport type {\n  JobTriggerType,\n  OpsErrorCategory,\n  OpsErrorCode,\n  NotifyChannel,\n  NotifyPriority,\n  CacheType,\n  CacheStorageTier,\n  EvictionPolicy,\n  CacheWarmStrategy,\n  OfflineQueueOpType,\n  DegradableService,\n  MetricType,\n  BackoffStrategy,\n} from './constants';\n\nimport {\n  JOB_TRIGGER_TYPES,\n  OPS_ERROR_CATEGORIES,\n  OPS_ERROR_CODE_KEYS,\n  NOTIFY_CHANNELS,\n  NOTIFY_PRIORITIES,\n  CACHE_TYPES,\n  CACHE_STORAGE_TIERS,\n  EVICTION_POLICIES,\n  CACHE_WARM_STRATEGIES,\n  OFFLINE_QUEUE_OP_TYPES,\n  DEGRADABLE_SERVICES,\n  METRIC_TYPES,\n  BACKOFF_STRATEGIES,\n} from './constants';\n\n// ============================================================\n// JOB PAYLOAD TYPES\n// ============================================================\n\n/** Base fields shared by all 14 job payloads. */\nexport interface BaseJobPayload {\n  tenantId: string;\n  correlationId: string;\n  triggeredAt: string;\n  triggeredBy: JobTriggerType;\n}\n\nexport const BaseJobPayloadSchema = z.object({\n  tenantId: z.string().min(1),\n  correlationId: z.string().min(1),\n  triggeredAt: z.string().datetime(),\n  triggeredBy: z.enum(JOB_TRIGGER_TYPES),\n});\n\n/** J-001: Decay Cycle */\nexport interface DecayCyclePayload extends BaseJobPayload {\n  type: 'decay-cycle';\n  batchSize: number;\n  offset?: number;\n}\n\nexport const DecayCyclePayloadSchema = BaseJobPayloadSchema.extend({\n  type: z.literal('decay-cycle'),\n  batchSize: z.number().int().positive(),\n  offset: z.number().int().nonnegative().optional(),\n});\n\n/** J-002: Compression Run */\nexport interface CompressionRunPayload extends BaseJobPayload {\n  type: 'compression-run';\n  clusterId?: string;\n  dryRun?: boolean;\n}\n\nexport const CompressionRunPayloadSchema = BaseJobPayloadSchema.extend({\n  type: z.literal('compression-run'),\n  clusterId: z.string().optional(),\n  dryRun: z.boolean().optional(),\n});\n\n/** J-003: Cleanup Dormant */\nexport interface CleanupDormantPayload extends BaseJobPayload {\n  type: 'cleanup-dormant';\n  dormantDays: number;\n  action: 'archive' | 'notify' | 'delete';\n}\n\nexport const CleanupDormantPayloadSchema = BaseJobPayloadSchema.extend({\n  type: z.literal('cleanup-dormant'),\n  dormantDays: z.number().int().positive(),\n  action: z.enum(['archive', 'notify', 'delete']),\n});\n\n/** J-004: Similarity Batch */\nexport interface SimilarityBatchPayload extends BaseJobPayload {\n  type: 'similarity-batch';\n  sinceTimestamp?: string;\n  threshold: number;\n}\n\nexport const SimilarityBatchPayloadSchema = BaseJobPayloadSchema.extend({\n  type: z.literal('similarity-batch'),\n  sinceTimestamp: z.string().datetime().optional(),\n  threshold: z.number().min(0).max(1),\n});\n\n/** J-005: Accessibility Audit */\nexport interface AccessibilityAuditPayload extends BaseJobPayload {\n  type: 'accessibility-audit';\n  notifyUser: boolean;\n}\n\nexport const AccessibilityAuditPayloadSchema = BaseJobPayloadSchema.extend({\n  type: z.literal('accessibility-audit'),\n  notifyUser: z.boolean(),\n});\n\n/** J-006: Embed Single */\nexport interface EmbedSinglePayload extends BaseJobPayload {\n  type: 'embed-single';\n  nodeId: string;\n  content: string;\n  priority: 'high' | 'normal' | 'low';\n}\n\nexport const EmbedSinglePayloadSchema = BaseJobPayloadSchema.extend({\n  type: z.literal('embed-single'),\n  nodeId: z.string().min(1),\n  content: z.string().min(1),\n  priority: z.enum(['high', 'normal', 'low']),\n});\n\n/** J-007: Embed Batch */\nexport interface EmbedBatchPayload extends BaseJobPayload {\n  type: 'embed-batch';\n  nodeIds: string[];\n  documentId?: string;\n}\n\nexport const EmbedBatchPayloadSchema = BaseJobPayloadSchema.extend({\n  type: z.literal('embed-batch'),\n  nodeIds: z.array(z.string().min(1)).min(1),\n  documentId: z.string().optional(),\n});\n\n/** J-008: Infer Edges */\nexport interface InferEdgesPayload extends BaseJobPayload {\n  type: 'infer-edges';\n  nodeId: string;\n  contextNodeIds?: string[];\n}\n\nexport const InferEdgesPayloadSchema = BaseJobPayloadSchema.extend({\n  type: z.literal('infer-edges'),\n  nodeId: z.string().min(1),\n  contextNodeIds: z.array(z.string().min(1)).optional(),\n});\n\n/** J-009: Deduplicate */\nexport interface DeduplicatePayload extends BaseJobPayload {\n  type: 'deduplicate';\n  nodeId: string;\n  similarityThreshold: number;\n}\n\nexport const DeduplicatePayloadSchema = BaseJobPayloadSchema.extend({\n  type: z.literal('deduplicate'),\n  nodeId: z.string().min(1),\n  similarityThreshold: z.number().min(0).max(1),\n});\n\n/** J-010: Sync Retry */\nexport interface SyncRetryPayload extends BaseJobPayload {\n  type: 'sync-retry';\n  syncId: string;\n  attempt: number;\n  maxAttempts: number;\n}\n\nexport const SyncRetryPayloadSchema = BaseJobPayloadSchema.extend({\n  type: z.literal('sync-retry'),\n  syncId: z.string().min(1),\n  attempt: z.number().int().nonnegative(),\n  maxAttempts: z.number().int().positive(),\n});\n\n/** J-011: Cache Warm */\nexport interface CacheWarmPayload extends BaseJobPayload {\n  type: 'cache-warm';\n  strategy: CacheWarmStrategy;\n  limit: number;\n}\n\nexport const CacheWarmPayloadSchema = BaseJobPayloadSchema.extend({\n  type: z.literal('cache-warm'),\n  strategy: z.enum(CACHE_WARM_STRATEGIES),\n  limit: z.number().int().positive(),\n});\n\n/** J-012: Metrics Collect */\nexport interface MetricsCollectPayload extends BaseJobPayload {\n  type: 'metrics-collect';\n  metrics: MetricType[];\n}\n\nexport const MetricsCollectPayloadSchema = BaseJobPayloadSchema.extend({\n  type: z.literal('metrics-collect'),\n  metrics: z.array(z.enum(METRIC_TYPES)).min(1),\n});\n\n/** J-013: Embedding Backfill */\nexport interface EmbeddingBackfillPayload extends BaseJobPayload {\n  type: 'embedding-backfill';\n  batchSize: number;\n  priority: 'stale' | 'failed' | 'missing';\n}\n\nexport const EmbeddingBackfillPayloadSchema = BaseJobPayloadSchema.extend({\n  type: z.literal('embedding-backfill'),\n  batchSize: z.number().int().positive(),\n  priority: z.enum(['stale', 'failed', 'missing']),\n});\n\n/** J-014: DLQ Process */\nexport interface DLQProcessPayload extends BaseJobPayload {\n  type: 'dlq-process';\n  limit: number;\n  retryEligible: boolean;\n}\n\nexport const DLQProcessPayloadSchema = BaseJobPayloadSchema.extend({\n  type: z.literal('dlq-process'),\n  limit: z.number().int().positive(),\n  retryEligible: z.boolean(),\n});\n\n/** Discriminated union of all 14 job payloads. */\nexport type NBOSJobPayload =\n  | DecayCyclePayload\n  | CompressionRunPayload\n  | CleanupDormantPayload\n  | SimilarityBatchPayload\n  | AccessibilityAuditPayload\n  | EmbedSinglePayload\n  | EmbedBatchPayload\n  | InferEdgesPayload\n  | DeduplicatePayload\n  | SyncRetryPayload\n  | CacheWarmPayload\n  | MetricsCollectPayload\n  | EmbeddingBackfillPayload\n  | DLQProcessPayload;\n\n/** Zod discriminated union of all 14 job payload schemas. */\nexport const NBOSJobPayloadSchema = z.discriminatedUnion('type', [\n  DecayCyclePayloadSchema,\n  CompressionRunPayloadSchema,\n  CleanupDormantPayloadSchema,\n  SimilarityBatchPayloadSchema,\n  AccessibilityAuditPayloadSchema,\n  EmbedSinglePayloadSchema,\n  EmbedBatchPayloadSchema,\n  InferEdgesPayloadSchema,\n  DeduplicatePayloadSchema,\n  SyncRetryPayloadSchema,\n  CacheWarmPayloadSchema,\n  MetricsCollectPayloadSchema,\n  EmbeddingBackfillPayloadSchema,\n  DLQProcessPayloadSchema,\n]);\n\n// ============================================================\n// JOB FAILURE CONFIG TYPE\n// ============================================================\n\n/** Failure handling configuration for a job. */\nexport interface JobFailureConfig {\n  retries: number;\n  backoff: BackoffStrategy;\n  baseDelayMs: number;\n  maxDelayMs: number;\n  deadLetterAfter: number;\n  alertAfter: number;\n  userNotify: boolean;\n  notifyChannel: NotifyChannel;\n}\n\nexport const JobFailureConfigSchema = z.object({\n  retries: z.number().int().nonnegative(),\n  backoff: z.enum(BACKOFF_STRATEGIES),\n  baseDelayMs: z.number().int().positive(),\n  maxDelayMs: z.number().int().positive(),\n  deadLetterAfter: z.number().int().positive(),\n  alertAfter: z.number().int().positive(),\n  userNotify: z.boolean(),\n  notifyChannel: z.enum(NOTIFY_CHANNELS),\n});\n\n// ============================================================\n// ERROR TYPES\n// ============================================================\n\n/** Operational error with full context. Created via createOperationalError(). */\nexport interface NousOperationalError {\n  code: OpsErrorCode;\n  category: OpsErrorCategory;\n  message: string;\n  userMessage: string;\n  retryable: boolean;\n  retryAfter?: number;\n  notifyChannel: NotifyChannel;\n  context?: Record<string, unknown>;\n}\n\nexport const NousOperationalErrorSchema = z.object({\n  code: z.enum(OPS_ERROR_CODE_KEYS as unknown as [string, ...string[]]),\n  category: z.enum(OPS_ERROR_CATEGORIES),\n  message: z.string(),\n  userMessage: z.string(),\n  retryable: z.boolean(),\n  retryAfter: z.number().int().positive().optional(),\n  notifyChannel: z.enum(NOTIFY_CHANNELS),\n  context: z.record(z.string(), z.unknown()).optional(),\n});\n\n// ============================================================\n// CACHE TYPES\n// ============================================================\n\n/** Configuration for a single cache type. */\nexport interface CacheConfig {\n  primaryStorage: CacheStorageTier;\n  fallbackStorage?: CacheStorageTier;\n  ttlSeconds: number;\n  maxItems: number;\n  maxBytes?: number;\n  evictionPolicy: EvictionPolicy;\n  warmStrategy: CacheWarmStrategy;\n}\n\nexport const CacheConfigSchema = z.object({\n  primaryStorage: z.enum(CACHE_STORAGE_TIERS),\n  fallbackStorage: z.enum(CACHE_STORAGE_TIERS).optional(),\n  ttlSeconds: z.number().int().positive(),\n  maxItems: z.number().int().positive(),\n  maxBytes: z.number().int().positive().optional(),\n  evictionPolicy: z.enum(EVICTION_POLICIES),\n  warmStrategy: z.enum(CACHE_WARM_STRATEGIES),\n});\n\n/** Runtime metrics for a cache instance. */\nexport interface CacheMetrics {\n  cacheType: CacheType;\n  storage: CacheStorageTier;\n  hits: number;\n  misses: number;\n  hitRate: number;\n  itemCount: number;\n  maxItems: number;\n  bytesUsed: number;\n  maxBytes: number;\n  evictions: number;\n  avgLatencyMs: number;\n  p99LatencyMs: number;\n}\n\nexport const CacheMetricsSchema = z.object({\n  cacheType: z.enum(CACHE_TYPES),\n  storage: z.enum(CACHE_STORAGE_TIERS),\n  hits: z.number().int().nonnegative(),\n  misses: z.number().int().nonnegative(),\n  hitRate: z.number().min(0).max(1),\n  itemCount: z.number().int().nonnegative(),\n  maxItems: z.number().int().positive(),\n  bytesUsed: z.number().int().nonnegative(),\n  maxBytes: z.number().int().nonnegative(),\n  evictions: z.number().int().nonnegative(),\n  avgLatencyMs: z.number().nonnegative(),\n  p99LatencyMs: z.number().nonnegative(),\n});\n\n/** Stats returned by ICacheService.stats(). */\nexport interface CacheStats {\n  hits: number;\n  misses: number;\n  size: number;\n  bytesUsed: number;\n  evictions: number;\n  avgLatencyMs: number;\n  p99LatencyMs: number;\n}\n\nexport const CacheStatsSchema = z.object({\n  hits: z.number().int().nonnegative(),\n  misses: z.number().int().nonnegative(),\n  size: z.number().int().nonnegative(),\n  bytesUsed: z.number().int().nonnegative(),\n  evictions: z.number().int().nonnegative(),\n  avgLatencyMs: z.number().nonnegative(),\n  p99LatencyMs: z.number().nonnegative(),\n});\n\n/** Cache service interface (pure interface, implementation deferred to service layer). */\nexport interface ICacheService {\n  get<T>(key: string): Promise<T | null>;\n  set<T>(key: string, value: T, ttlSeconds?: number): Promise<void>;\n  delete(key: string): Promise<void>;\n  deletePattern(pattern: string): Promise<number>;\n  stats(): Promise<CacheStats>;\n}\n\n// ============================================================\n// NETWORK & OFFLINE QUEUE TYPES\n// ============================================================\n\n/** Network monitor configuration. */\nexport interface NetworkMonitorConfig {\n  checkIntervalMs: number;\n  offlineThreshold: number;\n  onlineThreshold: number;\n  endpoints: readonly string[];\n  timeoutMs: number;\n}\n\nexport const NetworkMonitorConfigSchema = z.object({\n  checkIntervalMs: z.number().int().positive(),\n  offlineThreshold: z.number().int().positive(),\n  onlineThreshold: z.number().int().positive(),\n  endpoints: z.array(z.string().url()).min(1),\n  timeoutMs: z.number().int().positive(),\n});\n\n/**\n * An operation queued for offline replay.\n * Persisted in SQLite via the offline_queue table.\n * _schemaVersion required for persisted types (Technical Audit finding).\n */\nexport interface QueuedOperation {\n  _schemaVersion: number;\n  id: string;\n  tenantId: string;\n  type: OfflineQueueOpType;\n  payload: unknown;\n  createdAt: string;\n  priority: number;\n  attempts: number;\n  lastAttempt?: string;\n  error?: string;\n}\n\nexport const QueuedOperationSchema = z.object({\n  _schemaVersion: z.number().int().positive(),\n  id: z.string().min(1),\n  tenantId: z.string().min(1),\n  type: z.enum(OFFLINE_QUEUE_OP_TYPES),\n  payload: z.unknown(),\n  createdAt: z.string().datetime(),\n  priority: z.number().int().nonnegative(),\n  attempts: z.number().int().nonnegative(),\n  lastAttempt: z.string().datetime().optional(),\n  error: z.string().optional(),\n});\n\n// ============================================================\n// NOTIFICATION TYPES\n// ============================================================\n\n/** Notification configuration for an event type. */\nexport interface NotificationConfig {\n  channel: NotifyChannel;\n  priority: NotifyPriority;\n  autoDismissMs?: number;\n  action?: { label: string; handler: string };\n}\n\nexport const NotificationConfigSchema = z.object({\n  channel: z.enum(NOTIFY_CHANNELS),\n  priority: z.enum(NOTIFY_PRIORITIES),\n  autoDismissMs: z.number().int().positive().optional(),\n  action: z.object({\n    label: z.string().min(1),\n    handler: z.string().min(1),\n  }).optional(),\n});\n\n// ============================================================\n// DEGRADATION TYPES\n// ============================================================\n\n/** Degradation action for a downed service. */\nexport interface DegradationAction {\n  service: DegradableService;\n  impact: string;\n  fallback: string;\n}\n\nexport const DegradationActionSchema = z.object({\n  service: z.enum(DEGRADABLE_SERVICES),\n  impact: z.string().min(1),\n  fallback: z.string().min(1),\n});\n\n// ============================================================\n// ADDITIONAL UNION TYPES\n// ============================================================\n\n/** Priority for J-013 embedding backfill. */\nexport const EMBEDDING_BACKFILL_PRIORITIES = ['stale', 'failed', 'missing'] as const;\nexport type EmbeddingBackfillPriority = typeof EMBEDDING_BACKFILL_PRIORITIES[number];\n\n/** Actions for J-003 cleanup dormant. */\nexport const CLEANUP_ACTIONS = ['archive', 'notify', 'delete'] as const;\nexport type CleanupAction = typeof CLEANUP_ACTIONS[number];\n\n/** Priority for J-006 embed single. */\nexport const EMBED_PRIORITIES = ['high', 'normal', 'low'] as const;\nexport type EmbedPriority = typeof EMBED_PRIORITIES[number];\n","/**\n * @module @nous/core/operations\n * @description Job scheduling, dependency resolution, and failure handling - storm-034\n * @version 1.0.0\n * @spec Specs/Phase-7-Backend-API/storm-034\n * @storm Brainstorms/Infrastructure/storm-034-backend-operations\n */\n\nimport type { NBOSJobId, BackoffStrategy } from './constants';\nimport type { JobFailureConfig, NBOSJobPayload } from './types';\nimport {\n  NBOS_CRON_SCHEDULES,\n  NBOS_BATCH_SIZES,\n  NBOS_TIMEOUTS,\n  NBOS_CONCURRENCY,\n  NBOS_JOB_NAMES,\n  NBOS_JOB_PRIORITIES,\n  NBOS_JOB_DEPENDENCIES,\n  NBOS_CRON_JOBS,\n  NBOS_EVENT_JOBS,\n  DAILY_CHAIN_ORDER,\n  JOB_FAILURE_CONFIGS,\n} from './constants';\n\n// ============================================================\n// JOB METADATA LOOKUPS\n// ============================================================\n\n/**\n * Get the cron schedule string for a given job.\n *\n * @returns The cron expression, or `null` if the job is event-driven\n */\nexport function getJobSchedule(jobId: NBOSJobId): string | null {\n  return NBOS_CRON_SCHEDULES[jobId] ?? null;\n}\n\n/**\n * Get the batch size for a given job.\n *\n * @returns The maximum batch size, or `null` for unbounded processing\n */\nexport function getJobBatchSize(jobId: NBOSJobId): number | null {\n  return NBOS_BATCH_SIZES[jobId] ?? null;\n}\n\n/**\n * Get the execution timeout in milliseconds for a given job.\n */\nexport function getJobTimeout(jobId: NBOSJobId): number {\n  return NBOS_TIMEOUTS[jobId] ?? 30_000;\n}\n\n/**\n * Get the concurrency limit for a given job.\n */\nexport function getJobConcurrency(jobId: NBOSJobId): number {\n  return NBOS_CONCURRENCY[jobId] ?? 1;\n}\n\n/**\n * Get the priority for a given job.\n */\nexport function getJobPriority(jobId: NBOSJobId): 'high' | 'normal' | 'low' {\n  return NBOS_JOB_PRIORITIES[jobId] ?? 'normal';\n}\n\n/**\n * Get the human-readable job name from a job ID.\n */\nexport function getJobName(jobId: NBOSJobId): string {\n  return NBOS_JOB_NAMES[jobId] ?? jobId;\n}\n\n// ============================================================\n// DEPENDENCY RESOLUTION\n// ============================================================\n\n/**\n * Get the ordered dependency chain for a job.\n *\n * @returns Array of prerequisite job IDs (empty if no dependencies)\n */\nexport function getJobDependencies(jobId: NBOSJobId): readonly NBOSJobId[] {\n  return NBOS_JOB_DEPENDENCIES[jobId] ?? [];\n}\n\n/**\n * Check whether a job is blocked by incomplete dependencies.\n *\n * @param jobId - The job to evaluate\n * @param completedJobs - Jobs that have already completed successfully\n * @returns `true` if the job cannot run yet\n */\nexport function isJobBlocked(\n  jobId: NBOSJobId,\n  completedJobs: readonly NBOSJobId[],\n): boolean {\n  const deps = getJobDependencies(jobId);\n  if (deps.length === 0) {\n    return false;\n  }\n  const completedSet = new Set(completedJobs);\n  return deps.some((dep) => !completedSet.has(dep));\n}\n\n// ============================================================\n// FAILURE HANDLING\n// ============================================================\n\n/**\n * Get the failure-handling configuration for a job by its name.\n *\n * @param jobName - The human-readable job name (e.g. 'decay-cycle')\n * @returns The failure config, or `undefined` if no config exists\n */\nexport function getJobFailureConfig(jobName: string): JobFailureConfig | undefined {\n  const entry = JOB_FAILURE_CONFIGS[jobName];\n  if (!entry) {\n    return undefined;\n  }\n  return {\n    retries: entry.retries,\n    backoff: entry.backoff,\n    baseDelayMs: entry.baseDelayMs,\n    maxDelayMs: entry.maxDelayMs,\n    deadLetterAfter: entry.deadLetterAfter,\n    alertAfter: entry.alertAfter,\n    userNotify: entry.userNotify,\n    notifyChannel: entry.notifyChannel,\n  };\n}\n\n/**\n * Calculate the retry delay in milliseconds.\n *\n * - exponential: min(baseDelay * 2^attempt, maxDelay)\n * - linear: min(baseDelay * (attempt + 1), maxDelay)\n * - fixed: baseDelay\n */\nexport function calculateRetryDelay(config: JobFailureConfig, attempt: number): number {\n  const strategy: BackoffStrategy = config.backoff;\n\n  switch (strategy) {\n    case 'exponential':\n      return Math.min(config.baseDelayMs * Math.pow(2, attempt), config.maxDelayMs);\n    case 'linear':\n      return Math.min(config.baseDelayMs * (attempt + 1), config.maxDelayMs);\n    case 'fixed':\n      return config.baseDelayMs;\n    default: {\n      const _exhaustive: never = strategy;\n      throw new Error(`Unknown backoff strategy: ${_exhaustive}`);\n    }\n  }\n}\n\n/**\n * Determine whether a job should be moved to the dead-letter queue.\n */\nexport function shouldDeadLetter(config: JobFailureConfig, attempts: number): boolean {\n  return attempts >= config.deadLetterAfter;\n}\n\n/**\n * Determine whether the operations team should be alerted.\n */\nexport function shouldAlertOps(config: JobFailureConfig, failures: number): boolean {\n  return failures >= config.alertAfter;\n}\n\n// ============================================================\n// JOB CLASSIFICATION\n// ============================================================\n\n/** Check if a job is cron-triggered (has a schedule). */\nexport function isNBOSCronJob(jobId: NBOSJobId): boolean {\n  return (NBOS_CRON_JOBS as readonly NBOSJobId[]).includes(jobId);\n}\n\n/** Check if a job is event-triggered (no schedule). */\nexport function isNBOSEventJob(jobId: NBOSJobId): boolean {\n  return (NBOS_EVENT_JOBS as readonly NBOSJobId[]).includes(jobId);\n}\n\n// ============================================================\n// DAILY CHAIN\n// ============================================================\n\n/** Get the ordered list of job IDs for the daily processing chain. */\nexport function getDailyChainOrder(): readonly NBOSJobId[] {\n  return DAILY_CHAIN_ORDER;\n}\n\n// ============================================================\n// PAYLOAD FACTORY\n// ============================================================\n\n/**\n * Create a fully-formed job payload with auto-generated metadata.\n *\n * Stamps `correlationId` and `triggeredAt` onto the provided payload.\n */\nexport function createJobPayload<T extends NBOSJobPayload>(\n  payload: Omit<T, 'correlationId' | 'triggeredAt'>,\n): T {\n  return {\n    ...payload,\n    correlationId: generateCorrelationId(),\n    triggeredAt: new Date().toISOString(),\n  } as T;\n}\n\n// ============================================================\n// INTERNAL HELPERS\n// ============================================================\n\nfunction generateCorrelationId(): string {\n  if (typeof crypto !== 'undefined' && typeof crypto.randomUUID === 'function') {\n    return crypto.randomUUID();\n  }\n  const hex = () =>\n    Math.floor(Math.random() * 0x10000)\n      .toString(16)\n      .padStart(4, '0');\n  return `${hex()}${hex()}-${hex()}-4${hex().slice(1)}-${hex()}-${hex()}${hex()}${hex()}`;\n}\n","/**\n * @module @nous/core/operations\n * @description Error creation, classification, and notification mapping - storm-034\n * @version 1.0.0\n * @spec Specs/Phase-7-Backend-API/storm-034\n * @storm Brainstorms/Infrastructure/storm-034-backend-operations\n */\n\nimport type { OpsErrorCode, OpsErrorGroup } from './constants';\nimport type { NousOperationalError, NotificationConfig } from './types';\nimport {\n  OPS_ERROR_CODES,\n  ERROR_GROUP_PREFIXES,\n  NOTIFICATION_STRATEGY,\n} from './constants';\n\n// ============================================================\n// ERROR CREATION\n// ============================================================\n\n/**\n * Create a structured operational error from a known error code.\n *\n * Looks up the code in OPS_ERROR_CODES to populate category, message,\n * userMessage, retryability, and notification channel. Merges optional\n * context for runtime debugging.\n *\n * @throws If `code` is not found in OPS_ERROR_CODES\n */\nexport function createOperationalError(\n  code: OpsErrorCode,\n  context?: Record<string, unknown>,\n): NousOperationalError {\n  const entry = OPS_ERROR_CODES[code];\n  if (!entry) {\n    throw new Error(`Unknown operational error code: ${code}`);\n  }\n\n  return {\n    code,\n    category: entry.category,\n    message: entry.message,\n    userMessage: entry.userMessage,\n    retryable: entry.retryable,\n    retryAfter: 'retryAfter' in entry ? (entry as { retryAfter: number }).retryAfter : undefined,\n    notifyChannel: entry.notifyChannel,\n    context,\n  };\n}\n\n// ============================================================\n// RETRYABILITY\n// ============================================================\n\n/** Check whether an operational error is retryable. */\nexport function isRetryableError(error: NousOperationalError): boolean {\n  return error.retryable === true;\n}\n\n/** Get the suggested retry delay for a rate-limited error. */\nexport function getRetryAfter(error: NousOperationalError): number | undefined {\n  return error.retryAfter;\n}\n\n// ============================================================\n// NOTIFICATION MAPPING\n// ============================================================\n\n/**\n * Map an operational error to its notification configuration.\n *\n * Uses the error's category and notifyChannel to derive the appropriate\n * notification strategy. Falls back to a silent notification.\n */\nexport function getNotificationForError(\n  error: NousOperationalError,\n): NotificationConfig {\n  // Map error category to notification strategy type\n  if (error.category === 'transient') {\n    const strategy = NOTIFICATION_STRATEGY['transient_error'];\n    if (strategy) {\n      return {\n        channel: strategy.channel,\n        priority: strategy.priority,\n        autoDismissMs: strategy.autoDismissMs,\n        action: strategy.action ? { label: strategy.action.label, handler: strategy.action.handler } : undefined,\n      };\n    }\n  }\n\n  // Map specific error codes to strategy types\n  const group = getErrorGroup(error.code);\n  if (group === 'sync') {\n    const strategy = NOTIFICATION_STRATEGY['sync_failed'];\n    if (strategy) {\n      return {\n        channel: strategy.channel,\n        priority: strategy.priority,\n        autoDismissMs: strategy.autoDismissMs,\n        action: strategy.action ? { label: strategy.action.label, handler: strategy.action.handler } : undefined,\n      };\n    }\n  }\n\n  if (group === 'auth') {\n    const strategy = NOTIFICATION_STRATEGY['auth_expired'];\n    if (strategy) {\n      return {\n        channel: strategy.channel,\n        priority: strategy.priority,\n        autoDismissMs: strategy.autoDismissMs,\n        action: strategy.action ? { label: strategy.action.label, handler: strategy.action.handler } : undefined,\n      };\n    }\n  }\n\n  if (error.code === 'E304') {\n    const strategy = NOTIFICATION_STRATEGY['storage_full'];\n    if (strategy) {\n      return {\n        channel: strategy.channel,\n        priority: strategy.priority,\n        autoDismissMs: strategy.autoDismissMs,\n        action: strategy.action ? { label: strategy.action.label, handler: strategy.action.handler } : undefined,\n      };\n    }\n  }\n\n  if (group === 'network' && error.code === 'E601') {\n    const strategy = NOTIFICATION_STRATEGY['offline'];\n    if (strategy) {\n      return {\n        channel: strategy.channel,\n        priority: strategy.priority,\n        autoDismissMs: strategy.autoDismissMs,\n        action: strategy.action ? { label: strategy.action.label, handler: strategy.action.handler } : undefined,\n      };\n    }\n  }\n\n  // Default: use the error's own notify channel\n  return {\n    channel: error.notifyChannel,\n    priority: 'immediate',\n  };\n}\n\n// ============================================================\n// ERROR CLASSIFICATION\n// ============================================================\n\n/**\n * Classify a raw (possibly unknown) error into an operational error code.\n *\n * Uses heuristic matching on error message content.\n */\nexport function classifyError(error: unknown): OpsErrorCode {\n  const msg = extractErrorMessage(error).toLowerCase();\n\n  // Timeout classification\n  if (msg.includes('timeout') || msg.includes('timed out') || msg.includes('etimedout')) {\n    if (msg.includes('llm') || msg.includes('openai') || msg.includes('anthropic') || msg.includes('completion')) {\n      return 'E100';\n    }\n    if (msg.includes('embed') || msg.includes('vector')) {\n      return 'E200';\n    }\n    if (msg.includes('db') || msg.includes('database') || msg.includes('sql')) {\n      return 'E300';\n    }\n    return 'E600';\n  }\n\n  // Rate limit classification\n  if (msg.includes('rate limit') || msg.includes('rate_limit') || msg.includes('429') || msg.includes('too many requests')) {\n    if (msg.includes('embed') || msg.includes('vector')) {\n      return 'E201';\n    }\n    return 'E101';\n  }\n\n  // Auth classification\n  if (msg.includes('token expired') || msg.includes('jwt expired') || msg.includes('token_expired')) {\n    return 'E500';\n  }\n  if (msg.includes('unauthorized') || msg.includes('401') || msg.includes('forbidden') || msg.includes('403')) {\n    return 'E501';\n  }\n\n  // Sync classification\n  if (msg.includes('sync') && msg.includes('conflict')) {\n    return 'E401';\n  }\n  if (msg.includes('sync') && (msg.includes('fail') || msg.includes('error'))) {\n    return 'E400';\n  }\n\n  // Network classification\n  if (msg.includes('econnrefused') || msg.includes('connection refused') || msg.includes('econnreset')) {\n    return 'E601';\n  }\n  if (msg.includes('network') || msg.includes('fetch') || msg.includes('enotfound') || msg.includes('dns')) {\n    return 'E602';\n  }\n\n  // Database classification\n  if (msg.includes('constraint') || msg.includes('unique') || msg.includes('duplicate')) {\n    return 'E302';\n  }\n  if (msg.includes('database') || msg.includes('sql') || msg.includes('db')) {\n    return 'E303';\n  }\n\n  // Storage\n  if (msg.includes('quota') || msg.includes('storage full') || msg.includes('disk full')) {\n    return 'E304';\n  }\n\n  // Fallback: generic database error (system_error)\n  return 'E303';\n}\n\n// ============================================================\n// CATEGORY CHECKS\n// ============================================================\n\n/** Check if the error is transient (temporary, likely to self-resolve). */\nexport function isTransientError(error: NousOperationalError): boolean {\n  return error.category === 'transient';\n}\n\n/** Check if the error is caused by rate limiting. */\nexport function isRateLimitedError(error: NousOperationalError): boolean {\n  return error.category === 'rate_limited';\n}\n\n/** Check if the error is permanent (will not resolve on retry). */\nexport function isPermanentError(error: NousOperationalError): boolean {\n  return error.category === 'permanent';\n}\n\n/** Check if the error originated from user input or action. */\nexport function isUserError(error: NousOperationalError): boolean {\n  return error.category === 'user_error';\n}\n\n/** Check if the error is a system/infrastructure error. */\nexport function isSystemError(error: NousOperationalError): boolean {\n  return error.category === 'system_error';\n}\n\n// ============================================================\n// ERROR GROUP RESOLUTION\n// ============================================================\n\n/**\n * Derive the error group from an error code.\n *\n * Groups by prefix: E1xx=llm, E2xx=embedding, E3xx=database,\n * E4xx=sync, E5xx=auth, E6xx=network\n */\nexport function getErrorGroup(code: OpsErrorCode): OpsErrorGroup {\n  const prefix = code.slice(0, 2);\n  const group = ERROR_GROUP_PREFIXES[prefix];\n  return group ?? 'network';\n}\n\n// ============================================================\n// INTERNAL HELPERS\n// ============================================================\n\nfunction extractErrorMessage(error: unknown): string {\n  if (error instanceof Error) {\n    return error.message;\n  }\n  if (typeof error === 'string') {\n    return error;\n  }\n  if (error !== null && error !== undefined && typeof (error as Record<string, unknown>).message === 'string') {\n    return (error as Record<string, unknown>).message as string;\n  }\n  return String(error);\n}\n","/**\n * @module @nous/core/operations\n * @description Cache key generation, TTL management, and metrics - storm-034\n * @version 1.0.0\n * @spec Specs/Phase-7-Backend-API/storm-034\n * @storm Brainstorms/Infrastructure/storm-034-backend-operations\n */\n\nimport type { CacheType, CacheWarmStrategy } from './constants';\nimport type { CacheConfig, CacheMetrics } from './types';\nimport { CACHE_CONFIGS } from './constants';\n\n// ============================================================\n// CACHE CONFIGURATION\n// ============================================================\n\n/**\n * Get the full cache configuration for a given cache type.\n *\n * @throws If `cacheType` is not found in CACHE_CONFIGS\n */\nexport function getCacheConfig(cacheType: CacheType): CacheConfig {\n  const config = CACHE_CONFIGS[cacheType];\n  if (!config) {\n    throw new Error(`Unknown cache type: ${cacheType}`);\n  }\n  return {\n    primaryStorage: config.primaryStorage,\n    fallbackStorage: config.fallbackStorage,\n    ttlSeconds: config.ttlSeconds,\n    maxItems: config.maxItems,\n    maxBytes: config.maxBytes,\n    evictionPolicy: config.evictionPolicy,\n    warmStrategy: config.warmStrategy,\n  };\n}\n\n// ============================================================\n// CACHE KEY GENERATION\n// ============================================================\n\n/**\n * Generate a cache key for an embedding result.\n * Format: `emb:{length}:{hash}`\n *\n * @param content - The raw content to embed\n * @param hashFn - A hash function (e.g. SHA-256 hex) to produce a digest\n */\nexport function generateEmbeddingCacheKey(\n  content: string,\n  hashFn: (s: string) => string,\n): string {\n  const normalized = normalizeForEmbedding(content);\n  const hash = hashFn(normalized);\n  return `emb:${normalized.length}:${hash}`;\n}\n\n/**\n * Generate a cache key for an LLM response.\n * Format: `llm:{operation}:{model}:{length}:{hash}`\n */\nexport function generateLLMCacheKey(\n  operation: string,\n  model: string,\n  prompt: string,\n  hashFn: (s: string) => string,\n): string {\n  const hash = hashFn(prompt);\n  return `llm:${operation}:${model}:${prompt.length}:${hash}`;\n}\n\n/**\n * Generate a cache key for a memory node.\n * Format: `node:{tenantId}:{nodeId}` or `node:{tenantId}:{nodeId}:v{version}`\n */\nexport function generateNodeCacheKey(\n  tenantId: string,\n  nodeId: string,\n  version?: number,\n): string {\n  const base = `node:${tenantId}:${nodeId}`;\n  if (version !== undefined) {\n    return `${base}:v${version}`;\n  }\n  return base;\n}\n\n/**\n * Generate a cache key for a search result.\n * Format: `search:{tenantId}:{queryHash}:{filtersHash}`\n */\nexport function generateSearchCacheKey(\n  tenantId: string,\n  query: string,\n  filters: Record<string, unknown>,\n  hashFn: (s: string) => string,\n): string {\n  const queryHash = hashFn(query);\n  const filtersHash = hashFn(stableStringify(filters));\n  return `search:${tenantId}:${queryHash}:${filtersHash}`;\n}\n\n/**\n * Generate a cache key for edges connected to a node.\n * Format: `edges:{tenantId}:{nodeId}`\n */\nexport function generateEdgeCacheKey(tenantId: string, nodeId: string): string {\n  return `edges:${tenantId}:${nodeId}`;\n}\n\n/**\n * Generate a cache key for a user session.\n * Format: `session:{sessionId}`\n */\nexport function generateSessionCacheKey(sessionId: string): string {\n  return `session:${sessionId}`;\n}\n\n// ============================================================\n// CONTENT NORMALIZATION\n// ============================================================\n\n/**\n * Normalize content for consistent embedding cache key generation.\n *\n * 1. Convert to lowercase\n * 2. Trim leading and trailing whitespace\n * 3. Collapse all consecutive whitespace into a single space\n * 4. Truncate to a maximum of 8000 characters\n */\nexport function normalizeForEmbedding(content: string): string {\n  return content\n    .toLowerCase()\n    .trim()\n    .replace(/\\s+/g, ' ')\n    .slice(0, 8000);\n}\n\n// ============================================================\n// TTL AND LIMITS\n// ============================================================\n\n/** Get the TTL (time-to-live) in seconds for a given cache type. */\nexport function getTTLSeconds(cacheType: CacheType): number {\n  return getCacheConfig(cacheType).ttlSeconds;\n}\n\n/** Get the maximum number of items allowed for a given cache type. */\nexport function getMaxItems(cacheType: CacheType): number {\n  return getCacheConfig(cacheType).maxItems;\n}\n\n// ============================================================\n// METRICS\n// ============================================================\n\n/**\n * Calculate the cache hit rate as a value between 0 and 1.\n * Safely handles zero denominator (returns 0).\n */\nexport function calculateHitRate(hits: number, misses: number): number {\n  const total = hits + misses;\n  if (total === 0) {\n    return 0;\n  }\n  return hits / total;\n}\n\n/**\n * Determine whether cache eviction should be triggered.\n * Eviction is needed when itemCount >= maxItems.\n */\nexport function shouldEvict(metrics: CacheMetrics): boolean {\n  return metrics.itemCount >= metrics.maxItems;\n}\n\n/** Get the warm (pre-population) strategy for a cache type. */\nexport function selectWarmStrategy(cacheType: CacheType): CacheWarmStrategy {\n  return getCacheConfig(cacheType).warmStrategy;\n}\n\n/**\n * Create an empty CacheMetrics object with all counters initialized to zero.\n */\nexport function createEmptyCacheMetrics(cacheType: CacheType): CacheMetrics {\n  const config = getCacheConfig(cacheType);\n  return {\n    cacheType,\n    storage: config.primaryStorage,\n    hits: 0,\n    misses: 0,\n    hitRate: 0,\n    itemCount: 0,\n    maxItems: config.maxItems,\n    bytesUsed: 0,\n    maxBytes: config.maxBytes ?? 0,\n    evictions: 0,\n    avgLatencyMs: 0,\n    p99LatencyMs: 0,\n  };\n}\n\n// ============================================================\n// INTERNAL HELPERS\n// ============================================================\n\n/**\n * Produce a deterministic JSON string from an object by sorting keys.\n */\nfunction stableStringify(obj: Record<string, unknown>): string {\n  const sortedKeys = Object.keys(obj).sort();\n  const sorted: Record<string, unknown> = {};\n  for (const key of sortedKeys) {\n    sorted[key] = obj[key];\n  }\n  return JSON.stringify(sorted);\n}\n","/**\n * @module @nous/core/operations\n * @description Network status evaluation and offline queue management - storm-034\n * @version 1.0.0\n * @spec Specs/Phase-7-Backend-API/storm-034\n * @storm Brainstorms/Infrastructure/storm-034-backend-operations\n */\n\nimport type { NetworkStatus, OfflineQueueOpType } from './constants';\nimport type { QueuedOperation } from './types';\nimport {\n  NETWORK_MONITOR_CONFIG,\n  OFFLINE_QUEUE_CONFIG,\n} from './constants';\n\n// ============================================================\n// NETWORK STATUS EVALUATION\n// ============================================================\n\n/**\n * Evaluate the current network status based on consecutive failure/success counts.\n *\n * State transitions (from brainstorm):\n * - 3 consecutive failures -> offline\n * - 1 success from offline -> online\n * - < threshold with no definitive signal -> unknown\n */\nexport function evaluateNetworkStatus(\n  consecutiveFailures: number,\n  consecutiveSuccesses: number,\n): NetworkStatus {\n  // Check for offline threshold (3 failures)\n  if (consecutiveFailures >= NETWORK_MONITOR_CONFIG.offlineThreshold) {\n    return 'offline';\n  }\n\n  // Check for online threshold (1 success)\n  if (consecutiveSuccesses >= NETWORK_MONITOR_CONFIG.onlineThreshold) {\n    return 'online';\n  }\n\n  return 'unknown';\n}\n\n/**\n * Check if consecutive failures have crossed the offline threshold.\n */\nexport function shouldGoOffline(consecutiveFailures: number): boolean {\n  return consecutiveFailures >= NETWORK_MONITOR_CONFIG.offlineThreshold;\n}\n\n/**\n * Check if the system should transition back to online.\n * Only returns `true` when the system is not already online.\n */\nexport function shouldGoOnline(\n  currentStatus: NetworkStatus,\n  successCount: number,\n): boolean {\n  if (currentStatus === 'online') {\n    return false;\n  }\n  return successCount >= NETWORK_MONITOR_CONFIG.onlineThreshold;\n}\n\n// ============================================================\n// OFFLINE QUEUE MANAGEMENT\n// ============================================================\n\n/**\n * Create a new queued operation for offline processing.\n *\n * Auto-generates: id, createdAt, priority, attempts=0, _schemaVersion=1\n */\nexport function createQueuedOperation(\n  tenantId: string,\n  type: OfflineQueueOpType,\n  payload: unknown,\n): QueuedOperation {\n  return {\n    _schemaVersion: 1,\n    id: generateQueueId(),\n    tenantId,\n    type,\n    payload,\n    priority: getQueuePriority(type),\n    createdAt: new Date().toISOString(),\n    attempts: 0,\n  };\n}\n\n/**\n * Get the numeric priority for an offline queue operation type.\n *\n * Uses index in OFFLINE_QUEUE_CONFIG.priorityOrder:\n * sync=0, embed=1, edge=2, other=3\n */\nexport function getQueuePriority(type: OfflineQueueOpType): number {\n  const index = (OFFLINE_QUEUE_CONFIG.priorityOrder as readonly string[]).indexOf(type);\n  return index >= 0 ? index : OFFLINE_QUEUE_CONFIG.priorityOrder.length;\n}\n\n/**\n * Check if the offline queue for a tenant has reached capacity.\n */\nexport function isQueueFull(currentCount: number): boolean {\n  return currentCount >= OFFLINE_QUEUE_CONFIG.maxItemsPerTenant;\n}\n\n/**\n * Check if a queue entry has exceeded the maximum age (7 days).\n */\nexport function isQueueEntryExpired(createdAt: string, now?: Date): boolean {\n  const created = new Date(createdAt).getTime();\n  const reference = (now ?? new Date()).getTime();\n  const maxAgeMs = OFFLINE_QUEUE_CONFIG.maxAgeHours * 60 * 60 * 1000;\n  return reference - created > maxAgeMs;\n}\n\n/**\n * Sort queued operations by priority (ascending) then by creation time\n * (ascending, oldest first).\n *\n * Does not mutate the input array.\n */\nexport function sortQueueByPriority(\n  operations: readonly QueuedOperation[],\n): QueuedOperation[] {\n  return [...operations].sort((a, b) => {\n    if (a.priority !== b.priority) {\n      return a.priority - b.priority;\n    }\n    return new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime();\n  });\n}\n\n// ============================================================\n// INTERNAL HELPERS\n// ============================================================\n\nfunction generateQueueId(): string {\n  if (typeof crypto !== 'undefined' && typeof crypto.randomUUID === 'function') {\n    return crypto.randomUUID();\n  }\n  const hex = () =>\n    Math.floor(Math.random() * 0x10000)\n      .toString(16)\n      .padStart(4, '0');\n  return `${hex()}${hex()}-${hex()}-4${hex().slice(1)}-${hex()}-${hex()}${hex()}${hex()}`;\n}\n","/**\n * @module @nous/core/operations\n * @description Graceful degradation logic for service outages - storm-034\n * @version 1.0.0\n * @spec Specs/Phase-7-Backend-API/storm-034\n * @storm Brainstorms/Infrastructure/storm-034-backend-operations\n */\n\nimport type { DegradableService } from './constants';\nimport type { DegradationAction } from './types';\nimport { DEGRADATION_MATRIX } from './constants';\n\n// ============================================================\n// FEATURE-SERVICE REQUIREMENTS\n// ============================================================\n\n/**\n * Maps features to the services they require.\n * A feature is available only when NONE of its required services are down.\n *\n * Derived from brainstorm's degradation matrix impact analysis.\n */\nconst FEATURE_SERVICE_REQUIREMENTS: Record<string, readonly DegradableService[]> = {\n  'ai-chat': ['openai_llm', 'network'],\n  'ai-extraction': ['openai_llm', 'network'],\n  'ai-summarization': ['openai_llm', 'network'],\n  'semantic-search': ['openai_embedding', 'network'],\n  'similarity-detection': ['openai_embedding', 'network'],\n  'embedding-generation': ['openai_embedding', 'network'],\n  'multi-device-sync': ['turso_cloud', 'network'],\n  'cloud-backup': ['turso_cloud', 'network'],\n  'background-jobs': ['inngest', 'network'],\n  'batch-processing': ['inngest', 'network'],\n  'cached-reads': ['redis'],\n  'local-search': [],\n  'note-editing': [],\n  'graph-browsing': [],\n  'offline-queue': [],\n};\n\n// ============================================================\n// DEGRADATION ACTIONS\n// ============================================================\n\n/**\n * Get the degradation action for a specific downed service.\n *\n * @throws If `service` is not found in DEGRADATION_MATRIX\n */\nexport function getDegradationAction(service: DegradableService): DegradationAction {\n  const entry = DEGRADATION_MATRIX[service];\n  if (!entry) {\n    throw new Error(`Unknown degradable service: ${service}`);\n  }\n  return {\n    service,\n    impact: entry.impact,\n    fallback: entry.fallback,\n  };\n}\n\n/**\n * Get all active fallback actions for a set of currently-down services.\n * Deduplicates by service name.\n */\nexport function getActiveFallbacks(\n  downServices: readonly DegradableService[],\n): DegradationAction[] {\n  const seen = new Set<DegradableService>();\n  const actions: DegradationAction[] = [];\n\n  for (const service of downServices) {\n    if (seen.has(service)) {\n      continue;\n    }\n    seen.add(service);\n\n    const entry = DEGRADATION_MATRIX[service];\n    if (entry) {\n      actions.push({\n        service,\n        impact: entry.impact,\n        fallback: entry.fallback,\n      });\n    }\n  }\n\n  return actions;\n}\n\n// ============================================================\n// OFFLINE MODE DETECTION\n// ============================================================\n\n/**\n * Check if the system is in full offline mode.\n * Full offline = 'network' service is down.\n */\nexport function isFullOfflineMode(\n  downServices: readonly DegradableService[],\n): boolean {\n  return (downServices as readonly string[]).includes('network');\n}\n\n// ============================================================\n// FEATURE AVAILABILITY\n// ============================================================\n\n/**\n * Determine which features remain available when specific services are down.\n *\n * A feature is available only when NONE of its required services are down.\n */\nexport function getAvailableFeatures(\n  downServices: readonly DegradableService[],\n): string[] {\n  const downSet = new Set<string>(downServices);\n  const available: string[] = [];\n\n  for (const [feature, requiredServices] of Object.entries(FEATURE_SERVICE_REQUIREMENTS)) {\n    const isBlocked = requiredServices.some((svc) => downSet.has(svc));\n    if (!isBlocked) {\n      available.push(feature);\n    }\n  }\n\n  return available;\n}\n"]}