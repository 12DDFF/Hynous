{"version":3,"sources":["../../src/sections/index.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["/**\n * @module @nous/core/sections\n * @description Memory section definitions — the bias layer that gives different\n * memory types different retrieval weights, decay curves, and encoding rules.\n *\n * Sections are a STATIC LOOKUP based on node subtype, not a stored field.\n * All nodes remain in one table. All queries still search all nodes.\n * Sections influence HOW results are scored, not WHICH results appear.\n *\n * See: revisions/memory-sections/executive-summary.md\n */\n\nimport { z } from 'zod';\nimport type { RerankingWeights } from '../params/index.js';\n\n// ============================================================\n// SECTION ENUM\n// ============================================================\n\n/**\n * The four memory sections, inspired by brain regions.\n *\n * EPISODIC  (Hippocampus)  — What happened: trades, summaries, events\n * SIGNALS   (Sensory cortex) — What to watch: signals, watchpoints\n * KNOWLEDGE (Neocortex)    — What I've learned: lessons, theses, curiosity\n * PROCEDURAL (Cerebellum)  — How to act: playbooks, outcome analysis\n */\nexport const MEMORY_SECTIONS = ['EPISODIC', 'SIGNALS', 'KNOWLEDGE', 'PROCEDURAL'] as const;\nexport type MemorySection = (typeof MEMORY_SECTIONS)[number];\n\n// ============================================================\n// SUBTYPE → SECTION MAPPING\n// ============================================================\n\n/**\n * Static mapping from custom subtype to memory section.\n *\n * This is the SINGLE SOURCE OF TRUTH for section membership.\n * Both TypeScript runtime and Python config mirror this mapping.\n *\n * If a subtype is not in this map, it defaults to KNOWLEDGE.\n */\nexport const SUBTYPE_TO_SECTION: Record<string, MemorySection> = {\n  // EPISODIC — What happened\n  'custom:trade_entry': 'EPISODIC',\n  'custom:trade_close': 'EPISODIC',\n  'custom:trade_modify': 'EPISODIC',\n  'custom:trade': 'EPISODIC',          // Legacy subtype, rarely used\n  'custom:turn_summary': 'EPISODIC',\n  'custom:session_summary': 'EPISODIC',\n  'custom:market_event': 'EPISODIC',\n\n  // SIGNALS — What to watch\n  'custom:signal': 'SIGNALS',\n  'custom:watchpoint': 'SIGNALS',\n\n  // KNOWLEDGE — What I've learned\n  'custom:lesson': 'KNOWLEDGE',\n  'custom:thesis': 'KNOWLEDGE',\n  'custom:curiosity': 'KNOWLEDGE',\n\n  // PROCEDURAL — How to act\n  'custom:playbook': 'PROCEDURAL',\n  'custom:missed_opportunity': 'PROCEDURAL',\n  'custom:good_pass': 'PROCEDURAL',\n};\n\n/**\n * Get the memory section for a node's subtype.\n * Returns KNOWLEDGE as default for unknown subtypes.\n */\nexport function getSectionForSubtype(subtype: string | null | undefined): MemorySection {\n  if (!subtype) return 'KNOWLEDGE';\n  return SUBTYPE_TO_SECTION[subtype] ?? 'KNOWLEDGE';\n}\n\n// ============================================================\n// SECTION PROFILE TYPES\n// ============================================================\n\n/**\n * Decay configuration per section.\n * Controls how fast memories in this section fade and transition lifecycle states.\n */\nexport interface SectionDecayConfig {\n  /** Initial stability in days for new nodes (before any access-based growth) */\n  initial_stability_days: number;\n  /** Multiplier applied to stability on each recall (FSRS growth) */\n  growth_rate: number;\n  /** Retrievability above this = ACTIVE */\n  active_threshold: number;\n  /** Retrievability above this = WEAK (below = DORMANT) */\n  weak_threshold: number;\n  /** Maximum stability in days (cap) */\n  max_stability_days: number;\n}\n\n/**\n * Encoding configuration per section.\n * Controls how strongly new memories encode based on stakes/salience.\n */\nexport interface SectionEncodingConfig {\n  /** Base difficulty for FSRS (0-1, higher = harder to recall = decays faster) */\n  base_difficulty: number;\n  /** Whether this section supports salience modulation (Issue 4) */\n  salience_enabled: boolean;\n  /** Maximum stability multiplier from salience (e.g., 2.0 = up to 2x base) */\n  max_salience_multiplier: number;\n}\n\n/**\n * Complete section profile — all parameters that define a section's behavior.\n */\nexport interface SectionProfile {\n  /** Human-readable section name */\n  name: string;\n  /** Section identifier */\n  section: MemorySection;\n  /** Per-section reranking weights for SSA (Issue 1) */\n  reranking_weights: RerankingWeights;\n  /** Per-section FSRS decay configuration (Issue 2) */\n  decay: SectionDecayConfig;\n  /** Per-section encoding configuration (Issue 4) */\n  encoding: SectionEncodingConfig;\n  /** Role in consolidation pipeline: 'source', 'target', or 'both' (Issue 3) */\n  consolidation_role: 'source' | 'target' | 'both' | 'none';\n  /** Intent boost multiplier when this section matches query intent (Issue 6) */\n  intent_boost: number;\n}\n\n// ============================================================\n// DEFAULT SECTION PROFILES\n// ============================================================\n\n/**\n * Default section profiles.\n *\n * These are the COMPILE-TIME DEFAULTS used by @nous/core.\n * Python-side YAML config can override individual parameters.\n *\n * Weight values are placeholders in this foundation guide.\n * Issues 1, 2, 4, and 6 will finalize the exact values.\n * The STRUCTURE is what matters here — the values will be tuned.\n */\nexport const SECTION_PROFILES: Record<MemorySection, SectionProfile> = {\n  EPISODIC: {\n    name: 'Episodic',\n    section: 'EPISODIC',\n    reranking_weights: {\n      semantic: 0.20,\n      keyword: 0.15,\n      graph: 0.15,\n      recency: 0.30,\n      authority: 0.10,\n      affinity: 0.10,\n    },\n    decay: {\n      initial_stability_days: 14,\n      growth_rate: 2.0,\n      active_threshold: 0.5,\n      weak_threshold: 0.1,\n      max_stability_days: 180,\n    },\n    encoding: {\n      base_difficulty: 0.3,\n      salience_enabled: true,\n      max_salience_multiplier: 2.0,\n    },\n    consolidation_role: 'source',\n    intent_boost: 1.3,\n  },\n\n  SIGNALS: {\n    name: 'Signals',\n    section: 'SIGNALS',\n    reranking_weights: {\n      semantic: 0.15,\n      keyword: 0.10,\n      graph: 0.10,\n      recency: 0.45,\n      authority: 0.10,\n      affinity: 0.10,\n    },\n    decay: {\n      initial_stability_days: 2,\n      growth_rate: 1.5,\n      active_threshold: 0.5,\n      weak_threshold: 0.15,\n      max_stability_days: 30,\n    },\n    encoding: {\n      base_difficulty: 0.2,\n      salience_enabled: false,\n      max_salience_multiplier: 1.0,\n    },\n    consolidation_role: 'source',\n    intent_boost: 1.3,\n  },\n\n  KNOWLEDGE: {\n    name: 'Knowledge',\n    section: 'KNOWLEDGE',\n    reranking_weights: {\n      semantic: 0.35,\n      keyword: 0.15,\n      graph: 0.20,\n      recency: 0.05,\n      authority: 0.20,\n      affinity: 0.05,\n    },\n    decay: {\n      initial_stability_days: 60,\n      growth_rate: 3.0,\n      active_threshold: 0.4,\n      weak_threshold: 0.05,\n      max_stability_days: 365,\n    },\n    encoding: {\n      base_difficulty: 0.4,\n      salience_enabled: true,\n      max_salience_multiplier: 2.0,\n    },\n    consolidation_role: 'target',\n    intent_boost: 1.3,\n  },\n\n  PROCEDURAL: {\n    name: 'Procedural',\n    section: 'PROCEDURAL',\n    reranking_weights: {\n      semantic: 0.25,\n      keyword: 0.25,\n      graph: 0.20,\n      recency: 0.05,\n      authority: 0.15,\n      affinity: 0.10,\n    },\n    decay: {\n      initial_stability_days: 120,\n      growth_rate: 3.5,\n      active_threshold: 0.3,\n      weak_threshold: 0.03,\n      max_stability_days: 365,\n    },\n    encoding: {\n      base_difficulty: 0.5,\n      salience_enabled: true,\n      max_salience_multiplier: 3.0,\n    },\n    consolidation_role: 'target',\n    intent_boost: 1.3,\n  },\n};\n\n// ============================================================\n// ZOD VALIDATION\n// ============================================================\n\nexport const SectionDecayConfigSchema = z.object({\n  initial_stability_days: z.number().positive(),\n  growth_rate: z.number().positive(),\n  active_threshold: z.number().min(0).max(1),\n  weak_threshold: z.number().min(0).max(1),\n  max_stability_days: z.number().positive(),\n});\n\nexport const SectionEncodingConfigSchema = z.object({\n  base_difficulty: z.number().min(0).max(1),\n  salience_enabled: z.boolean(),\n  max_salience_multiplier: z.number().min(1),\n});\n\n// Named SectionRerankingWeightsSchema to avoid collision with params/RerankingWeightsSchema\nexport const SectionRerankingWeightsSchema = z.object({\n  semantic: z.number().min(0).max(1),\n  keyword: z.number().min(0).max(1),\n  graph: z.number().min(0).max(1),\n  recency: z.number().min(0).max(1),\n  authority: z.number().min(0).max(1),\n  affinity: z.number().min(0).max(1),\n}).refine(\n  (w) => Math.abs(w.semantic + w.keyword + w.graph + w.recency + w.authority + w.affinity - 1.0) < 0.01,\n  { message: 'Reranking weights must sum to 1.0' }\n);\n\n/**\n * Validate all section profiles at import time.\n * Throws if any profile has invalid parameters.\n */\nexport function validateSectionProfiles(): void {\n  for (const [section, profile] of Object.entries(SECTION_PROFILES)) {\n    SectionDecayConfigSchema.parse(profile.decay);\n    SectionEncodingConfigSchema.parse(profile.encoding);\n    SectionRerankingWeightsSchema.parse(profile.reranking_weights);\n    if (profile.decay.weak_threshold >= profile.decay.active_threshold) {\n      throw new Error(`Section ${section}: weak_threshold must be < active_threshold`);\n    }\n  }\n}\n\n// Run validation on module load (fail fast if profiles are invalid)\nvalidateSectionProfiles();\n\n// ============================================================\n// PER-SUBTYPE INITIAL STABILITY OVERRIDES\n// ============================================================\n\n/**\n * Per-subtype initial stability overrides (in days).\n * These take priority over section defaults for specific subtypes\n * that need different stability within their section.\n *\n * Example: trade_entry (21d) vs turn_summary (7d) — both EPISODIC\n * but trade records should persist longer than conversation summaries.\n */\nexport const SUBTYPE_INITIAL_STABILITY: Record<string, number> = {\n  // EPISODIC section (default: 14 days)\n  'custom:trade_entry': 21,       // Trade records should persist\n  'custom:trade_close': 21,       // Outcomes are valuable\n  'custom:trade_modify': 14,      // Position adjustments — section default\n  'custom:trade': 14,             // Legacy — section default\n  'custom:turn_summary': 7,       // Compressed exchanges — fast decay\n  'custom:session_summary': 14,   // Session digests — section default\n  'custom:market_event': 10,      // External events — medium\n\n  // SIGNALS section (default: 2 days)\n  'custom:signal': 2,             // Market signals — very fast decay\n  'custom:watchpoint': 5,         // Watchpoints persist slightly longer (user-set)\n\n  // KNOWLEDGE section (default: 60 days)\n  'custom:lesson': 90,            // Hard-won lessons — very durable\n  'custom:thesis': 30,            // Theses have time-bound validity\n  'custom:curiosity': 14,         // Curiosity items are exploratory\n\n  // PROCEDURAL section (default: 120 days)\n  'custom:playbook': 180,         // Validated playbooks — nearly permanent\n  'custom:missed_opportunity': 30, // Regret items — medium persistence\n  'custom:good_pass': 30,         // Good passes — medium persistence\n};\n\n/**\n * Get initial stability for a specific subtype.\n * Falls back to section default, then to 21 days (global fallback).\n */\nexport function getInitialStabilityForSubtype(subtype: string | null | undefined): number {\n  if (subtype && subtype in SUBTYPE_INITIAL_STABILITY) {\n    return SUBTYPE_INITIAL_STABILITY[subtype]!;\n  }\n  const section = getSectionForSubtype(subtype);\n  return SECTION_PROFILES[section].decay.initial_stability_days;\n}\n"]}