{"version":3,"sources":["../../src/sections/index.ts","../../src/params/index.ts"],"names":["z"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * @module @nous/core/sections\n * @description Memory section definitions — the bias layer that gives different\n * memory types different retrieval weights, decay curves, and encoding rules.\n *\n * Sections are a STATIC LOOKUP based on node subtype, not a stored field.\n * All nodes remain in one table. All queries still search all nodes.\n * Sections influence HOW results are scored, not WHICH results appear.\n *\n * See: revisions/memory-sections/executive-summary.md\n */\n\nimport { z } from 'zod';\nimport type { RerankingWeights } from '../params/index.js';\n\n// ============================================================\n// SECTION ENUM\n// ============================================================\n\n/**\n * The four memory sections, inspired by brain regions.\n *\n * EPISODIC  (Hippocampus)  — What happened: trades, summaries, events\n * SIGNALS   (Sensory cortex) — What to watch: signals, watchpoints\n * KNOWLEDGE (Neocortex)    — What I've learned: lessons, theses, curiosity\n * PROCEDURAL (Cerebellum)  — How to act: playbooks, outcome analysis\n */\nexport const MEMORY_SECTIONS = ['EPISODIC', 'SIGNALS', 'KNOWLEDGE', 'PROCEDURAL'] as const;\nexport type MemorySection = (typeof MEMORY_SECTIONS)[number];\n\n// ============================================================\n// SUBTYPE → SECTION MAPPING\n// ============================================================\n\n/**\n * Static mapping from custom subtype to memory section.\n *\n * This is the SINGLE SOURCE OF TRUTH for section membership.\n * Both TypeScript runtime and Python config mirror this mapping.\n *\n * If a subtype is not in this map, it defaults to KNOWLEDGE.\n */\nexport const SUBTYPE_TO_SECTION: Record<string, MemorySection> = {\n  // EPISODIC — What happened\n  'custom:trade_entry': 'EPISODIC',\n  'custom:trade_close': 'EPISODIC',\n  'custom:trade_modify': 'EPISODIC',\n  'custom:trade': 'EPISODIC',          // Legacy subtype, rarely used\n  'custom:turn_summary': 'EPISODIC',\n  'custom:session_summary': 'EPISODIC',\n  'custom:market_event': 'EPISODIC',\n\n  // SIGNALS — What to watch\n  'custom:signal': 'SIGNALS',\n  'custom:watchpoint': 'SIGNALS',\n\n  // KNOWLEDGE — What I've learned\n  'custom:lesson': 'KNOWLEDGE',\n  'custom:thesis': 'KNOWLEDGE',\n  'custom:curiosity': 'KNOWLEDGE',\n\n  // PROCEDURAL — How to act\n  'custom:playbook': 'PROCEDURAL',\n  'custom:missed_opportunity': 'PROCEDURAL',\n  'custom:good_pass': 'PROCEDURAL',\n};\n\n/**\n * Get the memory section for a node's subtype.\n * Returns KNOWLEDGE as default for unknown subtypes.\n */\nexport function getSectionForSubtype(subtype: string | null | undefined): MemorySection {\n  if (!subtype) return 'KNOWLEDGE';\n  return SUBTYPE_TO_SECTION[subtype] ?? 'KNOWLEDGE';\n}\n\n// ============================================================\n// SECTION PROFILE TYPES\n// ============================================================\n\n/**\n * Decay configuration per section.\n * Controls how fast memories in this section fade and transition lifecycle states.\n */\nexport interface SectionDecayConfig {\n  /** Initial stability in days for new nodes (before any access-based growth) */\n  initial_stability_days: number;\n  /** Multiplier applied to stability on each recall (FSRS growth) */\n  growth_rate: number;\n  /** Retrievability above this = ACTIVE */\n  active_threshold: number;\n  /** Retrievability above this = WEAK (below = DORMANT) */\n  weak_threshold: number;\n  /** Maximum stability in days (cap) */\n  max_stability_days: number;\n}\n\n/**\n * Encoding configuration per section.\n * Controls how strongly new memories encode based on stakes/salience.\n */\nexport interface SectionEncodingConfig {\n  /** Base difficulty for FSRS (0-1, higher = harder to recall = decays faster) */\n  base_difficulty: number;\n  /** Whether this section supports salience modulation (Issue 4) */\n  salience_enabled: boolean;\n  /** Maximum stability multiplier from salience (e.g., 2.0 = up to 2x base) */\n  max_salience_multiplier: number;\n}\n\n/**\n * Complete section profile — all parameters that define a section's behavior.\n */\nexport interface SectionProfile {\n  /** Human-readable section name */\n  name: string;\n  /** Section identifier */\n  section: MemorySection;\n  /** Per-section reranking weights for SSA (Issue 1) */\n  reranking_weights: RerankingWeights;\n  /** Per-section FSRS decay configuration (Issue 2) */\n  decay: SectionDecayConfig;\n  /** Per-section encoding configuration (Issue 4) */\n  encoding: SectionEncodingConfig;\n  /** Role in consolidation pipeline: 'source', 'target', or 'both' (Issue 3) */\n  consolidation_role: 'source' | 'target' | 'both' | 'none';\n  /** Intent boost multiplier when this section matches query intent (Issue 6) */\n  intent_boost: number;\n}\n\n// ============================================================\n// DEFAULT SECTION PROFILES\n// ============================================================\n\n/**\n * Default section profiles.\n *\n * These are the COMPILE-TIME DEFAULTS used by @nous/core.\n * Python-side YAML config can override individual parameters.\n *\n * Weight values are placeholders in this foundation guide.\n * Issues 1, 2, 4, and 6 will finalize the exact values.\n * The STRUCTURE is what matters here — the values will be tuned.\n */\nexport const SECTION_PROFILES: Record<MemorySection, SectionProfile> = {\n  EPISODIC: {\n    name: 'Episodic',\n    section: 'EPISODIC',\n    reranking_weights: {\n      semantic: 0.20,\n      keyword: 0.15,\n      graph: 0.15,\n      recency: 0.30,\n      authority: 0.10,\n      affinity: 0.10,\n    },\n    decay: {\n      initial_stability_days: 14,\n      growth_rate: 2.0,\n      active_threshold: 0.5,\n      weak_threshold: 0.1,\n      max_stability_days: 180,\n    },\n    encoding: {\n      base_difficulty: 0.3,\n      salience_enabled: true,\n      max_salience_multiplier: 2.0,\n    },\n    consolidation_role: 'source',\n    intent_boost: 1.3,\n  },\n\n  SIGNALS: {\n    name: 'Signals',\n    section: 'SIGNALS',\n    reranking_weights: {\n      semantic: 0.15,\n      keyword: 0.10,\n      graph: 0.10,\n      recency: 0.45,\n      authority: 0.10,\n      affinity: 0.10,\n    },\n    decay: {\n      initial_stability_days: 2,\n      growth_rate: 1.5,\n      active_threshold: 0.5,\n      weak_threshold: 0.15,\n      max_stability_days: 30,\n    },\n    encoding: {\n      base_difficulty: 0.2,\n      salience_enabled: false,\n      max_salience_multiplier: 1.0,\n    },\n    consolidation_role: 'source',\n    intent_boost: 1.3,\n  },\n\n  KNOWLEDGE: {\n    name: 'Knowledge',\n    section: 'KNOWLEDGE',\n    reranking_weights: {\n      semantic: 0.35,\n      keyword: 0.15,\n      graph: 0.20,\n      recency: 0.05,\n      authority: 0.20,\n      affinity: 0.05,\n    },\n    decay: {\n      initial_stability_days: 60,\n      growth_rate: 3.0,\n      active_threshold: 0.4,\n      weak_threshold: 0.05,\n      max_stability_days: 365,\n    },\n    encoding: {\n      base_difficulty: 0.4,\n      salience_enabled: true,\n      max_salience_multiplier: 2.0,\n    },\n    consolidation_role: 'target',\n    intent_boost: 1.3,\n  },\n\n  PROCEDURAL: {\n    name: 'Procedural',\n    section: 'PROCEDURAL',\n    reranking_weights: {\n      semantic: 0.25,\n      keyword: 0.25,\n      graph: 0.20,\n      recency: 0.05,\n      authority: 0.15,\n      affinity: 0.10,\n    },\n    decay: {\n      initial_stability_days: 120,\n      growth_rate: 3.5,\n      active_threshold: 0.3,\n      weak_threshold: 0.03,\n      max_stability_days: 365,\n    },\n    encoding: {\n      base_difficulty: 0.5,\n      salience_enabled: true,\n      max_salience_multiplier: 3.0,\n    },\n    consolidation_role: 'target',\n    intent_boost: 1.3,\n  },\n};\n\n// ============================================================\n// ZOD VALIDATION\n// ============================================================\n\nexport const SectionDecayConfigSchema = z.object({\n  initial_stability_days: z.number().positive(),\n  growth_rate: z.number().positive(),\n  active_threshold: z.number().min(0).max(1),\n  weak_threshold: z.number().min(0).max(1),\n  max_stability_days: z.number().positive(),\n});\n\nexport const SectionEncodingConfigSchema = z.object({\n  base_difficulty: z.number().min(0).max(1),\n  salience_enabled: z.boolean(),\n  max_salience_multiplier: z.number().min(1),\n});\n\n// Named SectionRerankingWeightsSchema to avoid collision with params/RerankingWeightsSchema\nexport const SectionRerankingWeightsSchema = z.object({\n  semantic: z.number().min(0).max(1),\n  keyword: z.number().min(0).max(1),\n  graph: z.number().min(0).max(1),\n  recency: z.number().min(0).max(1),\n  authority: z.number().min(0).max(1),\n  affinity: z.number().min(0).max(1),\n}).refine(\n  (w) => Math.abs(w.semantic + w.keyword + w.graph + w.recency + w.authority + w.affinity - 1.0) < 0.01,\n  { message: 'Reranking weights must sum to 1.0' }\n);\n\n/**\n * Validate all section profiles at import time.\n * Throws if any profile has invalid parameters.\n */\nexport function validateSectionProfiles(): void {\n  for (const [section, profile] of Object.entries(SECTION_PROFILES)) {\n    SectionDecayConfigSchema.parse(profile.decay);\n    SectionEncodingConfigSchema.parse(profile.encoding);\n    SectionRerankingWeightsSchema.parse(profile.reranking_weights);\n    if (profile.decay.weak_threshold >= profile.decay.active_threshold) {\n      throw new Error(`Section ${section}: weak_threshold must be < active_threshold`);\n    }\n  }\n}\n\n// Run validation on module load (fail fast if profiles are invalid)\nvalidateSectionProfiles();\n\n// ============================================================\n// PER-SUBTYPE INITIAL STABILITY OVERRIDES\n// ============================================================\n\n/**\n * Per-subtype initial stability overrides (in days).\n * These take priority over section defaults for specific subtypes\n * that need different stability within their section.\n *\n * Example: trade_entry (21d) vs turn_summary (7d) — both EPISODIC\n * but trade records should persist longer than conversation summaries.\n */\nexport const SUBTYPE_INITIAL_STABILITY: Record<string, number> = {\n  // EPISODIC section (default: 14 days)\n  'custom:trade_entry': 21,       // Trade records should persist\n  'custom:trade_close': 21,       // Outcomes are valuable\n  'custom:trade_modify': 14,      // Position adjustments — section default\n  'custom:trade': 14,             // Legacy — section default\n  'custom:turn_summary': 7,       // Compressed exchanges — fast decay\n  'custom:session_summary': 14,   // Session digests — section default\n  'custom:market_event': 10,      // External events — medium\n\n  // SIGNALS section (default: 2 days)\n  'custom:signal': 2,             // Market signals — very fast decay\n  'custom:watchpoint': 5,         // Watchpoints persist slightly longer (user-set)\n\n  // KNOWLEDGE section (default: 60 days)\n  'custom:lesson': 90,            // Hard-won lessons — very durable\n  'custom:thesis': 30,            // Theses have time-bound validity\n  'custom:curiosity': 14,         // Curiosity items are exploratory\n\n  // PROCEDURAL section (default: 120 days)\n  'custom:playbook': 180,         // Validated playbooks — nearly permanent\n  'custom:missed_opportunity': 30, // Regret items — medium persistence\n  'custom:good_pass': 30,         // Good passes — medium persistence\n};\n\n/**\n * Get initial stability for a specific subtype.\n * Falls back to section default, then to 21 days (global fallback).\n */\nexport function getInitialStabilityForSubtype(subtype: string | null | undefined): number {\n  if (subtype && subtype in SUBTYPE_INITIAL_STABILITY) {\n    return SUBTYPE_INITIAL_STABILITY[subtype]!;\n  }\n  const section = getSectionForSubtype(subtype);\n  return SECTION_PROFILES[section].decay.initial_stability_days;\n}\n","/**\n * @module @nous/core/params\n * @description Canonical algorithm parameters for Nous - the single source of truth\n * @version 1.0.0\n * @spec Brainstorms/Specs/Phase-2-Data-Representation/storm-028\n *\n * This module implements storm-028: Algorithm Parameters & Thresholds.\n *\n * storm-028 is the AUTHORITATIVE SOURCE for all algorithm parameters.\n * Other storms should reference this module for values:\n * - storm-005 (Retrieval): Use reranking weights, SSA parameters\n * - storm-007 (Forgetting): Use decay parameters\n * - storm-008 (Classification): Use confidence thresholds\n * - storm-012 (Adaptive Limits): Use budget parameters\n */\n\nimport { z } from 'zod';\nimport { getSectionForSubtype, SECTION_PROFILES, type SectionDecayConfig } from '../sections/index.js';\n\n// ============================================================\n// ALGORITHM NODE TYPES\n// ============================================================\n\n/**\n * Node types for algorithm behavior.\n * These are behavioral categories used for stability/difficulty,\n * distinct from storm-011's structural node types.\n */\nexport const ALGORITHM_NODE_TYPES = [\n  'person',\n  'fact',\n  'concept',\n  'event',\n  'note',\n  'document',\n  'preference',\n] as const;\n\nexport type AlgorithmNodeType = (typeof ALGORITHM_NODE_TYPES)[number];\n\n// ============================================================\n// RERANKING WEIGHTS\n// ============================================================\n\n/**\n * Reranking weight configuration.\n * All weights must sum to 1.0.\n */\nexport interface RerankingWeights {\n  semantic: number;   // 0.30 - Vector similarity\n  keyword: number;    // 0.15 - BM25 keyword match\n  graph: number;      // 0.20 - Spreading activation\n  recency: number;    // 0.15 - Time-based decay\n  authority: number;  // 0.10 - Inbound edge count\n  affinity: number;   // 0.10 - User interaction history\n}\n\nexport const RerankingWeightsSchema = z.object({\n  semantic: z.number().min(0).max(1),\n  keyword: z.number().min(0).max(1),\n  graph: z.number().min(0).max(1),\n  recency: z.number().min(0).max(1),\n  authority: z.number().min(0).max(1),\n  affinity: z.number().min(0).max(1),\n}).refine(\n  (w) => Math.abs(w.semantic + w.keyword + w.graph + w.recency + w.authority + w.affinity - 1.0) < 0.001,\n  { message: 'Reranking weights must sum to 1.0' }\n);\n\n/**\n * Default reranking weights.\n */\nexport const RERANKING_WEIGHTS: RerankingWeights = {\n  semantic: 0.30,\n  keyword: 0.15,\n  graph: 0.20,\n  recency: 0.15,\n  authority: 0.10,\n  affinity: 0.10,\n};\n\n/**\n * Reranking behavior configuration.\n */\nexport interface RerankingConfig {\n  recency_half_life_days: number;\n  authority_cap_multiple: number;\n  affinity_saturation: number;\n  new_content_boost_days: number;\n  new_content_boost_value: number;\n}\n\nexport const RerankingConfigSchema = z.object({\n  recency_half_life_days: z.number().positive(),\n  authority_cap_multiple: z.number().positive(),\n  affinity_saturation: z.number().positive(),\n  new_content_boost_days: z.number().int().nonnegative(),\n  new_content_boost_value: z.number().min(0).max(1),\n});\n\nexport const RERANKING_CONFIG: RerankingConfig = {\n  recency_half_life_days: 30,\n  authority_cap_multiple: 2.0,\n  affinity_saturation: 10,\n  new_content_boost_days: 7,\n  new_content_boost_value: 0.2,\n};\n\n/**\n * Per-signal score breakdown.\n */\nexport interface ScoreBreakdown {\n  semantic: number;\n  keyword: number;\n  graph: number;\n  recency: number;\n  authority: number;\n  affinity: number;\n}\n\nexport const ScoreBreakdownSchema = z.object({\n  semantic: z.number().min(0).max(1),\n  keyword: z.number().min(0).max(1),\n  graph: z.number().min(0).max(1),\n  recency: z.number().min(0).max(1),\n  authority: z.number().min(0).max(1),\n  affinity: z.number().min(0).max(1),\n});\n\n/**\n * Scored node input for reranking.\n */\nexport interface ScoredNode {\n  id: string;\n  semantic_score?: number;\n  bm25_score?: number;\n  graph_score?: number;\n  last_accessed: Date;\n  created_at: Date;\n  access_count: number;\n  inbound_edge_count: number;\n  subtype?: string;  // e.g. 'custom:lesson' — used for per-section reranking (Issue 1)\n}\n\nexport const ScoredNodeSchema = z.object({\n  id: z.string(),\n  semantic_score: z.number().min(0).max(1).optional(),\n  bm25_score: z.number().nonnegative().optional(),\n  graph_score: z.number().min(0).max(1).optional(),\n  last_accessed: z.date(),\n  created_at: z.date(),\n  access_count: z.number().int().nonnegative(),\n  inbound_edge_count: z.number().int().nonnegative(),\n  subtype: z.string().optional(),\n});\n\n/**\n * Graph metrics for reranking context.\n */\nexport interface GraphMetrics {\n  total_nodes: number;\n  total_edges: number;\n  density: number;\n  avg_inbound_edges: number;\n  avg_outbound_edges: number;\n}\n\nexport const GraphMetricsSchema = z.object({\n  total_nodes: z.number().int().nonnegative(),\n  total_edges: z.number().int().nonnegative(),\n  density: z.number().min(0).max(1),\n  avg_inbound_edges: z.number().nonnegative(),\n  avg_outbound_edges: z.number().nonnegative(),\n});\n\n/**\n * Ranked node result.\n */\nexport interface RankedNode {\n  node: ScoredNode;\n  score: number;\n  breakdown: ScoreBreakdown;\n  primary_signal: keyof ScoreBreakdown;\n}\n\n// ============================================================\n// DECAY CONFIGURATION\n// ============================================================\n\n/**\n * Decay behavior configuration (FSRS-inspired).\n */\nexport interface DecayConfig {\n  growth_rate: number;            // 2.5 - Stability multiplier on access\n  max_stability_days: number;     // 365 - Cap at 1 year\n  active_threshold: number;       // 0.5 - R > 0.5 = ACTIVE\n  weak_threshold: number;         // 0.1 - R 0.1-0.5 = WEAK, R < 0.1 = DORMANT\n  dormant_days: number;           // 60 - Days at R < 0.1 before dormant status\n  compress_days: number;          // 120 - Days before compression eligible\n  archive_days: number;           // 240 - Days before archive eligible\n  cascade_factor: number;         // 0.8 - Edge weakening on dormant\n  edge_floor: number;             // 0.1 - Minimum edge strength\n}\n\nexport const DecayConfigSchema = z.object({\n  growth_rate: z.number().positive(),\n  max_stability_days: z.number().int().positive(),\n  active_threshold: z.number().min(0).max(1),\n  weak_threshold: z.number().min(0).max(1),\n  dormant_days: z.number().int().nonnegative(),\n  compress_days: z.number().int().nonnegative(),\n  archive_days: z.number().int().nonnegative(),\n  cascade_factor: z.number().min(0).max(1),\n  edge_floor: z.number().min(0).max(1),\n});\n\nexport const DECAY_CONFIG: DecayConfig = {\n  growth_rate: 2.5,\n  max_stability_days: 365,\n  active_threshold: 0.5,\n  weak_threshold: 0.1,\n  dormant_days: 60,\n  compress_days: 120,\n  archive_days: 240,\n  cascade_factor: 0.8,\n  edge_floor: 0.1,\n};\n\n/**\n * Initial stability per algorithm node type (days).\n */\nexport const INITIAL_STABILITY: Record<AlgorithmNodeType, number> = {\n  person: 14,\n  fact: 7,\n  concept: 21,\n  event: 10,\n  note: 30,\n  document: 7,\n  preference: 45,\n};\n\n/**\n * Initial difficulty per algorithm node type (0-1).\n */\nexport const INITIAL_DIFFICULTY: Record<AlgorithmNodeType, number> = {\n  person: 0.2,\n  fact: 0.3,\n  concept: 0.4,\n  event: 0.3,\n  note: 0.2,\n  document: 0.5,\n  preference: 0.1,\n};\n\n/**\n * Decay-based lifecycle states for memory retrieval.\n * NOTE: These are distinct from storm-011's content lifecycle states.\n * These states are used by the forgetting model (storm-007) for decay calculations.\n */\nexport const DECAY_LIFECYCLE_STATES = ['ACTIVE', 'WEAK', 'DORMANT', 'COMPRESS', 'ARCHIVE'] as const;\nexport type DecayLifecycleState = (typeof DECAY_LIFECYCLE_STATES)[number];\n\n// ============================================================\n// SSA PARAMETERS\n// ============================================================\n\n/**\n * SSA aggregation modes.\n */\nexport type SSAAggregation = 'sum' | 'max';\n\n/**\n * Spreading activation parameters.\n */\nexport interface SSAParams {\n  initial_activation: number;   // 1.0 - Seeds start at full\n  hop_decay: number;            // 0.80 - 20% loss per hop\n  min_threshold: number;        // 0.01 - Stop spreading below 1%\n  max_hops: number;             // 3 - Hard limit\n  max_nodes: number;            // 500 - Breadth limit\n  aggregation: SSAAggregation;  // 'sum' - Allow path reinforcement\n}\n\nexport const SSAParamsSchema = z.object({\n  initial_activation: z.number().min(0).max(1),\n  hop_decay: z.number().min(0).max(1),\n  min_threshold: z.number().min(0).max(1),\n  max_hops: z.number().int().positive(),\n  max_nodes: z.number().int().positive(),\n  aggregation: z.enum(['sum', 'max']),\n});\n\nexport const SSA_PARAMS: SSAParams = {\n  initial_activation: 1.0,\n  hop_decay: 0.80,\n  min_threshold: 0.01,\n  max_hops: 3,\n  max_nodes: 500,\n  aggregation: 'sum',\n};\n\n/**\n * Edge weights for SSA.\n * NOTE: These reference storm-031's edge weights but are defined here\n * as the canonical SSA values.\n */\nexport interface SSAEdgeWeights {\n  same_entity: number;\n  part_of: number;\n  caused_by: number;\n  mentioned_together: number;\n  related_to: number;\n  similar_to: number;\n  user_linked: number;\n  temporal_adjacent: number;\n  generalizes: number;  // Knowledge generalized from episodes (consolidation — Issue 3)\n  applied_to: number;   // Playbook applied to trade entry (procedural — Issue 5)\n}\n\nexport const SSAEdgeWeightsSchema = z.object({\n  same_entity: z.number().min(0).max(1),\n  part_of: z.number().min(0).max(1),\n  caused_by: z.number().min(0).max(1),\n  mentioned_together: z.number().min(0).max(1),\n  related_to: z.number().min(0).max(1),\n  similar_to: z.number().min(0).max(1),\n  user_linked: z.number().min(0).max(1),\n  temporal_adjacent: z.number().min(0).max(1),\n  generalizes: z.number().min(0).max(1),\n  applied_to: z.number().min(0).max(1),\n});\n\nexport const SSA_EDGE_WEIGHTS: SSAEdgeWeights = {\n  same_entity: 0.95,\n  part_of: 0.85,\n  caused_by: 0.80,\n  applied_to: 0.75,     // Playbook applied to trade entry (procedural — Issue 5)\n  generalizes: 0.70,    // Knowledge generalized from episodes (consolidation — Issue 3)\n  mentioned_together: 0.60,\n  related_to: 0.50,\n  similar_to: 0.45,\n  user_linked: 0.90,\n  temporal_adjacent: 0.40,\n};\n\n/**\n * Activated node result from SSA.\n */\nexport interface ActivatedNode {\n  id: string;\n  activation: number;\n  path: string[];\n}\n\nexport const ActivatedNodeSchema = z.object({\n  id: z.string(),\n  activation: z.number().min(0).max(1),\n  path: z.array(z.string()),\n});\n\n// ============================================================\n// CONFIDENCE THRESHOLDS\n// ============================================================\n\n/**\n * Confidence threshold categories.\n */\nexport interface ConfidenceThresholds {\n  retrieval: {\n    high: number;     // 0.70 - Answer directly\n    medium: number;   // 0.45 - May need context\n    low: number;      // 0.45 - Below this, clarify\n  };\n  classification: {\n    clear_lookup: number;    // 0.85 - Definitely a simple lookup\n    clear_reasoning: number; // 0.85 - Definitely needs reasoning\n    ambiguous_floor: number; // 0.50 - Below this is REASONING\n  };\n  extraction: {\n    auto_store: number;    // 0.85 - Store without asking\n    confirm_store: number; // 0.60 - Ask user to confirm\n  };\n  contradiction: {\n    definite: number;  // 0.85 - Flag for user\n    possible: number;  // 0.60 - Note internally\n  };\n}\n\nexport const ConfidenceThresholdsSchema = z.object({\n  retrieval: z.object({\n    high: z.number().min(0).max(1),\n    medium: z.number().min(0).max(1),\n    low: z.number().min(0).max(1),\n  }),\n  classification: z.object({\n    clear_lookup: z.number().min(0).max(1),\n    clear_reasoning: z.number().min(0).max(1),\n    ambiguous_floor: z.number().min(0).max(1),\n  }),\n  extraction: z.object({\n    auto_store: z.number().min(0).max(1),\n    confirm_store: z.number().min(0).max(1),\n  }),\n  contradiction: z.object({\n    definite: z.number().min(0).max(1),\n    possible: z.number().min(0).max(1),\n  }),\n});\n\nexport const CONFIDENCE_THRESHOLDS: ConfidenceThresholds = {\n  retrieval: {\n    high: 0.70,\n    medium: 0.45,\n    low: 0.45,\n  },\n  classification: {\n    clear_lookup: 0.85,\n    clear_reasoning: 0.85,\n    ambiguous_floor: 0.50,\n  },\n  extraction: {\n    auto_store: 0.85,\n    confirm_store: 0.60,\n  },\n  contradiction: {\n    definite: 0.85,\n    possible: 0.60,\n  },\n};\n\n/**\n * Confidence levels.\n */\nexport const CONFIDENCE_LEVELS = ['HIGH', 'MEDIUM', 'LOW'] as const;\nexport type ConfidenceLevel = (typeof CONFIDENCE_LEVELS)[number];\n\n/**\n * Retrieval Confidence System weights.\n */\nexport interface RCSWeights {\n  match_quality: number;     // 0.40\n  distinctiveness: number;   // 0.35\n  completeness: number;      // 0.25\n}\n\nexport const RCSWeightsSchema = z.object({\n  match_quality: z.number().min(0).max(1),\n  distinctiveness: z.number().min(0).max(1),\n  completeness: z.number().min(0).max(1),\n});\n\nexport const RCS_WEIGHTS: RCSWeights = {\n  match_quality: 0.40,\n  distinctiveness: 0.35,\n  completeness: 0.25,\n};\n\n/**\n * Retrieval confidence result.\n */\nexport interface RetrievalConfidenceResult {\n  score: number;\n  level: ConfidenceLevel;\n  breakdown: { mq: number; dt: number; cm: number };\n  flags: string[];\n}\n\nexport const RetrievalConfidenceResultSchema = z.object({\n  score: z.number().min(0).max(1),\n  level: z.enum(CONFIDENCE_LEVELS),\n  breakdown: z.object({\n    mq: z.number().min(0).max(1),\n    dt: z.number().min(0).max(1),\n    cm: z.number().min(0).max(1),\n  }),\n  flags: z.array(z.string()),\n});\n\n/**\n * Contradiction detection levels.\n */\nexport const CONTRADICTION_LEVELS = ['definite', 'possible', 'none'] as const;\nexport type ContradictionLevel = (typeof CONTRADICTION_LEVELS)[number];\n\n/**\n * Contradiction detection result.\n */\nexport interface ContradictionResult {\n  level: ContradictionLevel;\n  score: number;\n  action: 'flag_user' | 'note_internal' | 'safe_to_store';\n  explanation: string;\n}\n\nexport const ContradictionResultSchema = z.object({\n  level: z.enum(CONTRADICTION_LEVELS),\n  score: z.number().min(0).max(1),\n  action: z.enum(['flag_user', 'note_internal', 'safe_to_store']),\n  explanation: z.string(),\n});\n\n// ============================================================\n// ADAPTIVE LIMITS\n// ============================================================\n\n/**\n * Budget configuration per operation.\n */\nexport interface BudgetConfig {\n  time_ms: number;\n  max_nodes: number;\n  max_api_calls: number;\n}\n\nexport const BudgetConfigSchema = z.object({\n  time_ms: z.number().nonnegative(),\n  max_nodes: z.number().int().nonnegative(),\n  max_api_calls: z.number().int().nonnegative(),\n});\n\nexport const OPERATION_BUDGETS: Record<string, BudgetConfig> = {\n  simple_lookup: { time_ms: 50, max_nodes: 100, max_api_calls: 0 },\n  standard_query: { time_ms: 100, max_nodes: 500, max_api_calls: 0 },\n  complex_query: { time_ms: 200, max_nodes: 1000, max_api_calls: 0 },\n  phase2_reasoning: { time_ms: 3000, max_nodes: 500, max_api_calls: 5 },\n  deep_search: { time_ms: 500, max_nodes: 2000, max_api_calls: 0 },\n  serendipity: { time_ms: 200, max_nodes: 200, max_api_calls: 0 },\n};\n\n/**\n * Quality target per query type.\n */\nexport interface QualityTarget {\n  confidence: number;\n  min_coverage: number;\n}\n\nexport const QualityTargetSchema = z.object({\n  confidence: z.number().min(0).max(1),\n  min_coverage: z.number().min(0).max(1),\n});\n\nexport const QUALITY_TARGETS: Record<string, QualityTarget> = {\n  LOOKUP: { confidence: 0.80, min_coverage: 0.60 },\n  REASONING: { confidence: 0.70, min_coverage: 0.70 },\n  EXPLORATORY: { confidence: 0.50, min_coverage: 0.40 },\n  TEMPORAL: { confidence: 0.75, min_coverage: 0.65 },\n};\n\n/**\n * Quality score weights.\n */\nexport interface QualityWeights {\n  coverage: number;\n  match_quality: number;\n  convergence: number;\n}\n\nexport const QualityWeightsSchema = z.object({\n  coverage: z.number().min(0).max(1),\n  match_quality: z.number().min(0).max(1),\n  convergence: z.number().min(0).max(1),\n});\n\nexport const QUALITY_WEIGHTS: QualityWeights = {\n  coverage: 0.35,\n  match_quality: 0.45,\n  convergence: 0.20,\n};\n\n/**\n * Cold start threshold (node count).\n */\nexport const COLD_START_THRESHOLD = 200;\n\n/**\n * Adaptive limits configuration.\n */\nexport interface AdaptiveLimits {\n  entry_points: number;\n  max_hops: number;\n  max_nodes: number;\n}\n\nexport const AdaptiveLimitsSchema = z.object({\n  entry_points: z.number().int().positive(),\n  max_hops: z.number().int().positive(),\n  max_nodes: z.number().int().positive(),\n});\n\nexport const COLD_START_LIMITS: AdaptiveLimits = {\n  entry_points: 2,\n  max_hops: 3,\n  max_nodes: 50,\n};\n\n/**\n * Query types for adaptive limits.\n */\nexport const QUERY_TYPES = ['simple', 'standard', 'complex'] as const;\nexport type QueryType = (typeof QUERY_TYPES)[number];\n\n/**\n * Termination result.\n */\nexport interface TerminationResult {\n  terminate: boolean;\n  reason: string;\n}\n\nexport const TerminationResultSchema = z.object({\n  terminate: z.boolean(),\n  reason: z.string(),\n});\n\n// ============================================================\n// BM25 CONFIGURATION\n// ============================================================\n\n/**\n * Stemmer types.\n */\nexport type StemmerType = 'porter' | 'snowball' | 'none';\n\n/**\n * BM25 core configuration.\n */\nexport interface BM25Config {\n  k1: number;                     // 1.2 - Term frequency saturation\n  b: number;                      // 0.75 - Document length normalization\n  min_term_length: number;        // 2\n  max_term_length: number;        // 50\n  max_doc_frequency_ratio: number; // 0.95\n  stemmer: StemmerType;\n  preserve_original: boolean;\n}\n\nexport const BM25ConfigSchema = z.object({\n  k1: z.number().positive(),\n  b: z.number().min(0).max(1),\n  min_term_length: z.number().int().positive(),\n  max_term_length: z.number().int().positive(),\n  max_doc_frequency_ratio: z.number().min(0).max(1),\n  stemmer: z.enum(['porter', 'snowball', 'none']),\n  preserve_original: z.boolean(),\n});\n\nexport const BM25_CONFIG: BM25Config = {\n  k1: 1.2,\n  b: 0.75,\n  min_term_length: 2,\n  max_term_length: 50,\n  max_doc_frequency_ratio: 0.95,\n  stemmer: 'porter',\n  preserve_original: true,\n};\n\n/**\n * Field types for boosting.\n */\nexport type FieldType = 'title' | 'tags' | 'headers' | 'body' | 'metadata';\n\n/**\n * Field boost configuration.\n */\nexport interface FieldBoost {\n  field: FieldType;\n  boost: number;\n}\n\nexport const FieldBoostSchema = z.object({\n  field: z.enum(['title', 'tags', 'headers', 'body', 'metadata']),\n  boost: z.number().positive(),\n});\n\nexport const FIELD_BOOSTS: FieldBoost[] = [\n  { field: 'title', boost: 3.0 },\n  { field: 'tags', boost: 2.5 },\n  { field: 'headers', boost: 2.0 },\n  { field: 'body', boost: 1.0 },\n  { field: 'metadata', boost: 0.5 },\n];\n\n/**\n * Stopwords behavior.\n */\nexport type StopwordsBehavior = 'remove_from_query' | 'remove_from_both' | 'keep_for_phrases';\n\n/**\n * Stopwords configuration.\n */\nexport interface StopwordsConfig {\n  language: string;\n  default_list: string[];\n  custom_additions: string[];\n  behavior: StopwordsBehavior;\n}\n\nexport const StopwordsConfigSchema = z.object({\n  language: z.string(),\n  default_list: z.array(z.string()),\n  custom_additions: z.array(z.string()),\n  behavior: z.enum(['remove_from_query', 'remove_from_both', 'keep_for_phrases']),\n});\n\nexport const STOPWORDS_CONFIG: StopwordsConfig = {\n  language: 'en',\n  default_list: [\n    'a', 'an', 'the',\n    'and', 'or', 'but',\n    'in', 'on', 'at', 'to', 'for', 'of', 'with', 'by', 'from', 'as',\n    'is', 'was', 'are', 'were', 'been', 'be',\n    'have', 'has', 'had',\n    'do', 'does', 'did',\n    'will', 'would', 'could', 'should', 'may', 'might', 'must', 'shall', 'can',\n    'this', 'that', 'these', 'those',\n    'i', 'you', 'he', 'she', 'it', 'we', 'they',\n    'what', 'which', 'who', 'whom', 'whose', 'where', 'when', 'why', 'how',\n  ],\n  custom_additions: [\n    'note', 'notes',\n    'idea', 'ideas',\n    'thought', 'thoughts',\n    'todo', 'item', 'entry',\n  ],\n  behavior: 'remove_from_query',\n};\n\n// ============================================================\n// MASTER ALGORITHM PARAMS\n// ============================================================\n\n/**\n * Master algorithm parameters aggregation.\n */\nexport interface AlgorithmParams {\n  reranking: {\n    weights: RerankingWeights;\n    config: RerankingConfig;\n  };\n  decay: {\n    config: DecayConfig;\n    initial_stability: Record<AlgorithmNodeType, number>;\n    initial_difficulty: Record<AlgorithmNodeType, number>;\n  };\n  ssa: {\n    params: SSAParams;\n    edge_weights: SSAEdgeWeights;\n  };\n  confidence: {\n    thresholds: ConfidenceThresholds;\n    rcs_weights: RCSWeights;\n  };\n  adaptive: {\n    budgets: Record<string, BudgetConfig>;\n    quality_targets: Record<string, QualityTarget>;\n    quality_weights: QualityWeights;\n    cold_start_threshold: number;\n    cold_start_limits: AdaptiveLimits;\n  };\n  bm25: {\n    config: BM25Config;\n    field_boosts: FieldBoost[];\n    stopwords: StopwordsConfig;\n  };\n}\n\n/**\n * The canonical algorithm parameters object.\n * This is THE single source of truth for all algorithm parameters.\n */\nexport const ALGORITHM_PARAMS: AlgorithmParams = {\n  reranking: {\n    weights: RERANKING_WEIGHTS,\n    config: RERANKING_CONFIG,\n  },\n  decay: {\n    config: DECAY_CONFIG,\n    initial_stability: INITIAL_STABILITY,\n    initial_difficulty: INITIAL_DIFFICULTY,\n  },\n  ssa: {\n    params: SSA_PARAMS,\n    edge_weights: SSA_EDGE_WEIGHTS,\n  },\n  confidence: {\n    thresholds: CONFIDENCE_THRESHOLDS,\n    rcs_weights: RCS_WEIGHTS,\n  },\n  adaptive: {\n    budgets: OPERATION_BUDGETS,\n    quality_targets: QUALITY_TARGETS,\n    quality_weights: QUALITY_WEIGHTS,\n    cold_start_threshold: COLD_START_THRESHOLD,\n    cold_start_limits: COLD_START_LIMITS,\n  },\n  bm25: {\n    config: BM25_CONFIG,\n    field_boosts: FIELD_BOOSTS,\n    stopwords: STOPWORDS_CONFIG,\n  },\n};\n\n// ============================================================\n// HELPER FUNCTIONS\n// ============================================================\n\n/**\n * Calculates days between two dates.\n */\nfunction daysBetween(start: Date, end: Date): number {\n  return Math.floor((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24));\n}\n\n// ============================================================\n// RERANKING FUNCTIONS\n// ============================================================\n\n/**\n * Gets semantic score from node.\n */\nexport function semanticScore(node: ScoredNode): number {\n  return node.semantic_score ?? 0;\n}\n\n/**\n * Normalizes BM25 score against batch max.\n */\nexport function keywordScore(node: ScoredNode, maxBM25: number, candidateCount: number): number {\n  if (maxBM25 === 0) return 0.5;\n  if (candidateCount === 1) return 1.0;\n  return (node.bm25_score ?? 0) / maxBM25;\n}\n\n/**\n * Gets graph score from node.\n */\nexport function graphScore(node: ScoredNode): number {\n  return node.graph_score ?? 0;\n}\n\n/**\n * Calculates recency score using exponential decay.\n */\nexport function recencyScore(lastAccessed: Date, now: Date = new Date()): number {\n  const daysSince = daysBetween(lastAccessed, now);\n  return Math.exp(-daysSince / RERANKING_CONFIG.recency_half_life_days);\n}\n\n/**\n * Calculates authority score based on inbound edges.\n */\nexport function authorityScore(inboundEdges: number, avgInbound: number): number {\n  if (avgInbound === 0) return 0.5;\n  const ratio = inboundEdges / avgInbound;\n  return Math.min(ratio / RERANKING_CONFIG.authority_cap_multiple, 1.0);\n}\n\n/**\n * Calculates affinity score based on interaction history.\n */\nexport function affinityScore(\n  accessCount: number,\n  createdAt: Date,\n  lastAccessed: Date,\n  now: Date = new Date()\n): number {\n  const recency = recencyScore(lastAccessed, now);\n  const interactionScore = Math.tanh(accessCount / RERANKING_CONFIG.affinity_saturation) * recency;\n\n  const ageDays = daysBetween(createdAt, now);\n  const newContentBoost = ageDays < RERANKING_CONFIG.new_content_boost_days\n    ? RERANKING_CONFIG.new_content_boost_value\n    : 0;\n\n  return Math.min(interactionScore + newContentBoost, 1.0);\n}\n\n/**\n * Reranks candidates using all 6 signals.\n */\nexport function rerankCandidates(\n  candidates: ScoredNode[],\n  metrics: GraphMetrics,\n  weights: RerankingWeights = RERANKING_WEIGHTS,\n  now: Date = new Date()\n): RankedNode[] {\n  if (candidates.length === 0) return [];\n\n  const maxBM25 = Math.max(...candidates.map(c => c.bm25_score ?? 0));\n\n  return candidates.map(node => {\n    const breakdown: ScoreBreakdown = {\n      semantic: semanticScore(node),\n      keyword: keywordScore(node, maxBM25, candidates.length),\n      graph: graphScore(node),\n      recency: recencyScore(node.last_accessed, now),\n      authority: authorityScore(node.inbound_edge_count, metrics.avg_inbound_edges),\n      affinity: affinityScore(node.access_count, node.created_at, node.last_accessed, now),\n    };\n\n    const score =\n      weights.semantic * breakdown.semantic +\n      weights.keyword * breakdown.keyword +\n      weights.graph * breakdown.graph +\n      weights.recency * breakdown.recency +\n      weights.authority * breakdown.authority +\n      weights.affinity * breakdown.affinity;\n\n    const contributions = Object.entries(breakdown).map(([key, value]) => ({\n      key: key as keyof ScoreBreakdown,\n      contribution: weights[key as keyof RerankingWeights] * value\n    }));\n    const primary = contributions.reduce((a, b) =>\n      b.contribution > a.contribution ? b : a\n    ).key;\n\n    return { node, score, breakdown, primary_signal: primary };\n  }).sort((a, b) => b.score - a.score);\n}\n\n/**\n * Reranks candidates using per-section weights.\n *\n * Each candidate's subtype is mapped to a memory section, and that section's\n * weight profile is used for scoring. This gives different memory types\n * fundamentally different retrieval behavior:\n *   - Signals: recency-dominant (0.45 recency)\n *   - Episodic: recency-favoring (0.30 recency)\n *   - Knowledge: authority-dominant (0.20 authority, 0.35 semantic)\n *   - Procedural: keyword+graph-dominant (0.25 keyword, 0.20 graph)\n *\n * Critical design choice: maxBM25 is computed across ALL candidates (not per\n * section) so keyword scores are normalized against the full candidate set.\n * This prevents a section with one low-BM25 node from inflating that node's\n * keyword score to 1.0.\n *\n * Falls back to global RERANKING_WEIGHTS for nodes without a subtype.\n *\n * @see revisions/memory-sections/executive-summary.md — Issue 1\n * @see revisions/memory-sections/issue-0-section-foundation.md — SECTION_PROFILES\n */\nexport function rerankWithSectionWeights(\n  candidates: ScoredNode[],\n  metrics: GraphMetrics,\n  now: Date = new Date()\n): RankedNode[] {\n  if (candidates.length === 0) return [];\n\n  // maxBM25 is computed across ALL candidates — shared normalization base\n  const maxBM25 = Math.max(...candidates.map(c => c.bm25_score ?? 0));\n\n  return candidates.map(node => {\n    // Look up section-specific weights for this node's subtype\n    const section = getSectionForSubtype(node.subtype);\n    const weights = SECTION_PROFILES[section].reranking_weights;\n\n    const breakdown: ScoreBreakdown = {\n      semantic: semanticScore(node),\n      keyword: keywordScore(node, maxBM25, candidates.length),\n      graph: graphScore(node),\n      recency: recencyScore(node.last_accessed, now),\n      authority: authorityScore(node.inbound_edge_count, metrics.avg_inbound_edges),\n      affinity: affinityScore(node.access_count, node.created_at, node.last_accessed, now),\n    };\n\n    const score =\n      weights.semantic * breakdown.semantic +\n      weights.keyword * breakdown.keyword +\n      weights.graph * breakdown.graph +\n      weights.recency * breakdown.recency +\n      weights.authority * breakdown.authority +\n      weights.affinity * breakdown.affinity;\n\n    const contributions = Object.entries(breakdown).map(([key, value]) => ({\n      key: key as keyof ScoreBreakdown,\n      contribution: weights[key as keyof RerankingWeights] * value\n    }));\n    const primary = contributions.reduce((a, b) =>\n      b.contribution > a.contribution ? b : a\n    ).key;\n\n    return { node, score, breakdown, primary_signal: primary };\n  }).sort((a, b) => b.score - a.score);\n}\n\n// ============================================================\n// DECAY FUNCTIONS\n// ============================================================\n\n/**\n * Calculates retrievability using exponential decay.\n * R = e^(-t/S)\n */\nexport function calculateRetrievability(daysSinceAccess: number, stability: number): number {\n  if (stability <= 0) return 0;\n  return Math.exp(-daysSinceAccess / stability);\n}\n\n/**\n * Calculates difficulty based on node characteristics.\n */\nexport function calculateDifficulty(\n  type: AlgorithmNodeType,\n  contentLength: number,\n  edgeCount: number\n): number {\n  const baseDifficulty = INITIAL_DIFFICULTY[type] ?? 0.3;\n  const lengthFactor = Math.min(contentLength / 5000, 1) * 0.15;\n  const abstractionFactor = type === 'concept' ? 0.1 : 0;\n  const connectionBonus = -Math.min(edgeCount / 40, 1) * 0.15;\n\n  return Math.max(0, Math.min(1,\n    baseDifficulty + lengthFactor + abstractionFactor + connectionBonus\n  ));\n}\n\n/**\n * Updates stability on access.\n */\nexport function updateStabilityOnAccess(stability: number, difficulty: number): number {\n  const difficultyFactor = 1 - (difficulty * 0.5);\n  return Math.min(\n    stability * DECAY_CONFIG.growth_rate * difficultyFactor,\n    DECAY_CONFIG.max_stability_days\n  );\n}\n\n/**\n * Gets decay lifecycle state based on retrievability.\n */\nexport function getDecayLifecycleState(retrievability: number, daysDormant: number): DecayLifecycleState {\n  if (retrievability > DECAY_CONFIG.active_threshold) return 'ACTIVE';\n  if (retrievability > DECAY_CONFIG.weak_threshold) return 'WEAK';\n  if (daysDormant < DECAY_CONFIG.dormant_days) return 'DORMANT';\n  if (daysDormant < DECAY_CONFIG.compress_days) return 'DORMANT';\n  if (daysDormant < DECAY_CONFIG.archive_days) return 'COMPRESS';\n  return 'ARCHIVE';\n}\n\n/**\n * Applies cascade decay to edge weight.\n */\nexport function applyCascadeDecay(edgeWeight: number, retrievability: number): number {\n  if (retrievability >= DECAY_CONFIG.weak_threshold) {\n    return edgeWeight;\n  }\n  return Math.max(edgeWeight * DECAY_CONFIG.cascade_factor, DECAY_CONFIG.edge_floor);\n}\n\n/**\n * Gets initial stability for a node type.\n */\nexport function getInitialStability(type: AlgorithmNodeType): number {\n  return INITIAL_STABILITY[type] ?? 14;\n}\n\n/**\n * Gets initial difficulty for a node type.\n */\nexport function getInitialDifficulty(type: AlgorithmNodeType): number {\n  return INITIAL_DIFFICULTY[type] ?? 0.3;\n}\n\n/**\n * Gets decay lifecycle state using per-section thresholds.\n *\n * Unlike getDecayLifecycleState() which uses global DECAY_CONFIG,\n * this variant accepts a SectionDecayConfig so each memory section\n * can have different active/weak thresholds and lifecycle timing.\n *\n * Also fixes the dead branch bug in the original function where\n * COMPRESS was unreachable (line 1030 returned 'DORMANT' instead of 'COMPRESS').\n *\n * @param retrievability Current R value (0-1)\n * @param daysDormant Days the node has been below weak_threshold\n * @param decay Section-specific decay configuration\n * @returns Lifecycle state: ACTIVE | WEAK | DORMANT | COMPRESS | ARCHIVE\n *\n * @see revisions/memory-sections/issue-2-decay-curves.md\n */\nexport function getDecayLifecycleStateForSection(\n  retrievability: number,\n  daysDormant: number,\n  decay: SectionDecayConfig,\n): DecayLifecycleState {\n  if (retrievability > decay.active_threshold) return 'ACTIVE';\n  if (retrievability > decay.weak_threshold) return 'WEAK';\n  // Below weak_threshold — use dormant/compress/archive timing from global DECAY_CONFIG\n  // (These day-based thresholds are uniform across sections — only R-based thresholds differ)\n  if (daysDormant < DECAY_CONFIG.dormant_days) return 'DORMANT';\n  if (daysDormant < DECAY_CONFIG.compress_days) return 'COMPRESS';  // Fixed: was 'DORMANT' (dead branch)\n  if (daysDormant < DECAY_CONFIG.archive_days) return 'ARCHIVE';\n  return 'ARCHIVE';\n}\n\n/**\n * Updates stability on access using per-section growth rate and max stability.\n *\n * Unlike updateStabilityOnAccess() which uses global DECAY_CONFIG,\n * this variant accepts a SectionDecayConfig so each memory section\n * can have different reinforcement strength and stability caps.\n *\n * @param stability Current stability in days\n * @param difficulty Node difficulty (0-1)\n * @param decay Section-specific decay configuration\n * @returns New stability in days (capped at section's max_stability_days)\n *\n * @see revisions/memory-sections/issue-2-decay-curves.md\n */\nexport function updateStabilityOnAccessForSection(\n  stability: number,\n  difficulty: number,\n  decay: SectionDecayConfig,\n): number {\n  const difficultyFactor = 1 - (difficulty * 0.5);\n  return Math.min(\n    stability * decay.growth_rate * difficultyFactor,\n    decay.max_stability_days,\n  );\n}\n\n// ============================================================\n// CONFIDENCE FUNCTIONS\n// ============================================================\n\n/**\n * Calculates retrieval confidence using RCS.\n */\nexport function calculateRetrievalConfidence(\n  topScore: number,\n  secondScore: number | null,\n  resultCount: number,\n  hasAttribute: boolean\n): RetrievalConfidenceResult {\n  if (resultCount === 0) {\n    return {\n      score: 0,\n      level: 'LOW',\n      breakdown: { mq: 0, dt: 0, cm: 0 },\n      flags: ['no_results'],\n    };\n  }\n\n  const MQ = topScore;\n\n  const scoreGap = secondScore !== null ? topScore - secondScore : 1.0;\n  const gapNormalized = Math.min(scoreGap / 0.3, 1.0);\n  let focus: number;\n  if (resultCount === 1) focus = 1.0;\n  else if (resultCount <= 5) focus = 0.8;\n  else if (resultCount <= 15) focus = 0.5;\n  else focus = 0.3;\n  const DT = gapNormalized * 0.5 + focus * 0.5;\n\n  const CM = hasAttribute ? 1.0 : 0.5;\n\n  const MQ_safe = Math.max(MQ, 0.1);\n  const DT_safe = Math.max(DT, 0.1);\n  const CM_safe = Math.max(CM, 0.1);\n\n  let score = Math.pow(MQ_safe, RCS_WEIGHTS.match_quality) *\n              Math.pow(DT_safe, RCS_WEIGHTS.distinctiveness) *\n              Math.pow(CM_safe, RCS_WEIGHTS.completeness);\n\n  if (MQ < 0.3) score = Math.min(score, 0.4);\n  if (DT < 0.2) score = Math.min(score, 0.4);\n  if (!hasAttribute) score = Math.min(score, 0.7);\n\n  const flags: string[] = [];\n  if (resultCount > 1 && scoreGap < 0.15) flags.push('disambiguation_needed');\n  if (resultCount < 3 && MQ < 0.6) flags.push('sparse_results');\n  if (!hasAttribute) flags.push('attribute_unknown');\n  if (MQ > 0.95 && DT > 0.8 && hasAttribute) flags.push('perfect_match');\n\n  const level = getConfidenceLevel(score);\n\n  return { score, level, breakdown: { mq: MQ, dt: DT, cm: CM }, flags };\n}\n\n/**\n * Gets confidence level from score.\n */\nexport function getConfidenceLevel(score: number): ConfidenceLevel {\n  if (score >= CONFIDENCE_THRESHOLDS.retrieval.high) return 'HIGH';\n  if (score >= CONFIDENCE_THRESHOLDS.retrieval.medium) return 'MEDIUM';\n  return 'LOW';\n}\n\n/**\n * Detects contradiction between new and existing information.\n */\nexport function detectContradiction(\n  similarity: number,\n  logicalConflict: number,\n  daysSinceExisting: number\n): ContradictionResult {\n  const supersessionLikelihood = daysSinceExisting > 90 ? 0.3 : 0;\n\n  const score = Math.max(0, Math.min(1,\n    similarity * 0.4 + logicalConflict * 0.5 - supersessionLikelihood\n  ));\n\n  if (score >= CONFIDENCE_THRESHOLDS.contradiction.definite) {\n    return {\n      level: 'definite',\n      score,\n      action: 'flag_user',\n      explanation: `High conflict detected (${(score * 100).toFixed(0)}%): new info may contradict existing knowledge`,\n    };\n  }\n\n  if (score >= CONFIDENCE_THRESHOLDS.contradiction.possible) {\n    return {\n      level: 'possible',\n      score,\n      action: 'note_internal',\n      explanation: `Moderate conflict (${(score * 100).toFixed(0)}%): noted for potential review`,\n    };\n  }\n\n  return {\n    level: 'none',\n    score,\n    action: 'safe_to_store',\n    explanation: 'No significant conflict detected',\n  };\n}\n\n// ============================================================\n// ADAPTIVE LIMIT FUNCTIONS\n// ============================================================\n\n/**\n * Calculates adaptive limits based on graph characteristics.\n */\nexport function calculateAdaptiveLimits(\n  graphSize: number,\n  graphDensity: number,\n  queryType: QueryType\n): AdaptiveLimits {\n  if (graphSize < COLD_START_THRESHOLD) {\n    return {\n      ...COLD_START_LIMITS,\n      max_nodes: Math.min(COLD_START_LIMITS.max_nodes, Math.ceil(graphSize * 0.5)),\n    };\n  }\n\n  const entryPoints = Math.max(2, Math.min(5, Math.ceil(Math.log10(graphSize))));\n\n  let maxHops: number;\n  if (graphDensity < 0.001) maxHops = 5;\n  else if (graphDensity < 0.01) maxHops = 4;\n  else if (graphDensity < 0.05) maxHops = 3;\n  else maxHops = 2;\n\n  const percentageMap: Record<QueryType, number> = {\n    simple: 0.02,\n    standard: 0.05,\n    complex: 0.10,\n  };\n  const percentage = percentageMap[queryType];\n\n  const budgetKey = `${queryType}_query`;\n  const budgetLookup = OPERATION_BUDGETS[budgetKey];\n  const budget = budgetLookup ?? OPERATION_BUDGETS['standard_query']!;\n\n  const maxNodes = Math.max(\n    50,\n    Math.min(Math.ceil(graphSize * percentage), budget.max_nodes)\n  );\n\n  return { entry_points: entryPoints, max_hops: maxHops, max_nodes: maxNodes };\n}\n\n/**\n * Calculates quality score from components.\n */\nexport function calculateQualityScore(\n  coverage: number,\n  matchQuality: number,\n  convergence: number\n): number {\n  return (\n    coverage * QUALITY_WEIGHTS.coverage +\n    matchQuality * QUALITY_WEIGHTS.match_quality +\n    convergence * QUALITY_WEIGHTS.convergence\n  );\n}\n\n/**\n * Determines if search should terminate.\n */\nexport function shouldTerminate(\n  currentQuality: number,\n  targetQuality: number,\n  convergence: number,\n  lowConvergenceSteps: number,\n  remainingBudget: BudgetConfig\n): TerminationResult {\n  if (currentQuality >= targetQuality) {\n    return { terminate: true, reason: 'quality_target_met' };\n  }\n  if (convergence < 0.02 && lowConvergenceSteps >= 2) {\n    return { terminate: true, reason: 'converged' };\n  }\n  if (remainingBudget.time_ms <= 0) {\n    return { terminate: true, reason: 'time_exhausted' };\n  }\n  if (remainingBudget.max_nodes <= 0) {\n    return { terminate: true, reason: 'node_limit_reached' };\n  }\n  return { terminate: false, reason: '' };\n}\n\n/**\n * Gets budget for an operation.\n */\nexport function getBudgetForOperation(operation: string): BudgetConfig {\n  const budget = OPERATION_BUDGETS[operation];\n  return budget ?? OPERATION_BUDGETS['standard_query']!;\n}\n\n/**\n * Gets quality target for a query type.\n */\nexport function getQualityTargetForQueryType(queryType: string): QualityTarget {\n  const target = QUALITY_TARGETS[queryType];\n  return target ?? QUALITY_TARGETS['REASONING']!;\n}\n\n// ============================================================\n// BM25 FUNCTIONS\n// ============================================================\n\n/**\n * Gets effective stopwords set.\n */\nexport function getEffectiveStopwords(config: StopwordsConfig = STOPWORDS_CONFIG): Set<string> {\n  return new Set([...config.default_list, ...config.custom_additions]);\n}\n\n/**\n * Removes stopwords from tokens.\n */\nexport function removeStopwords(tokens: string[], stopwords: Set<string>): string[] {\n  return tokens.filter(token => !stopwords.has(token.toLowerCase()));\n}\n\n/**\n * Determines if a term should be indexed.\n */\nexport function shouldIndexTerm(\n  term: string,\n  docFrequency: number,\n  totalDocs: number,\n  config: BM25Config = BM25_CONFIG\n): boolean {\n  if (term.length < config.min_term_length) return false;\n  if (term.length > config.max_term_length) return false;\n  if (docFrequency < 1) return false;\n  if (totalDocs === 0) return docFrequency >= 1;\n  const frequencyRatio = docFrequency / totalDocs;\n  if (frequencyRatio > config.max_doc_frequency_ratio) return false;\n  return true;\n}\n\n/**\n * Gets field boost for a field type.\n */\nexport function getFieldBoost(field: FieldType): number {\n  const boost = FIELD_BOOSTS.find(fb => fb.field === field);\n  return boost?.boost ?? 1.0;\n}\n\n// ============================================================\n// VALIDATION FUNCTIONS\n// ============================================================\n\nexport function validateRerankingWeights(weights: unknown): weights is RerankingWeights {\n  return RerankingWeightsSchema.safeParse(weights).success;\n}\n\nexport function validateRerankingConfig(config: unknown): config is RerankingConfig {\n  return RerankingConfigSchema.safeParse(config).success;\n}\n\nexport function validateDecayConfig(config: unknown): config is DecayConfig {\n  return DecayConfigSchema.safeParse(config).success;\n}\n\nexport function validateSSAParams(params: unknown): params is SSAParams {\n  return SSAParamsSchema.safeParse(params).success;\n}\n\nexport function validateSSAEdgeWeights(weights: unknown): weights is SSAEdgeWeights {\n  return SSAEdgeWeightsSchema.safeParse(weights).success;\n}\n\nexport function validateConfidenceThresholds(thresholds: unknown): thresholds is ConfidenceThresholds {\n  return ConfidenceThresholdsSchema.safeParse(thresholds).success;\n}\n\nexport function validateBudgetConfig(config: unknown): config is BudgetConfig {\n  return BudgetConfigSchema.safeParse(config).success;\n}\n\nexport function validateAdaptiveLimits(limits: unknown): limits is AdaptiveLimits {\n  return AdaptiveLimitsSchema.safeParse(limits).success;\n}\n\nexport function validateBM25Config(config: unknown): config is BM25Config {\n  return BM25ConfigSchema.safeParse(config).success;\n}\n\nexport function validateQualityTarget(target: unknown): target is QualityTarget {\n  return QualityTargetSchema.safeParse(target).success;\n}\n\nexport function validateGraphMetrics(metrics: unknown): metrics is GraphMetrics {\n  return GraphMetricsSchema.safeParse(metrics).success;\n}\n"]}